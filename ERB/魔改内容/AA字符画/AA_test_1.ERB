;-------------------------------------------------
;函数名:AA_帕琪_后入式
;概　要:风格化的指令互动图文演出
;展现指令交互中AA字符画与文本配合的演出效果，展现字符画渐入函数FADE_AA的整体功能
;-------------------------------------------------
@AA_帕琪_后入式
#LOCALSIZE 1
#LOCALSSIZE 1
	SETCOLOR 0x9932CC
	PRINTFORMDL 已经差不多要达极限了…！
	PRINTFORMDL 似乎感受到的帕琪将蜜穴里的嫩肉紧❤紧❤地缠绕了上来
	CALL HPH_PRINT,@"「不要拔出来...HPH　射进来吧...HPHHPH」","L"
	CALL HPH_PRINT,@"「在子宫内HPH　把宝宝汁全部射进来啊HPH」","L"
	PRINTFORMDW 帕琪不像样的魅惑淫语让仅存的理智也吹得一干二净…！脑海只剩下疯狂地最后冲刺一件事…
	CALL HPH_PRINT,@"「噫！哦…哦齁……HPH 哦…HPH哦齁齁齁……咿去…去惹咿咿咿咿咿咿咿HPHHPHHPH…」","W"
	RESETCOLOR 
	DRAWLINE
	CALL FADE_AA,,3
	CALL FADE_AA,,4
	CALL FADE_AA,,5
	CALL FADE_AA,,6
	CALL FADE_AA,,1,3
	CALL FADE_AA,,2,1,1
	WAIT
;-------------------------------------------------
;AA画渐入渐出函数，移植自@FADE
;	参数0：帧数。帧数越高效果越顺滑，默认为8
;	参数1：字符画编号
;	参数2：特效函数，（bit=0，屏幕震动；=1，屏闪）
;	参数3：0，清除字符画行；1，保留
;只保留了FADE的渐入功能。渐出和变色需要重新调整参数
;-------------------------------------------------

@FADE_AA(ARG = 8,ARG:1,ARG:2,ARG:3 = 0)
#LOCALSIZE 5
#LOCALSSIZE 1
	#DIM PRICOLOR,1
	#DIM RED,2
	#DIM GREEN,2
	#DIM BLUE,2
	VARSET RED
	VARSET GREEN
	VARSET BLUE
	;元の文字色の取得
	PRICOLOR = GETCOLOR()
	LOCAL:2 = CURRENTREDRAW()
	REDRAW 0	
	;初期色
	SETCOLOR GETBGCOLOR()

	;RGBそれぞれのベース値、減少値を各色:0と1に代入
	RED = GETRED()
	IF RED > GETRED(PRICOLOR)
		RED:1 = MAX(1, (RED-GETRED(PRICOLOR))/ARG)
	ELSEIF RED < GETRED(PRICOLOR)
		RED:1 = MIN(-1, (RED-GETRED(PRICOLOR))/ARG)
	ENDIF
	GREEN = GETGREEN()
	IF GREEN > GETGREEN(PRICOLOR)
		GREEN:1 = MAX(1, (GREEN-GETGREEN(PRICOLOR))/ARG)
	ELSEIF GREEN < GETGREEN(PRICOLOR)
		GREEN:1 = MIN(-1, (GREEN-GETGREEN(PRICOLOR))/ARG)
	ENDIF
	BLUE = GETBLUE()
	IF BLUE > GETBLUE(PRICOLOR)
		BLUE:1 = MAX(1, (BLUE-GETBLUE(PRICOLOR))/ARG)
	ELSEIF BLUE < GETBLUE(PRICOLOR)
		BLUE:1 = MIN(-1, (BLUE-GETBLUE(PRICOLOR))/ARG)
	ENDIF

	LOCAL:4 = LINECOUNT		
	CALL PRINT_AA(ARG:1)
	TWAIT 100 , 0
	CLEARLINE LINECOUNT - LOCAL:4 

	FOR LOCAL:1, 0, ARG
		LOCAL:4 = LINECOUNT
		RED = MAX(0, RED-RED:1)
		GREEN = MAX(0, GREEN-GREEN:1)
		BLUE = MAX(0, BLUE-BLUE:1)
		SETCOLOR RED, GREEN, BLUE
		CALL PRINT_AA(ARG:1)
		TWAIT 100 , 0
		CLEARLINE LINECOUNT - LOCAL:4 
	NEXT

	LOCAL:4 = LINECOUNT
	CALL PRINT_AA(ARG:1)
	SIF GETBIT(ARG:2,0)
		CALL QUAKE
	SIF GETBIT(ARG:2,1)
		CALL FLASH_AA,,0xEEE8AA
	SETCOLOR PRICOLOR
	TWAIT 200 , 0

	SIF !ARG:3
		CLEARLINE LINECOUNT - LOCAL:4 

	RETURN LOCAL:2

;-------------------------------------------------
;函数名:PRINT_AA
;概　要:打印字符画
;Monapo字体
;-------------------------------------------------
@PRINT_AAM(ARG)
#LOCALSIZE 2
#LOCALSSIZE 1
	LOCAL:0 = CURRENTREDRAW()
	LOCALS:0 = %GETFONT()%
	LOCAL:1 = GETBGCOLOR()
	SETFONT "Monapo"
	;SETBGCOLOR 0xEEE8AA
	REDRAW 0

	CALLFORM PRINT_AA_{ARG}

	SETBGCOLOR LOCAL:1
	SETFONT LOCALS:0
	REDRAW LOCAL:0

;-------------------------------------------------
;函数名:PRINT_AA
;概　要:打印字符画
;-------------------------------------------------
@PRINT_AA(ARG)
#LOCALSIZE 2
#LOCALSSIZE 1
	LOCAL:0 = CURRENTREDRAW()
	LOCALS:0 = %GETFONT()%
	LOCAL:1 = GETBGCOLOR()
	SETFONT "Saitamaar"
	;SETBGCOLOR 0xEEE8AA
	REDRAW 0

	CALLFORM PRINT_AA_{ARG}

	SETBGCOLOR LOCAL:1
	SETFONT LOCALS:0
	REDRAW LOCAL:0

;-------------------------------------------------
;函数名:FLASH_AA
;概　要:为字符画设计的闪屏效果
;-------------------------------------------------
@FLASH_AA(ARG = 3, ARG:1 = 0xFFFFFF)
#LOCALSIZE 2
#LOCALSSIZE 1
	REDRAW 0
	FOR LOCAL, 0, 150
		PRINTL
	NEXT
	LOCAL:1 = GETBGCOLOR()
	FOR LOCAL, 0, ARG
		SETBGCOLOR ARG:1
		TWAIT 2,0
		SETBGCOLOR LOCAL:1
		TWAIT 5,0
	NEXT
	CLEARLINE 150
	RETURN RESULT
