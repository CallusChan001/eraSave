@ADD_CUSTOM_COM4
IF BASE:MASTER:体力 <= 700
	PRINTFORMW 这种身体情况下再勉强会出事的...
	RETURN 0
ELSE
	REPEAT 5
		REUSELASTLINE %CALLNAME:MASTER%潜水中.%"." * COUNT%
		TWAIT 50, 1
	REND
	CALL Swimming_Gather
	;基本经验
	EXP:MASTER:採集経験 ++
	SIF ITEM:108 && !RAND:2
		EXP:MASTER:採集経験 ++
	;IF CHK_DATENOW(CFLAG:CHARA:约会中) && CHARA
	;	EXP:MASTER:約會経験 ++
	;	EXP:CHARA:約會経験 ++
	;ENDIF
	TIME += 30
	;体力、气力减少（减少量受战斗能力影响，主要是气力）
	DOWNBASE:MASTER:体力 = 100 - (ABL:MASTER:戦闘能力 * 10)
	DOWNBASE:MASTER:気力 = 300 - (ABL:MASTER:戦闘能力 * 20) 
ENDIF

@ADD_CUSTOM_COM_ABLE4
SIF !TFLAG:100
	RETURN 0
SIF FLAG:70
	RETURN 0
SIF CFLAG:うふふ	;做爱时
	RETURN 0
;不在游泳时
SIF !TEQUIP:MASTER:SWIMMING
	RETURN 0
SIF !ADD_SWIMMING_AREA(CFLAG:MASTER:現在位置)
	RETURN 0
SIF !BASE:MASTER:気力
	RETURN 0	
RETURN 1

@Swimming_Gather
;沟槽的抽卡游戏还在追我 TMD
;用了相对而言估计是最笨的方法做抽奖
SELECTCASE CFLAG:MASTER:現在位置
	CASE GET_MAP_REPLACEMENT(1015)	;月都-静海沙滩——“静海”  不可钓鱼，获取素材几率较高（大概吧）
		SELECTCASE RAND:20
		CASE 0,1
			PRINTFORML 找到了超高级素材！
			SELECTCASE RAND:2
			CASE 0 ;暗黑物质
				CALL GET_ITEM(ITEMNAME:639, 1, 2)
			CASE 1 ;龟血
				CALL GET_ITEM(ITEMNAME:625, 1, 2)
			ENDSELECT		
		CASE 2 TO 4
			PRINTFORML 找到了些高级素材！
			CALL GET_ITEM(ITEMNAME:624, 2, 2)
		CASE 5 TO 9
			SELECTCASE RAND:3
			CASE 0,1
				PRINTFORML 找到了些罕见素材。
				SELECTCASE RAND:2
				CASE 0 ;特级药草
					CALL GET_ITEM(ITEMNAME:613, 2, 2)
				CASE 1 ;高丽人参
					CALL GET_ITEM(ITEMNAME:618, 2, 2)
				ENDSELECT		
			CASE 2
				PRINTFORML 不知是谁在这地方扔了一大袋的筹码...
				CALL GET_MONEY_CM(150, 2)
				PRINTW
			ENDSELECT
		CASE 10 TO 19
			SELECTCASE RAND:3
			CASE 0,1
				PRINTFORML 找到了些一般素材。
				SELECTCASE RAND:2
				CASE 0 ;药草
					CALL GET_ITEM(ITEMNAME:607, 3, 2)
				CASE 1 ;高级药草
					CALL GET_ITEM(ITEMNAME:608, 3, 2)
				ENDSELECT
			CASE 2
				PRINTFORML 不知是谁在这地方扔了些筹码...
				CALL GET_MONEY_CM(100, 2)
				PRINTW
			ENDSELECT
		ENDSELECT
	CASE GET_MAP_REPLACEMENT(343) , GET_MAP_REPLACEMENT(347)	;雾之湖（两处河岸）——“湖” 	平平无奇的湖
		SELECTCASE RAND:20
		CASE 0
			PRINTFORML 找到了超高级素材！
			CALL GET_ITEM(ITEMNAME:609, 1, 2)		
		CASE 1 TO 3
			PRINTFORML 找到了些高级素材！
			SELECTCASE RAND:2
			CASE 0 ;龙之爪
				CALL GET_ITEM(ITEMNAME:606, 2, 2)
			CASE 1 ;恶華乳液
				CALL GET_ITEM(ITEMNAME:624, 2, 2)
			ENDSELECT
		CASE 4 TO 9
			SELECTCASE RAND:3
			CASE 0 
				PRINTFORML 找到了些罕见素材。
				CALL GET_ITEM(ITEMNAME:633, 2, 2)		
			CASE 1
				PRINTFORML 不知是谁往湖里扔了一大袋的筹码...
				CALL GET_MONEY_CM(150, 2)
			CASE 2
				PRINTFORML 捞到了好吃的鱼！
				CALL GET_ITEM(ITEMNAME:708, 1, 2)
			ENDSELECT
		CASE 10 TO 19
			SELECTCASE RAND:3
			CASE 0 
				PRINTFORML 找到了些一般素材。
				SELECTCASE RAND:3
				CASE 0 ;药草
					CALL GET_ITEM(ITEMNAME:607, 3, 2)
				CASE 1 ;高级药草
					CALL GET_ITEM(ITEMNAME:608, 3, 2)
				CASE 2 ;青蛙
					CALL GET_ITEM(ITEMNAME:706, 3, 2)
					SIF TEQUIP:33:SWIMMING && CFLAG:33:現在位置 == CFLAG:MASTER:現在位置	
						PRINTFORMW 诹访子若有所思地看着你…
				ENDSELECT
			CASE 1
				PRINTFORML 不知是谁往湖里扔了些筹码...
				CALL GET_MONEY_CM(100, 2)
			CASE 2
				PRINTFORML 捞到了鱼！
				CALL GET_ITEM(ITEMNAME:707, 1, 2)
			ENDSELECT
		ENDSELECT
	CASE GET_MAP_REPLACEMENT(703)	;妖怪山山麓-玄武之泽——“河”  出鱼的几率较高
		SELECTCASE RAND:20
		CASE 0
			PRINTFORML 找到了超高级素材！
			CALL GET_ITEM(ITEMNAME:609, 1, 2)		
		CASE 1 TO 3
			PRINTFORML 找到了些高级素材！
			CALL GET_ITEM(ITEMNAME:638, 2, 2)
		CASE 4 TO 9
			SELECTCASE RAND:5
			CASE 0 
				PRINTFORML 找到了些罕见素材。
				CALL GET_ITEM(ITEMNAME:614, 2, 2)		
			CASE 1
				PRINTFORML 不知是谁往湖里扔了一大袋的筹码...
				CALL GET_MONEY_CM(150, 2)
			CASE 2 TO 4
				PRINTFORML 捞到了好吃的鱼！
				CALL GET_ITEM(ITEMNAME:708, 1, 2)
			ENDSELECT
		CASE 10 TO 19
			SELECTCASE RAND:5
			CASE 0 
				PRINTFORML 找到了些一般素材。
				SELECTCASE RAND:4
				CASE 0 ;药草
					CALL GET_ITEM(ITEMNAME:607, 3, 2)
				CASE 1 ;高级药草
					CALL GET_ITEM(ITEMNAME:608, 3, 2)	
				CASE 2 ;碎骨
					CALL GET_ITEM(ITEMNAME:631, 3, 2)			
				CASE 3 ;青蛙
					CALL GET_ITEM(ITEMNAME:706, 3, 2)
					SIF TEQUIP:33:SWIMMING && CFLAG:33:現在位置 == CFLAG:MASTER:現在位置	
						PRINTFORMW 诹访子若有所思地看着你…
				ENDSELECT
			CASE 1
				PRINTFORML 不知是谁往湖里扔了些筹码...
				CALL GET_MONEY_CM(100, 2)
			CASE 2 TO 4
				PRINTFORML 捞到了鱼！
				CALL GET_ITEM(ITEMNAME:707, 1, 2)
			ENDSELECT
		ENDSELECT	
	CASE GET_MAP_REPLACEMENT(602)	;冥界-赛之河原——“河”  出鱼的几率较高
		SELECTCASE RAND:20
		CASE 0
			PRINTFORML 一番寻找后没找到好素材...
			PRINTFORML 但找着找着发现了一个宝箱...里面有好酒！
			CALL GET_ITEM(ITEMNAME:513, 5, 2)			
		CASE 1 TO 3
			PRINTFORML 找到了些高级素材！
			SELECTCASE RAND:2
			CASE 0 ;龙之爪
				CALL GET_ITEM(ITEMNAME:606, 2, 2)
			CASE 1 ;辰砂
				CALL GET_ITEM(ITEMNAME:635, 2, 2)
			ENDSELECT
		CASE 4 TO 9
			SELECTCASE RAND:5
			CASE 0 
				PRINTFORML 找到了些罕见素材。
				CALL GET_ITEM(ITEMNAME:618, 2, 2)		
			CASE 1
				PRINTFORML 不知是谁往河里扔了一大袋的筹码...
				CALL GET_MONEY_CM(150, 2)
			CASE 2 TO 4
				PRINTFORML 捞到了好吃的鱼！
				CALL GET_ITEM(ITEMNAME:708, 1, 2)
			ENDSELECT
		CASE 10 TO 19
			SELECTCASE RAND:5
			CASE 0 
				PRINTFORML 找到了些一般素材。
				SELECTCASE RAND:2
				CASE 0 ;药草
					CALL GET_ITEM(ITEMNAME:607, 3, 2)
				CASE 1 ;青蛙
					CALL GET_ITEM(ITEMNAME:706, 3, 2)
					SIF TEQUIP:33:SWIMMING && CFLAG:33:現在位置 == CFLAG:MASTER:現在位置	
						PRINTFORMW 诹访子若有所思地看着你…
				ENDSELECT
			CASE 1
				PRINTFORML 不知是谁往河里扔了些筹码...
				CALL GET_MONEY_CM(100, 2)
			CASE 2 TO 4
				PRINTFORML 捞到了鱼！
				CALL GET_ITEM(ITEMNAME:707, 1, 2)
			ENDSELECT
		ENDSELECT
	CASE GET_MAP_REPLACEMENT(945)	;地底-川岸——“河”  出鱼的几率较高
		SELECTCASE RAND:20
		CASE 0
			PRINTFORML 找到了超高级素材！
			CALL GET_ITEM(ITEMNAME:609, 1, 2)		
		CASE 1 TO 3
			PRINTFORML 找到了些高级素材！
			SELECTCASE RAND:2
			CASE 0 ;龙之爪
				CALL GET_ITEM(ITEMNAME:606, 2, 2)
			CASE 1 ;曼陀罗草
				CALL GET_ITEM(ITEMNAME:620, 2, 2)
			ENDSELECT
		CASE 4 TO 9
			SELECTCASE RAND:5
			CASE 0 
				PRINTFORML 找到了些罕见素材。
				CALL GET_ITEM(ITEMNAME:633, 2, 2)		
			CASE 1
				PRINTFORML 不知是谁往河里扔了一大袋的筹码...
				CALL GET_MONEY_CM(150, 2)
			CASE 2 TO 4
				PRINTFORML 捞到了好吃的鱼！
				CALL GET_ITEM(ITEMNAME:708, 1, 2)
			ENDSELECT
		CASE 10 TO 19
			SELECTCASE RAND:5
			CASE 0 
				PRINTFORML 找到了些一般素材。
				SELECTCASE RAND:2
				CASE 0 ;碎骨
					CALL GET_ITEM(ITEMNAME:631, 3, 2)	
				CASE 1 ;青蛙
					CALL GET_ITEM(ITEMNAME:706, 3, 2)
					SIF TEQUIP:33:SWIMMING && CFLAG:33:現在位置 == CFLAG:MASTER:現在位置	
						PRINTFORMW 诹访子若有所思地看着你…
				ENDSELECT
			CASE 1
				PRINTFORML 不知是谁往河里扔了些筹码...
				CALL GET_MONEY_CM(100, 2)
			CASE 2 TO 4
				PRINTFORML 捞到了鱼！
				CALL GET_ITEM(ITEMNAME:707, 1, 2)
			ENDSELECT
		ENDSELECT
	CASE GET_MAP_REPLACEMENT(806)	;妖怪山山顶-瀑布后——“水”	;似乎能捞到点不该在湖里出来的东西...
		SELECTCASE RAND:20
		CASE 0
			SELECTCASE RAND:2
			CASE 0
				PRINTFORML 找到了仙丹！
				CALL GET_ITEM(ITEMNAME:512, 1, 2)
			CASE 1
				PRINTFORML 找到了超高级素材！
				CALL GET_ITEM(ITEMNAME:609, 1, 2)
			ENDSELECT		
		CASE 1 TO 3
			SELECTCASE RAND:3
			CASE 0,1
				PRINTFORML 找到了些高级素材！
				SELECTCASE RAND:2
				CASE 0 ;龙之爪
					CALL GET_ITEM(ITEMNAME:606, 2, 2)
				CASE 1 ;龟骨
					CALL GET_ITEM(ITEMNAME:634, 2, 2)
				ENDSELECT
			CASE 2
				PRINTFORML 找到了貌似不该在这里出现的东西...
				CALL GET_ITEM(ITEMNAME:402, 1, 2)			
			ENDSELECT
		CASE 4 TO 9
			SELECTCASE RAND:5
			CASE 0 
				PRINTFORML 找到了些罕见素材。
				CALL GET_ITEM(ITEMNAME:613, 2, 2)		
			CASE 1
				PRINTFORML 不知是谁往瀑布里扔了一大袋的筹码...
				CALL GET_MONEY_CM(150, 2)
			CASE 2
				PRINTFORML 捞到了好吃的鱼！
				CALL GET_ITEM(ITEMNAME:708, 1, 2)
			CASE 3,4
				PRINTFORML 捞到了山上神社特供的十连券！
				;哪家神社会这么搞啊喂
				CALL GET_ITEM(ITEMNAME:131, 10, 2)
			ENDSELECT
		CASE 10 TO 19
			SELECTCASE RAND:4
			CASE 0 
				PRINTFORML 找到了些一般素材。
				SELECTCASE RAND:2
				CASE 0 ;碎骨
					CALL GET_ITEM(ITEMNAME:631, 3, 2)
				CASE 1 ;青蛙
					CALL GET_ITEM(ITEMNAME:706, 3, 2)
					SIF TEQUIP:33:SWIMMING && CFLAG:33:現在位置 == CFLAG:MASTER:現在位置	
						PRINTFORMW 诹访子若有所思地看着你…
				ENDSELECT
			CASE 1
				PRINTFORML 不知是谁往瀑布里扔了些筹码...
				CALL GET_MONEY_CM(100, 2)
			CASE 2
				PRINTFORML 捞到了鱼！
				CALL GET_ITEM(ITEMNAME:707, 1, 2)
			CASE 3
				PRINTFORML 有几块看起来眼熟的守札进入了你的视线...
				CALL GET_ITEM(ITEMNAME:131, 3, 2)			
			ENDSELECT
		ENDSELECT
ENDSELECT
