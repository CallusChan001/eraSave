;Double Handjob
@ADD_CUSTOM_SCOM20
CALL ADD_CUSTOM_SCOM_MODULE20
CALL ADD_SEX_MODULE_EXECUTE

RETURN 1

@ADD_CUSTOM_SCOM_ABLE20
SIF FLAG:時間停止
    RETURN 0
CALL ADD_CUSTOM_SCOM_MODULE20
CALL ADD_SEX_MODULE_COM_ABLE
SIF !RESULT
	RETURN 0
RETURN 1

@ADD_CUSTOM_CAN_SCOM20(ARG)
SKIPDISP ARG
PRINTFORML 双人腹交
SKIPDISP 0

CALL ADD_CUSTOM_SCOM_MODULE20
CALL ADD_SEX_MODULE_CAN_COM(ARG)
RETURN RESULT

@ADD_CUSTOM_MESSAGE_SCOM20
IF NOWEX:PLAYER:射精
    PRINTFORMDL 感觉到%CALLNAME:MASTER%快到极限，%CALLNAME:(ADD_SEX_MODULE_CHARA:0)%和%CALLNAME:(ADD_SEX_MODULE_CHARA:1)%用柔软的小腹夹紧%TINKO(PLAYER, 1)%。
ELSE
    PRINTFORMDL %CALLNAME:MASTER%用%CALLNAME:(ADD_SEX_MODULE_CHARA:0)%和%CALLNAME:(ADD_SEX_MODULE_CHARA:1)%的小腹摩擦%TINKO(PLAYER,1)%。
    IF CFLAG:(ADD_SEX_MODULE_CHARA:0):妊娠経過日数 >= 30 && CFLAG:(ADD_SEX_MODULE_CHARA:1):妊娠経過日数 >= 30
        PRINTFORMDL %FSYN("阴茎")%完全被包进她们的孕肚之间……
    ELSEIF 充填率(ADD_SEX_MODULE_CHARA:0,1) >= 100 && 充填率(ADD_SEX_MODULE_CHARA:1,1) >= 100
        PRINTFORMDL 她们被精液撑鼓的小腹完全包裹住%FSYN("阴茎")%……
    ELSE
        FOR LOCAL, 0, 2
            PRINTFORMD %CALLNAME:(ADD_SEX_MODULE_CHARA:0)%
            IF CFLAG:(ADD_SEX_MODULE_CHARA:LOCAL):妊娠経過日数 >= 30
                PRINTFORMD 怀孕的
            ELSEIF 充填率(ADD_SEX_MODULE_CHARA:LOCAL,1) >= 100
                PRINTFORMD 被灌满精液的
            ELSE
                PRINTFORMD 光滑的
            ENDIF
            PRINTFORMD 小腹
            SIF LOCAL == 0
                PRINTFORMD 以及
        NEXT
        PRINTFORMDL 以丝绸般的触感刺激着%FSYN("阴茎")%……
    ENDIF
ENDIF

@ASSISTANT_KOJO_CUSTOM_SCOM20
FOR LOCAL, 0, ADD_SEX_MODULE_ACTION_COUNT
	SIF ADD_SEX_MODULE_CHARA:LOCAL == TARGET
		CONTINUE
	CALL KOJO_MESSAGE_SEND("COMMAND_ASSISTANT",-1,ADD_SEX_MODULE_CHARA:LOCAL,-1,-1)
NEXT

@ADD_CUSTOM_SCOM_SET20
#DIM DYNAMIC H0
#DIM DYNAMIC H1

H0 = ADD_MASTER_POSE_TR(PLAYER, SET_BELLY,SET_P)
H1 = ADD_MASTER_POSE_TR(PLAYER, SET_BELLY,SET_P, 1)

SIF H0 <= 0 || H1 <= 0 ;nothing valid in the current turn
	RETURN 0

SIF H0 == H1
	RETURN 0

ADD_SEX_MODULE_ACTOR:0 = PLAYER
ADD_SEX_MODULE_CHARA:0 = H0
ADD_SEX_MODULE_CHARA:1 = H1

RETURN 1

@ADD_CUSTOM_SCOM_MODULE20
CALL ADD_SEX_MODULE_START(20)
CALL ADD_SEX_MODULE_ADD_ACTION(SET_P, SET_BELLY,,0)
CALL ADD_SEX_MODULE_ADD_ACTION(SET_P, SET_BELLY,,1)
CALL ADD_SEX_MODULE_FINISH
