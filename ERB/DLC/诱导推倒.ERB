@诱导逆推_询问(ARG)
SIF !诱导逆推_开关
	RETURN 0
IF CFLAG:ARG:依頼状況 == 0 && GETBIT(诱导逆推_进程:ARG:0, 0);&& !GETBIT(诱导逆推_进程:ARG:0, 1)
	PRINTFORMW %CALLNAME:ARG%好像有事想要拜托%CALLNAME:MASTER%
	; CALL SHOW_IRAI_MESSAGE(CHARA, CFLAG:CHARA:依頼内容, "依頼提示時")
	; CALL SHOW_IRAI_DATA(CFLAG:CHARA:依頼内容, 0)
	; PRINTFORML 依頼%TOFULL(TOSTR(CHK_SLOT))%
	PRINTFORML 　＜那个……能找个安静的地方说吗？＞
	PRINTFORML 　　委托者：%NAME:ARG%    -    %NAME_FROM_PLACE(CFLAG:ARG:現在位置)%
	PRINTFORML 　委托内容：%NAME:ARG%似乎有什么重要的事想找你
	PRINTFORML 　　　报酬：？？？
	; SIF STRLENS(STR_DATA_IRAI(IRAI_ID, "依頼報告不要", CLIENT_ID))
	; 	PRINTFORML 　　　報告：%STR_DATA_IRAI(IRAI_ID, "依頼報告不要", CLIENT_ID)%
	; SIF STRLENS(STR_DATA_IRAI(IRAI_ID, "依頼備考表示", CLIENT_ID))
	PRINTFORML 　　　备注：先带着%NAME:ARG%找一个没人的地方吧
	CALL ASK_YN("接受委托", "拒绝")
	IF RESULT
		SETBIT 诱导逆推_进程:ARG:0, 1
		PRINTFORML %CALLNAME:MASTER%婉言拒绝了
		; CALL SHOW_IRAI_MESSAGE(CHARA, CFLAG:CHARA:依頼内容, "依頼非受託時")
		PRINTFORMW %CALLNAME:ARG%看起来很可惜的样子
		RETURN -1
	ELSE
		SETBIT 诱导逆推_进程:ARG:0, 10
		PRINTFORML %CALLNAME:MASTER%接受了%CALLNAME:ARG%的委托
	ENDIF
ENDIF

@诱导逆推_强行结束(ARG)
IF 诱导逆推_目前不可进行() == -1
	PRINTFORML %CALLNAME:ARG%支支吾吾的说没什么事了
	PRINTFORMW 从刚才开始就时不时瞟向旁边的人，似乎需要旁边完全没人才行呢……
	VARSET 诱导逆推_进程:ARG:0
	RETURN -1
ENDIF
IF 诱导逆推_目前不可进行() == -2
	PRINTFORML %CALLNAME:ARG%支支吾吾的说没什么事了
	PRINTFORMW 从刚才开始就一直关注着孩子，似乎需要旁边完全没人才行呢……
	VARSET 诱导逆推_进程:ARG:0
	RETURN -2
ENDIF


@诱导逆推_人物界面显示
#DIM IRAI_NUM
#DIM _COUNT
SIF !诱导逆推_开关
	RETURN 0
IRAI_NUM = COUNT_IRAI_SLOT()
FOR	_COUNT, 1, CHARANUM
	IF GETBIT(诱导逆推_进程:_COUNT:0, 10)
		IRAI_NUM ++
		PRINTFORML 依赖%TOFULL(TOSTR(IRAI_NUM))%
		PRINTFORML 　＜那个……能找个安静的地方说吗？＞
		PRINTFORML 　　委托者：%NAME:_COUNT%    -    %NAME_FROM_PLACE(CFLAG:_COUNT:現在位置)%
		PRINTFORML 　委托内容：%CALLNAME:_COUNT%似乎有什么重要的事想找你
		PRINTFORML 　　　报酬：？？？
		PRINTFORML 　　　备注：先带着%CALLNAME:_COUNT%找一个没人的地方吧
	ENDIF
NEXT

@诱导逆推_目前不可进行(ARG)
#FUNCTION
#DIM _COUNT
SIF !诱导逆推_开关
	RETURNF 0
SIF GET_TARGETNUM() > 1
	RETURNF -1
FOR _COUNT, 1,MAXCHILD + 1
	SIF CHILD_INTERACTABLE_HERE:ARG:_COUNT == ARG
		RETURNF -2
NEXT

@诱导逆推_执行(ARG)
SIF !诱导逆推_开关
	RETURN 0
SIF (FLAG:70 && CFLAG:TARGET:344 == 0)
	RETURN 0
SIF CFLAG:MASTER:诶嘿嘿 != 0 || GET_TARGETNUM() > 1
	RETURN 0
SIF CFLAG:ARG:現在位置 % 100 == 97
	RETURN 0
SIF	OUTROOF(CFLAG:ARG:現在位置) && ABL:ARG:露出癖 + TALENT:ARG:羞恥心 < 3
	RETURN 0
PRINTL
PRINTL
PRINTL
PRINTFORML 突然，整个人被一道从背后传来的力拉向了后面
PRINTFORMW 反应过来时，身体被%CALLNAME:ARG%牢牢地压住了
IF OUTROOF(CFLAG:ARG:現在位置)
	CALL 潜伏場所決定処理
	SETBIT CFLAG:TARGET:潜伏状態,0
	SETBIT FLAG:潜伏,0
	;開始時に潜伏率を100%に
	BASE:MASTER:潜伏率 = 100
ENDIF
CFLAG:MASTER:诶嘿嘿 = 2
CFLAG:ARG:诶嘿嘿 = 2
TFLAG:102 = 3
;経過時間表示用に開始時間を取っておく
IF !UFUFU_START_TIME
	UFUFU_START_TIME = TIME
	UFUFU_START_DAY = DAY
ENDIF
VARSET 诱导逆推_进程:ARG:0
