@M_KOJO_ORTHODOX_IRAI_K49(ROLE, SCENE, IRAI_ID)
#DIMS ROLE     ;キャラの立场、依頼者かそうでないか
#DIMS SCENE    ;セリフの表示されるタイミング
#DIM  IRAI_ID  ;依頼自体のID
#DIM  CLIENT_ID;依頼者IDだけ抜き出したもの
#DIM  CHK_ID   ;依頼IDだけ抜き出したもの
#DIMS BOOK_NAME;本の名称
CHK_ID    = IRAI_ID % 1000
CLIENT_ID = IRAI_ID_TO_CLIENT(IRAI_ID)
SELECTCASE ROLE
	CASE "CLIENT"
		;一般依頼
		IF IS_COMMON_IRAI(IRAI_ID)
			SELECTCASE STR_DATA_IRAI(IRAI_ID, "依頼名", CLIENT_ID)
				CASE "一般依頼名"
					SELECTCASE SCENE
						CASE "依頼提示時"
						;依頼を持ちかけられる时
						CASE "依頼非受託時"
						;内容だけ见て受託しなかった时
						CASE "依頼受託時"
						;依頼を受託した时
						CASE "依頼確認時"
						;[366]で依頼内容を依頼人に确认した时
						CASE "依頼破棄時"
						;受託した依頼を破棄する时
						CASE "依頼実行直前"
						;[367]で依頼を実行する时、実行处理の前に呼び出される
						CASE "依頼実行直後"
						;[367]で依頼を実行する时、実行处理の后に呼び出される
						CASE "成功報告時"
						;报告时（成功）
						CASE "失敗報告時"
						;报告时（失败）
						;この他、报告忘れや期限切れで失败扱いになり后日依頼人に遭遇した际にも表示
					ENDSELECT
			ENDSELECT
			RETURN
		ENDIF
		
		;固有依頼
		;个々の依頼名で分岐
		;SCENEのWAITに关する仕样
		;WAIT无しでよい　　　　："依頼提示時", "依頼非受託時", "依頼確認時", "依頼破棄時", "成功報告時", "失敗報告時"
		;
		;以下の2つは实际にはCARRYOUTでの地の文处理との比较检讨が必要
		;WAITを入れたほうが适当："依頼実行直前", "依頼実行直後"
		SELECTCASE STR_DATA_IRAI(IRAI_ID, "依頼名", CLIENT_ID)
			CASE "参考文献"
				SELECTCASE SCENE
					;依頼を持ちかけられる时
					CASE "依頼提示時"
						SIF BOOK_NAME == ""
							BOOK_NAME = %BOOKSNAME_ORTHODOX_49()%
						IF 陷落状态() >= 4
							PRINTFORML 「大人，那个，我能稍微拜托你一件事吗？」
							PRINTFORML 「能帮我找来并借到%BOOK_NAME%吗？」
							PRINTFORML 「我以前听说过它也曾进入过幻想乡。」
						ELSEIF 陷落状态() == 3
							PRINTFORML 「……啊，正好。%CALLNAME:MASTER%的话，能找到%BOOK_NAME%吧？」
							PRINTFORML 「『不知道』？谦虚什么的，不适合%CALLNAME:MASTER%哦。」
						ELSEIF 陷落状态() == 2
							PRINTFORML 「事到如今，也顾不上那么多了。」
							PRINTFORML 「……我希望你能帮我找到%BOOK_NAME%。」
						ELSE
							PRINTFORML 「不好意思，能帮我找来%BOOK_NAME%吗？」
						ENDIF
					;内容だけ见て受託しなかった时
					CASE "依頼非受託時"
						IF 陷落状态() >= 4
							PRINTFORML 「大人也很忙，没办法呢」
							PRINTFORML 「……大人也很忙」
							PRINTFORML 「『你想说什么』？不，我没什么想说的哦」
						ELSEIF 陷落状态() == 3
							PRINTFORML 「『没有找到的自信』？那也没办法了呢」
							PRINTFORML 「我还以为%CALLNAME:MASTER%的话，可以呢」
						ELSEIF 陷落状态() == 2
							PRINTFORML 「这点小事都做不到？哼，终究是个卑鄙小人吗」
							PRINTFORML 「『明明是你自己想依頼那个卑鄙小人』？我只是特意为你准备了工作而已哦」
						ELSE
							PRINTFORML 「是吗，那也没办法了呢」
						ENDIF
					;依頼を受託した时
					CASE "依頼受託時"
						IF 陷落状态() >= 4
							PRINTFORML 「太好了，谢谢你大人」
						ELSEIF 陷落状态() == 3
							PRINTFORML 「谢谢你，就拜托你了哦」
						ELSEIF 陷落状态() == 2
							PRINTFORML 「哼，这种程度，应该能立刻办好吧」
						ELSE
							PRINTFORML 「拜托了」
						ENDIF
					;[366]で依頼内容を依頼人に确认した时
					CASE "依頼確認時"
						IF 陷落状态() >= 4
							PRINTFORML 「想让我找的是%BOOK_NAME%，大人可别忘了哦」
						ELSEIF 陷落状态() == 3
							PRINTFORML 「请帮我找%BOOK_NAME%。要是拿来别的书，我可就为难了。」
						ELSEIF 陷落状态() == 2
							PRINTFORML 「我不是说了是%BOOK_NAME%吗？你的耳朵是摆设吗？」
						ELSE
							PRINTFORML 「请帮我找到%BOOK_NAME%。拜托了。」
						ENDIF
					;受託した依頼を破棄する時
					CASE "依頼破棄時"
						IF 陷落状态() >= 4
							PRINTFORML 「……原来大人也有做不到的事情啊。」
							PRINTFORML 「『只是心血来潮』？我还挺期待的呢。」
							PRINTFORML 「明明，还挺期待的。」
						ELSEIF 陷落状态() == 3
							PRINTFORML 「『没找到』？是不是搞错了，其实是没去找吧？」
							PRINTFORML 「不过嘛，也没办法了。……要不要让阿燐跑一趟呢？」
						ELSEIF 陷落状态() == 2
							PRINTFORML 「『没干劲』？那不过是找不到的无能之辈的借口吧。」
							PRINTFORML 「算了，我竟然会拜托%CALLNAME:MASTER%这种无能之辈，真是个笨蛋。」
						ELSE
							PRINTFORML 「『这次就放弃吧』？……嘛，也没办法了呢。」
						ENDIF
					;[367]で依頼を実行する時、実行処理の前に呼び出される
					CASE "依頼実行直前"
						IF 陷落状态() >= 4
							PRINTFORML 「『都到这里了，自己去借更快』？话是这么说没错啦。」
							PRINTFORML 「但还是让大人来做比较开心嘛。」
							PRINTFORML 「而且，对大人来说也有好处吧？」
						ELSEIF 陷落状态() == 3
							PRINTFORML 「『为什么不自己去借』？那正是，心血来潮，哦。」
							PRINTFORML 「%CALLNAME:MASTER%的行动看着很有趣嘛。」
						ELSEIF 陷落状态() == 2
							PRINTFORML 「『都到这里了自己去办』？你这家伙明明是自己把人拉出来的！」
							PRINTFORML 「唔！真是的，要是做不到的话就别一开始就答应啊。」
							PRINTFORML 「『你也会说这家伙』？……那个就，失礼了。」
						ELSE
							PRINTFORML 「特意把我拉到这里来，%CALLNAME:MASTER%真是别扭呢。不过，借书是%CALLNAME:MASTER%的工作哦。」
						ENDIF
					;[367]で依頼を実行する時、実行処理の後に呼び出される
					CASE "依頼実行直後"
						IF 陷落状态() >= 4
							PRINTFORML 「谢谢你，大人。多亏了你，我能读%BOOK_NAME%了。」
							PRINTFORML 「……不过，其实没必要特意把我拉到这里来吧。」
							PRINTFORML 「『只是心血来潮』？真是的，大人这个人啊。」
						ELSEIF 陷落状态() == 3
							PRINTFORML 「谢谢你。话说，因为我讨厌出门，所以才拜托%CALLNAME:MASTER%的。」
							PRINTFORML 「『偶尔也无妨吧』？偶尔，是吧。不过，能读到%BOOK_NAME%还是很开心的。」
						ELSEIF 陷落状态() == 2
							PRINTFORML 「真是的……，我拜托的是借回来，而不是在我面前借啊。」
							PRINTFORML 「『偶尔也运动一下』？我又不是人类，既不会瘦也不会胖。」
						ELSE
							PRINTFORML 「虽然很感谢你帮我拿到了%BOOK_NAME%，但下次请你自己行动哦。」
						ENDIF
						BOOK_NAME = 
					;報告時（成功）
					CASE "成功報告時"
						IF BOOK_NAME == ""
							IF 陷落状态() == 2
								PRINTFORML 「拜托%CALLNAME:MASTER%真是浪费时间和金钱呢。」
							ELSE
								PRINTFORML 「谢谢你。」
							ENDIF
						ELSEIF 陷落状态() >= 4
							PRINTFORML 「大人，谢谢你特意帮我拿来了。」
							PRINTFORML 「%BOOK_NAME%，原来真的有放着的地方啊。」
							PRINTFORML 「这样一来，那个就能顺利进行了呢……『那个是什么』？没没没，没什么啦。」
						ELSEIF 陷落状态() == 3
							PRINTFORML 「谢谢你。……%BOOK_NAME%竟然真的能拿到。」
							PRINTFORML 「『让我找了不知道有没有的东西吗』？不，不，我本来就知道它有。」
						ELSEIF 陷落状态() == 2
							PRINTFORML 「真慢。%CALLNAME:MASTER%的能力是摆设吗？」
							PRINTFORML 「『不是帮你借来了吗』？既然答应了，完成工作是理所当然的吧。」
						ELSE
							PRINTFORML 「谢谢你，多亏了你。」
						ENDIF
						BOOK_NAME = 
					;報告時（失敗）
					;この他、報告忘れや期限切れで失敗扱いになり後日依頼人に遭遇した際にも表示
					CASE "失敗報告時"
						IF 陷落状态() >= 4
							PRINTFORML 「……大人？我的请求是那种即使忘了也无所谓的小事吗？」
							PRINTFORML 「『才没有那种事』？可你实际上并没有帮我拿来不是吗？」
							PRINTFORML 「哈……，大人真是个笨蛋。」
						ELSEIF 陷落状态() == 3
							PRINTFORML 「……至少，请你遵守约定好吗？」
							PRINTFORML 「『偶尔也会有忘记的时候』？……哈，算了。」
						ELSEIF 陷落状态() == 2
							PRINTFORML 「果然是个没用的家伙呢。连工作都做不好，你到底是怎么活下来的？」
							PRINTFORML 「『要不要被我时奸啊』？请便吧，不过只是为了泄愤而性交，也太蠢了吧。」
						ELSE
							PRINTFORML 「如果做不到的话，就请一开始就不要答应。」
						ENDIF
						BOOK_NAME = 
				ENDSELECT
			CASE "返還借書（人間之里）","返還借書（紅魔館）"
				SELECTCASE SCENE
					;依頼を持ちかけられる时
					CASE "依頼提示時"
						IF 陷落状态() >= 4
							IF 陷落状态() == 5
							ELSE
							ENDIF
						ELSEIF 陷落状态() == 3
						ELSEIF 陷落状态() == 2
						ELSEIF 陷落状态() == 1
						ELSE
						ENDIF
					;内容だけ见て受託しなかった时
					CASE "依頼非受託時"
						IF 陷落状态() >= 4
							IF 陷落状态() == 5
							ELSE
							ENDIF
						ELSEIF 陷落状态() == 3
						ELSEIF 陷落状态() == 2
						ELSEIF 陷落状态() == 1
						ELSE
						ENDIF
					;依頼を受託した时
					CASE "依頼受託時"
						IF 陷落状态() >= 4
							IF 陷落状态() == 5
							ELSE
							ENDIF
						ELSEIF 陷落状态() == 3
						ELSEIF 陷落状态() == 2
						ELSEIF 陷落状态() == 1
						ELSE
						ENDIF
					;[366]で依頼内容を依頼人に确认した时
					CASE "依頼確認時"
						IF 陷落状态() >= 4
							IF 陷落状态() == 5
							ELSE
							ENDIF
						ELSEIF 陷落状态() == 3
						ELSEIF 陷落状态() == 2
						ELSEIF 陷落状态() == 1
						ELSE
						ENDIF
					;受託した依頼を破棄する时
					CASE "依頼破棄時"
						IF 陷落状态() >= 4
							IF 陷落状态() == 5
							ELSE
							ENDIF
						ELSEIF 陷落状态() == 3
						ELSEIF 陷落状态() == 2
						ELSEIF 陷落状态() == 1
						ELSE
						ENDIF
					;[367]で依頼を実行する时、実行处理の前に呼び出される
					CASE "依頼実行直前"
						IF 陷落状态() >= 4
							IF 陷落状态() == 5
							ELSE
							ENDIF
						ELSEIF 陷落状态() == 3
						ELSEIF 陷落状态() == 2
						ELSEIF 陷落状态() == 1
						ELSE
						ENDIF
					;[367]で依頼を実行する时、実行处理の后に呼び出される
					CASE "依頼実行直後"
						IF 陷落状态() >= 4
							IF 陷落状态() == 5
							ELSE
							ENDIF
						ELSEIF 陷落状态() == 3
						ELSEIF 陷落状态() == 2
						ELSEIF 陷落状态() == 1
						ELSE
						ENDIF
					;报告时（成功）
					CASE "成功報告時"
						IF 陷落状态() >= 4
							IF 陷落状态() == 5
							ELSE
							ENDIF
						ELSEIF 陷落状态() == 3
						ELSEIF 陷落状态() == 2
						ELSEIF 陷落状态() == 1
						ELSE
						ENDIF
					;报告时（失败）
					;この他、报告忘れや期限切れで失败扱いになり后日依頼人に遭遇した际にも表示
					CASE "失敗報告時"
						IF 陷落状态() >= 4
							IF 陷落状态() == 5
							ELSE
							ENDIF
						ELSEIF 陷落状态() == 3
						ELSEIF 陷落状态() == 2
						ELSEIF 陷落状态() == 1
						ELSE
						ENDIF
				ENDSELECT
		ENDSELECT
	CASE "TARGET"
		;ここで表示されるSCENEは"依頼実行直前", "依頼実行直後"だけです
		;一般依頼
		IF IS_COMMON_IRAI(IRAI_ID)
			SELECTCASE STR_DATA_IRAI(IRAI_ID, "依頼名", CLIENT_ID)
				;个々の依頼名で分岐してください
				CASE "一般依頼名"
				;人物が键になっていた・もしくは场所にたまたま居合わせた
					SELECTCASE SCENE
						;TARGETが呼ばれるのはこのタイミングだけ
						CASE "依頼実行直前"
						CASE "依頼実行直後"
					ENDSELECT
			ENDSELECT
			RETURN
		ENDIF
		SELECTCASE CSVCALLNAME(CLIENT_ID)
			;依頼者のCALLNAMEによる分岐（CSV准据）
			CASE "依頼者"
				SELECTCASE STR_DATA_IRAI(IRAI_ID, "依頼名", CLIENT_ID)
					CASE "固有依頼名"
						SELECTCASE SCENE
						CASE "依頼実行直前"
						CASE "依頼実行直後"
						ENDSELECT
				ENDSELECT
		ENDSELECT
	CASE "NO_REPORT"
		;日数经过时、报告不要依頼を达成していた场合に呼ばれる口上
		;ここで表示されるSCENEは"依頼报告不要"だけです
		;SCENEが一つしか无いので分岐は不要
		;また、必ず依頼主の口上が呼ばれます
		;一般依頼
		IF IS_COMMON_IRAI(IRAI_ID)
			SELECTCASE STR_DATA_IRAI(IRAI_ID, "依頼名", CLIENT_ID)
				;个々の依頼名で分岐してください
				CASE "一般依頼名"
				CASE "給花澆水"
				CASE "誰的遗失物"
			ENDSELECT
			RETURN
		ENDIF
		SELECTCASE STR_DATA_IRAI(IRAI_ID, "依頼名", CLIENT_ID)
			CASE "固有依頼名"
		ENDSELECT
ENDSELECT

@BOOKSNAME_ORTHODOX_49()
#FUNCTIONS
#DIMS BOOK_NAME
#DIM LOOPCOUNT
#DIM BOOK_NAME_NO
#DIM BOOK_GENRE
SELECTCASE RAND:3
	;文系
	CASE 0
		SELECTCASE RAND:21
			CASE 0
				RETURNF "侦探小说四十年史"
			CASE 1
				RETURNF "版画赝品杀人事件"
			CASE 2
				RETURNF "幽灵塔"
			CASE 3
				RETURNF "赤红拇指纹"
			CASE 4
				RETURNF "莫切自根金生木"
			CASE 5
				RETURNF "然后谁都不在了吗？"
			CASE 6
				RETURNF "画本虫撰"
			CASE 7
				RETURNF "守贞漫稿"
			CASE 8
				RETURNF "荀子"
			CASE 9
				RETURNF "孟子"
			CASE 10
				RETURNF "资治通鉴"
			CASE 11
				RETURNF "盐铁论"
			CASE 12
				RETURNF "吾妻镜"
			CASE 13
				RETURNF "类聚国史"
			CASE 14
				RETURNF "医心方"
			CASE 15
				RETURNF "高尔吉亚"
			CASE 16
				RETURNF "被缚的普罗米修斯"
			CASE 17
				RETURNF "安提戈涅（索福克勒斯）"
			CASE 18
				RETURNF "伊曾保物语"
			CASE 19
				RETURNF "乌托邦"
			CASE 20
				RETURNF "格列佛游记"
		ENDSELECT
	;理系
	CASE 1
		SELECTCASE RAND:13
			CASE 0
				RETURNF "发微算法"
			CASE 1
				RETURNF "几何原本"
			CASE 2
				RETURNF "大术"
			CASE 3
				RETURNF "物种起源"
			CASE 4
				RETURNF "眼睛的诞生"
			CASE 5
				RETURNF "奇妙的生命"
			CASE 6
				RETURNF "大和本草"
			CASE 7
				RETURNF "本草纲目"
			CASE 8
				RETURNF "铁与病原体"
			CASE 9
				RETURNF "马史"
			CASE 10
				RETURNF "自然哲学的数学原理"
			CASE 11
				RETURNF "天体运行论"
			CASE 12
				RETURNF "方法论"
		ENDSELECT
	;おかると～んん
	CASE 2
		SELECTCASE RAND:13
			CASE 0
				RETURNF "梨俱吠陀"
			CASE 1
				RETURNF "吉尔伽美什史诗"
			CASE 2
				RETURNF "波波尔·乌"
			CASE 3
				RETURNF "斯诺里·埃达"
			CASE 4
				RETURNF "淮南子"
			CASE 5
				RETURNF "翠玉录"
			CASE 6
				RETURNF "777之书"
			CASE 7
				RETURNF "论隐秘哲学"
			CASE 8
				RETURNF "论人的尊严"
			CASE 9
				RETURNF "天使拉结尔之书"
			CASE 10
				RETURNF "所罗门之钥"
			CASE 11
				RETURNF "阿布拉梅林之书"
			CASE 12
				RETURNF "阿尔曼德尔"
		ENDSELECT
ENDSELECT
