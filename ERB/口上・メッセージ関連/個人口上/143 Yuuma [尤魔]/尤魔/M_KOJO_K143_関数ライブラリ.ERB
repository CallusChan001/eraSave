;
;### 函数 ###################################
;以下の函数は「映姬大人口上」内の「M_KOJO_K30_函数・お说教ライブラリ」を拝借したものです
;尤魔口上作者が作成したものではないのでご注意ください
;同ライブラリの利用に关しては、映姬大人口上の作者样のライセンスに准じます

;拝借ここから
;==================================================

;==================================================

;==================================================
;MASTERの恋人がその场に居るかどうか返す式中函数
;これは力技でなんとか实装できたっぽいので、使わなくても问题ない气がする（小町口上作者）
;でも绝对こっちのがスマート
;=-1 尤魔が恋人 =0 元から恋人无 =1 その场に居ない =2 恋人と同席
@K143_FIND_LOVER()
#FUNCTION
RETURNF FIND_LOVER(143)
SIF TALENT:MASTER:恋人 == 0
	RETURNF 0
SIF TALENT:恋人
	RETURNF -1
LOCAL = TALENT:MASTER:恋人
SIF CFLAG:LOCAL:現在位置 == CFLAG:MASTER:現在位置
	RETURNF 2
RETURNF 1
;==================================================


;==================================================
;同房间の角色を拾う式中函数。寻找顺位は[恋人]持ち→知り合い→TARGET内随机
;爱丽丝口上の函数お借りして平文化した映姬口上の函数を拝借しました。つまり丸パクり
;丸コピする以外の技术がないので先人たちの知惠に感谢をし继续しかない
@K143_FIND_AROUND()
#FUNCTION
#DIM 知り合い, 5 = 50, 124, 130, 132, 133
#DIM 总人数
#DIM 抽选
#LOCALSIZE 1
#LOCALSSIZE 1
RETURNF FIND_AROUND(知り合い) ;custom code

VARSET LOCAL
抽选 = 0
总人数 = GET_TARGETNUM() 
;房间に一人なら当然0
SIF 总人数 == 1
	RETURNF 0
;[恋人]持ちがいたら优先してIDを返す
SIF K143_FIND_LOVER() == 2
	RETURNF TALENT:MASTER:恋人
;知り合い优先度顺に现在位置を调べMASTERと同じならIDを返す
FOR COUNT, 0, 5
	SIF CFLAG:(知り合い:COUNT):現在位置 == CFLAG:MASTER:現在位置
		RETURNF 知り合い:COUNT
NEXT
;知り合いがいなければ同室のTARGET_ID全部を拾う
FOR COUNT,1, 总人数 + 1
	;地狱の断头台withジェロニモ状态を防ぐため台词主人公为スキップ
	SIF TARGET:COUNT == TARGET:0
		CONTINUE
	;MASTERと尤魔の现在位置にいなければスキップ
	SIF (CFLAG:(TARGET:COUNT):現在位置 != CFLAG:MASTER:現在位置) || (CFLAG:(TARGET:COUNT):現在位置 != CFLAG:42:現在位置)
		CONTINUE
	;配列のカウントは别で取りながら代入
	LOCAL:抽选 = TARGET:COUNT
	抽选 ++
NEXT

SIF 抽选 < 1
	RETURNF 0
;抽选してIDを决定
RETURNF LOCAL:(RAND(抽选))


;==================================================
;料理に对する反应（吃饭、振舞う）
;==================================================
@K143_COOKING_REACTION
	;OBJ/CLASS/キャラデータに料理嗜好
	;料理そのものに対する反応
	
	;軽食
	SELECTCASE DISHNAME
	CASE "飯団"
		PRINTDW 
	CASE "寿司卷"
		PRINTDW 
	CASE "河童卷"
		PRINTDW 
	CASE "法式吐司"
		PRINTDW 
	CASE "司康餅"
		PRINTDW 
	CASE "三明治"
		PRINTDW 
	CASE "漢堡"
		PRINTDW 
	CASE "热狗"
		PRINTDW 
	CASE "煎蛋吐司"
		PRINTDW 
	CASE "玉米片"
		PRINTDW 
	CASE "卡路里棒"
		PRINTDW 
	CASE "爆米花"
		PRINTDW 
	CASE "沙拉"
		PRINTDW 
	CASE "野菜沙拉"
		PRINTDW 
	CASE "涼拌菜"
		PRINTDW 
	CASE "漬物"
		PRINTDW 
	CASE "米粉"
		PRINTDW 
	CASE "墨西哥巻餅"
		PRINTDW 
	CASE "奶酪番茄沙拉"
		PRINTDW 
	CASE "煎蛋巻"
		PRINTDW 
	CASE "煮鸡蛋"
		PRINTDW 
	CASE "土豆炖肉"
		PRINTDW 
	CASE "茶碗蒸"
		PRINTDW 
	CASE "菜肉卷"
		PRINTDW 
	CASE "肉菜汤"
		PRINTDW 
	CASE "泡菜"
		PRINTDW 
	CASE "水煮蝗虫"
		PRINTDW 
	CASE "蜂幼虫"
		PRINTDW 
	CASE "鱼干"
		PRINTDW 
	CASE "煮毛豆"
		PRINTDW 
	CASE "唐揚鸡"
		PRINTDW 
	CASE "炸鸡"
		PRINTDW 
	CASE "法兰克福香肠"
		PRINTDW 
	CASE "竜田揚"
		PRINTDW 
	CASE "炸青蛙"
		PRINTDW 
	CASE "章魚焼"
		PRINTDW 
	CASE "炸丸子"
		PRINTDW 
	CASE "肉包"
		PRINTDW 
	CASE "餃子"
		PRINTDW 
	CASE "焼麥"
		PRINTDW 
	;魚料理
	CASE "炸鱼"
		PRINTDW 
	CASE "盐烤鱼"
		PRINTDW 
	CASE "照焼鱼"
		PRINTDW 
	CASE "煮鱼"
		PRINTDW 
	CASE "烤鳗"
		PRINTDW 
	CASE "文也鱼"
		PRINTDW 
	CASE "醋浸鱼"
		PRINTDW 
	CASE "天麩羅"
		PRINTDW 
	CASE "盐烤青蛙"
		PRINTDW 
	CASE "炒青蛙"
		PRINTDW 
	;芋料理
	CASE "烤番薯"
		PRINTDW 
	CASE "炸薯条"
		PRINTDW 
	CASE "黄油土豆"
		PRINTDW 
	CASE "炸魚＆薯條"
		PRINTDW 
	CASE "味噌汤"
		PRINTDW 
	CASE "汁粉"
		PRINTDW 
	CASE "猪肉蔬菜味噌汤"
		PRINTDW 
	CASE "玉米汤"
		PRINTDW 
	CASE "杯麺"
		PRINTDW 
	CASE "竹輪"
		PRINTDW 
	CASE "納豆"
		PRINTDW 
	CASE "豆腐"
		PRINTDW 
	CASE "梅干"
		PRINTDW 
	CASE "葛切"
		PRINTDW 
	CASE "煎餅"
		PRINTDW 
	;主食
	CASE "盛的滿滿的飯"
		PRINTDW 
	CASE "蛋澆飯"
		PRINTDW 
	CASE "茶泡饭"
		PRINTDW 
	CASE "竹筍飯"
		PRINTDW 	
	CASE "漬け物に大碗飯"
		PRINTDW 	
	CASE "红豆饭"
		PRINTDW 	
	CASE "雑燴粥"
		PRINTDW 
	CASE "猪排饭"
		PRINTDW 
	CASE "牛肉饭"
		PRINTDW 
	CASE "親子盖饭"
		PRINTDW 
	CASE "炸鱼饭"
		PRINTDW 
	CASE "海鮮饭"
		PRINTDW 
	CASE "寿司"
		PRINTDW 
	CASE "鳗鱼饭"
		PRINTDW 
	CASE "蛋包饭"
		PRINTDW 
	CASE "炒饭"
		PRINTDW 
	CASE "咖喱饭"
		PRINTDW 
	CASE "芝士焗飯"
		PRINTDW 
	CASE "咖喱鱼"
		PRINTDW 
	CASE "青蛙咖喱"
		PRINTDW 	
	CASE "壽司糖"
		PRINTDW 
	CASE "荞麦麺"
		PRINTW
	CASE "乌冬麺"
		PRINTDW 
	CASE "素麺"
		PRINTDW 
	CASE "拉麺"
		PRINTDW 
	CASE "担担麺"
		PRINTDW 
	CASE "意大利麺"
		PRINTDW 
	CASE "炒麺"
		PRINTDW 
	CASE "中華冷麵"
		PRINTDW 
	CASE "鸡肉汆锅"
		PRINTW
	CASE "寿喜烧"
		PRINTDW 
	CASE "关东煮"
		PRINTDW 
	CASE "千原锅"
		PRINTDW 
	CASE "涮涮锅"

	CASE "芝士火锅"
		PRINTDW 
	CASE "燉菜"
		PRINTDW 
	CASE "罗宋汤"
		PRINTDW 
	CASE "面包碗燉菜"
		PRINTDW 
	CASE "芝士焗菜"
		PRINTDW 
	CASE "披萨"
		PRINTDW 
	CASE "御好烧"
		PRINTDW 
	CASE "麻婆茄子"
		PRINTDW 
	CASE "油淋鶏"
		PRINTDW 
	CASE "中華溜菜"
		PRINTDW 
	CASE "炒蔬菜"
		PRINTDW 
	CASE "姜汁焼肉"

	CASE "牛扒"
		PRINTDW 
	CASE "漢堡肉"
		PRINTDW 
	CASE "儿童午餐"
		PRINTDW 
	CASE "刺身"
		PRINTDW 
	CASE "法式鹹派"
		PRINTDW 
	CASE "仰望星空派"
		PRINTDW 
	CASE "澳洲鴕鳥肉";鶏が入ってるのでトータルで减少補正。尤魔ちゃんは虫肉はイケるのだ
		PRINTDW 
	CASE "興奮劑高湯"
		PRINTDW 
	CASE "银吉獣料理"
		PRINTDW 
	
	;料理：喜欢的味道　
	;料理：讨厌的味道　
	;料理：助手効果　
	;大好き…
	;普通に好き…
	;大嫌い…
	
	;季節の料理
	CASE "年节菜"
		PRINTDW 
	CASE "七草汤"
		PRINTDW 
	CASE "江户卷"
		PRINTDW 
	CASE "跨年荞麦麺"
		PRINTDW 
	CASE "烤鸡"
	;甜点
	CASE "小蛋糕"
		PRINTDW 
	CASE "巧克力蛋糕"
		PRINTDW 
	CASE "薄烤饼"
		PRINTDW 
	CASE "派"
		PRINTDW 
	CASE "水果小馅饼"
		PRINTDW 
	CASE "馬卡龍"
		PRINTDW 
	CASE "可丽饼"
		PRINTDW 
	CASE "奶油泡芙"
		PRINTDW 
	CASE "芭菲"
		PRINTDW 
	CASE "布丁"
		PRINTDW 
	CASE "果凍"
		PRINTDW 
	CASE "青蛙布丁"
		PRINTDW 
	CASE "酸奶"
		PRINTDW 
	CASE "冰淇淋"
		PRINTDW 
	CASE "曲奇"
		PRINTDW 
	CASE "甜甜圈"
		PRINTDW 
	CASE "苹果糖"
		PRINTDW 
	CASE "餡蜜"
		PRINTDW 
	CASE "蜂蜜蛋糕"
		PRINTDW 
	CASE "団子"
		PRINTDW 
	CASE "羊羹"
		PRINTDW 
	CASE "大福"
		PRINTDW 
	CASE "豆沙蒸馒头"
		PRINTDW 
	CASE "栗金団"
		PRINTDW 
	CASE "杏仁豆腐"
		PRINTDW 
	CASE "水果拼盘"
		PRINTDW 
	CASE "珍珠奶茶"
		PRINTDW 
	CASE "草莓豆腐"
		PRINTDW 
	;季節の甜点
	CASE "赏月団子"
		PRINTDW 
	CASE "万圣节蛋糕"
		PRINTDW 
	CASE "圣诞蛋糕"
		PRINTDW 
	;禁断の料理
	CASE "油炸跳蛋"
		PRINTDW 
	CASE "电动按摩风跳蛋湯引"
		PRINTDW 
	CASE "夹子用跳蛋握手"
		PRINTDW 
	CASE "飛機杯剪裁跳蛋水煮"
		PRINTDW 
	CASE "振動棒跳蛋冰淇淋"
		PRINTDW 
	;ここから固有料理
	;極
	CASE "公主甜点"
		PRINTDW 
	;霊夢
	CASE "红白馒头"
		PRINTDW 
	;桑尼米爾克
	CASE "单面煎蛋"
		PRINTDW 
	;露娜切露德
	CASE "宁静的海之汤"
		PRINTDW 
	;斯塔薩菲雅
	CASE "京丸牡丹鍋"
		PRINTDW 
	;千百合
	CASE "水兵咖喱"
		PRINTDW 
	;夢美
	CASE "特制草莓蛋糕"
		PRINTDW 
	;萃香
	CASE "ウイスキー入り巧克力"
		PRINTDW 
	;魔理沙
	CASE "魔法炒蘑菇"
		PRINTDW 
	;露米娅
	CASE "暗之甜甜圈"
		PRINTDW 
	;琪露諾
	CASE "刨冰"
		PRINTDW 
	;咲夜
	CASE "红魔馆午餐"
		PRINTDW 
	;蕾米莉亜
	CASE "鲜红的血汤"
		PRINTDW 
	;愛麗絲
	CASE "姜饼人"
		PRINTDW 
	;莉莉白
	CASE "春天的赏花便当"
		PRINTDW 
	;莉莉黑
	CASE "春天的镇魂料理"
		PRINTDW 
	;妖夢
	CASE "蜜豆白玉"
		PRINTDW 
	;橙
	CASE "猫饭"
		PRINTDW 
	;藍
	CASE "稻荷寿司"
		PRINTDW 
	;紫
	CASE "海龟汤"
		PRINTDW 
	;莉格露
	CASE "蜂王浆"
		PRINTDW 
	;米斯蒂亜
	CASE "烤七鳃鳗"
		PRINTDW 
	;文
	CASE "ミックスナッツ"
		PRINTDW 
	;映姫
	CASE "地獄拉麺（極辣）"
		PRINTDW 
	;早苗
	CASE "释迦年糕"
		PRINTDW 
	;神奈子
	CASE "御柱棒"
		PRINTDW 
	;諏訪子
	CASE "馒饼"
		PRINTDW 
	;天子
	CASE "天界水果芭菲"
		PRINTDW 
	;衣玖
	CASE "わたパチ"
		PRINTDW 
	;阿燐
	CASE "烤腐肉"
		PRINTDW 
	;阿空
	CASE "核热烤牛排"
		PRINTDW 
	;恋
	CASE "りんごの薔薇果凍"
		PRINTDW 
	;納茲琳
	CASE "芝士蛋糕"
		PRINTDW 
	;鵺
	CASE "未確認飛行料理"
		PRINTDW 
	;里香
	CASE "灵魂蛋糕"
		PRINTDW 
	;覚
	CASE "从心底萌发的幻想"
		PRINTDW 
	;芙蘭朶露
	CASE "蔓越莓陷阱"
		PRINTDW 
	;荷取
	CASE "小黄瓜"
		PRINTDW 
	;帝
	CASE "紅白なます"
		PRINTDW 
	;鈴仙
	CASE "狂气之赤红煎鸡蛋"
		PRINTDW 
	;帕秋莉
	CASE "魔卡杯蛋糕"
		PRINTDW 
	;白蓮
	CASE "素齋"
		PRINTDW 
	;心
	CASE "蜜意人形烧"
		PRINTDW 
	;美鈴
	CASE "彩色小籠包"
		PRINTDW 
	;小悪魔
	CASE "恶魔饭团"
		PRINTDW 
	;帕露西
	CASE "烤年糕"
		PRINTDW 
	;妹紅
	CASE "日式鸡肉串"
		PRINTDW 
	;輝夜
	CASE "蓬莱冰棒玉枝"
		PRINTDW 
	;影狼
	CASE "野味菜"
		PRINTDW 
	;椛
	CASE "枫叶馒头"
		PRINTDW 
	;幽幽子
	CASE "桜餅"
		PRINTDW 
	;慧音
	CASE "满月乌冬面"
		PRINTDW 
	;幽香
	CASE "向日葵华夫饼"
		PRINTDW 
	;永琳
	CASE "超营养饮料"
		PRINTDW 
	;蛮奇
	CASE "飞头馒头"
		PRINTDW 
	;蕾蒂
	CASE "雪人冰淇淋"
		PRINTDW 
	;梅蒂欣
	CASE "鈴蘭団子"
		PRINTDW 
	;小町
	CASE "人之魂"
		PRINTDW 
	;静葉
	CASE "红叶天妇罗"
		PRINTDW 
	;穣子
	CASE "日式烤红薯"
		PRINTDW 
	;雛
	CASE "雏霰"
		PRINTDW 
	;阿求
	CASE "求聞雑燴粥"
		PRINTDW 
	;蓮子
	CASE "营养效率辅助食品"
		PRINTDW 
	;一輪
	CASE "入道棉花糖"
		PRINTDW 
	;村紗
	CASE "深海料理"
		PRINTDW 
	;星
	CASE "餓虎牛排"
		PRINTDW 
	;若鷺姫
	CASE "人鱼芭菲"
		PRINTDW 
	;弁弁
	CASE "枇杷果冻"
		PRINTDW 
	;八橋
	CASE "京八桥"
		PRINTDW 
	;正邪
	CASE "逆汉堡"
		PRINTDW 
	;雪
	CASE "火鍋・Esoteria"
		PRINTDW 
	;​​舞​
	CASE "維納・咖啡"
		PRINTDW 
	;清蘭
	CASE "草莓汤圆"
		PRINTDW 
	;鈴瑚
	CASE "鈴瑚印の団子"
		PRINTDW 
	;哆来咪
	CASE "謎の夢魂菓子"
		PRINTDW 
	;克勞恩皮絲
	CASE "阿比斯汉堡"
		PRINTDW 
	;純狐
	CASE "月餅"
		PRINTDW 
	;赫卡提亚
	CASE "三色地狱肉松盖饭"
		PRINTDW 
	;愛塔妮緹拉尔瓦
	CASE "花蜜果冻"
		PRINTDW 
	;合歡乃
	CASE "山の郷土料理"
		PRINTDW 
	;阿吽
	CASE "犬饭"
		PRINTDW 
	;成美
	CASE "地藏年糕"
		PRINTDW 
	;舞
	CASE "七夕奶油汤面"
		PRINTDW 
	;里乃
	CASE "醋腌忘情茗荷"
		PRINTDW 
	;隠岐奈
	CASE "秘神火腿"
		PRINTDW 
	;女苑
	CASE "意飯"
		PRINTDW 
	;紫苑
	CASE "炒豆芽"
		PRINTDW 
	;瓔花
	CASE "巴别塔薄饼"
		PRINTDW 
	;潤美
	CASE "活花枝生魚片"
		PRINTDW 
	;久侘歌
	CASE "雏鸟馒头"
		PRINTDW 
	;八千慧
	CASE "魚翅湯"
		PRINTDW 
	;磨弓
	CASE "哈尼肉包子"
		PRINTDW 
	;袿姫
	CASE "偶像制作的工艺点心"
		PRINTDW 
	;早鬼
	CASE "鬼形圆松饼"
		PRINTDW 
	;美宵
	CASE "鲵吞亭秘传炖菜"
		PRINTDW 
	;高岭
	CASE "绿色沙拉"
		PRINTDW 
	;魅須丸
	CASE "勾玉曲奇"
		PRINTDW 
	;典
	CASE "狐狸米饭"
		PRINTDW 
	;千亦
	CASE "彩虹小馅饼"
		PRINTDW 
	;百百世
	CASE "龙脊牛排"
		PRINTDW 
	;尤魔
	CASE "刚欲兽神的晚餐"
		PRINTDW 
	ENDSELECT
	
	;味付けに対する反応
	SELECTCASE TCVAR:MASTER:308
	;濃い
	CASE 0

	;薄味
	CASE 1
		PRINTDW 
	;超辣
	CASE 3
		PRINTDW 
	;超甜
	CASE 4
		PRINTDW 
	;芥末
	CASE 5
		PRINTDW 
	;激酸っぱ
	CASE 6
		PRINTDW 
	ENDSELECT
	
	;最终的な味の评价
	PRINTDL 
	PRINTFORMDL 那么、尤魔的评估是…
	PRINTDL 
	SELECTCASE TCVAR:[[尤魔]]:料理評価値
	;高评价
	CASE IS >= 700
	CASE IS >= 400
	CASEELSE
	ENDSELECT
RETURN 1

