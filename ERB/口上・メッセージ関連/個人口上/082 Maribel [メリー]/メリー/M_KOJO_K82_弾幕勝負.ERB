;==================================================
;弾幕勝負 custom code, added
;==================================================
;
@M_KOJO_MESSAGE_COM_K82_DANMAKU(ARGS, 相手残機,ARG:1)
#DIM 相手残機
;全体の流れ
;①【戦闘前】→②ダイスロールとプレイヤー選択肢、ハンデをつけた場合は【ハンデ口上】→③対応スキルが発動した場合【スキル口上】→④被弾判定、キャラが被弾したなら【被弾口上】→
;どちらかの残機が0になっていなければ②に戻る→⑤【戦闘後口上】

;--------------------------------------------------
;記入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL
SIF FLAG:口上色
	TRYCALLFORM M_KOJO_COLOR_K{NO:TARGET}
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;ハンデをつけることができ、数値が大きいほどあなたが不利になる　数値が負ならあなたが有利に
	;キャラの能力に関わらずクッソ強くしたり弱くしたりできる
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARGS == "戦闘前"
		;戦闘前
		HANDICAP_FIXED = 0
		HANDICAP_RAND = 0
		IF FIRSTTIME("MerryDanmakuDuel")
			PRINTFORML 「弹幕游戏？ 那是你们的玩法吗？」
			PRINTFORMDW %CALLNAME:MASTER%教导了梅莉弹幕游戏的基本规则和知识。
			PRINTFORML 「可是我玩不了弹幕游戏啊？ 被攻击的时候该怎么办呢？」
			PRINTFORMDW 梅莉确实只是普通人类，不能让她去战斗，但独自一人也确实令人不安。
			PRINTFORMDW 梅莉突然像想到了什么好主意一样，啪地拍了下手，
		ENDIF
		PRINTFORMW 「那我就来当靶子，你来负责进攻，怎么样？」
		PRINTFORMDW 虽然说不能做那么危险的事，但梅莉坚决不让步，结果就定下了这样的角色分工。
		RETURN 1
	ENDIF
	
	;-------------------------------------------------
	;ハンデ
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARGS == "ハンデ"
		;ハンデつけなかったら表示されないので無記入でよい
		PRINTFORMDL 
		RETURN 0
	ENDIF
	;-------------------------------------------------
	;戦闘中TARGET被弾時口上
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARGS == "被弾" 
		;別に一律で「やられたー」だけでもいいよ
		SELECTCASE 相手残機
			;残り残機3が表示されるのは【洽覧深識】持ちのみ
			CASE 3
				PRINTFORMDL 
			CASE 2
				SELECTCASE RAND:3
					CASE 0
						PRINTFORMW 「你好像也相当习惯战斗了呢」
					CASE 1
						PRINTFORMW 「这种情况下通常会往这边动，但果然还是被看穿了吗？」
					CASE 2
						PRINTFORML 「我已经很习惯逃跑了」
						PRINTFORMW 「要不要试试比试一下？」
				ENDSELECT
			CASE 1
				SELECTCASE RAND:3
					CASE 0
						PRINTFORMW 「这会是个很好的减肥方法，但问题是如果被打到会很痛呢」
					CASE 1
						PRINTFORMW 「光是逃跑就很辛苦了……」
					CASE 2
						PRINTFORMW 「哈啊……真是不容易啊……」
				ENDSELECT
			CASE 0
		ENDSELECT
	ENDIF
	
	IF ARGS == "Pichun"
		;RESULT:8 for player's lives
		PRINTFORMW 「已经累趴下了吗？ 喂喂，加油啊！」
	ENDIF
	
	PRINTFORML
	SELECTCASE RAND:3
		CASE 0
			PRINTFORMW 「首先从柔软体操开始吧」
		CASE 1
			PRINTFORML 「弹幕游戏总觉得像体育运动呢」
			PRINTFORMW 「不知道我能不能也用上」
		CASE 2
			PRINTFORMW 「这边？ 但是往这边动的话……」
	ENDSELECT
	
	;-------------------------------------------------
	;戦闘中
	;TARGETの【残忍酷薄】発動時
	;ARGはTARGETの残機
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARGS == "残忍酷薄"

	ENDIF
	;-------------------------------------------------
	;戦闘中
	;TARGETの【乾坤一擲】発動時
	;ARGはTARGETの残機
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARGS == "乾坤一擲"
		
	ENDIF
	;-------------------------------------------------
	;戦闘中
	;TARGETの【怪力乱神】発動時
	;ARGはTARGETの残機
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARGS == "怪力乱神"
		
	ENDIF
	
	;-------------------------------------------------
	;戦闘後
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARGS == "戦闘後" 
		PRINTFORMDL 
		;残り残機4が表示されうるのは【洽覧深識】持ちのみ
		;残機が1以上ならあなたの負け、0の場合はあなたの勝利
		SELECTCASE 相手残機
			CASE 4
				PRINTFORMDL 
			CASE 1 TO 3
				SELECTCASE RAND:3
					CASE 0
						PRINTFORMW 「体力也增强了，我也派上用场了吧？」
					CASE 1
						PRINTFORML 「偶尔也想以实战为前提，练习一下配合呢」
						PRINTFORMW 「下次找人帮忙吧」
					CASE 2
						PRINTFORML 「动作如果不有快有慢，马上就会被看穿的」
						PRINTFORMW 「必须更努力才行呢」
				ENDSELECT
			CASE 0

		ENDSELECT
	ENDIF
RESETCOLOR
ENDIF
RETURN 1

