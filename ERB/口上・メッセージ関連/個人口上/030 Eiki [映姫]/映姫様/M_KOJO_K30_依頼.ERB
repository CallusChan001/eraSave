;==================================================
;一般依頼の抑制
;==================================================
;ARGは依頼番号
;この関数が1を返すと、その依頼はこのキャラクターには発生しない
;依頼の発生を抑制したい場合は、該当するARGを受け取った際に「RETURN 1」とすること
;ARG = 1,  掃除を手伝って（発生条件：TARGETがメインマップ在住）
;ARG = 2,  お花に水をあげて（発生条件：TARGETがMASTER侵入可能の自宅住まいかつ、メインマップ在住かつ、親密２以上）
;ARG = 3,  いっしょにあそぼ（発生条件：TARGETがTALENT:幼稚持ち）
;ARG = 4,  料理上手になりたい（発生条件：TARGETの料理技能がMASTER未満かつ、MASTERの料理技能が２以上かつ、親密が３以上）
;ARG = 5,  特訓につきあって（発生条件：TARGETの戦闘能力がMASTER以下かつ、親密が２以上かつ人里以外）
;ARG = 6,  誰か教えて！（発生条件：TARGETの教養がMASTER以下）
;ARG = 7,  大掃除が終わらない（発生条件：TARGETがメインマップ在住かつ、冬の15日から31日までかつ、親密が３以上）
;ARG = 8,  手紙を届けて（発生条件：TARGETの信頼度が30以上かつ、TARGETに文通相手が設定されている（FUNC_IRAI.ERBの965目以降に存在）
;ARG = 9,  誰かの落とし物（発生条件：TARGETの信頼度が30以上）
;ARG = 10, どうしてもみつからない(そのまま落ちてる)（発生条件：TARGETの信頼度が30以上）
;ARG = 11, どうしてもみつからない(誰かが拾ってる)（発生条件：TARGETの信頼度が30以上）
;ARG = 12, 懲らしめて！（発生条件：TARGETのCSVに戦闘能力が１以上ある場合）
;ARG = 13, うまい魚が食べたいなぁ（発生条件：わかさぎ姫以外）
;ARG = 14, 薪を切らしてる（未実装）
;ARG = 15, あなたに抱かれたい（発生条件：セフレor愛欲かつ溜まってる度700以上 or ヤリマン）
;ARG = 16, お悩み相談（発生条件：MASTERの話術技能が1以上）
@M_KOJO_CHECK_K30_IRAI_BLOCKED(ARGS, ARG, ARG:1)
;「あれ、なんだっけ」は映姫様には合わないので抑制
SIF ARG == 17
	RETURN 1
RETURN 0

;==================================================
;依頼口上・各依頼で共通の口上
;==================================================
@M_KOJO_IRAI_K30(ROLE, SCENE, IRAI_ID)
#DIMS ROLE     ;角色の立場、依頼者かそうでないか
#DIMS SCENE    ;セリフの表示されるタイミング
#DIM  IRAI_ID  ;依頼自体のID
#DIM  CLIENT_ID;依頼者IDだけ抜き出したもの
#DIM  CHK_ID   ;依頼IDだけ抜き出したもの
#DIMS IRAI_NAME;依頼名
CHK_ID    = IRAI_ID % 1000
CLIENT_ID = IRAI_ID_TO_CLIENT(IRAI_ID)
IRAI_NAME = %STR_DATA_IRAI(IRAI_ID, "依頼名", CLIENT_ID)%
RESULT = 0
IF CHK_ID > 100
	TRYCALLFORM M_KOJO_IRAI_%IRAI_NAME%_K30(ROLE, SCENE, CLIENT_ID)
ELSE
	TRYCALLFORM M_KOJO_IRAI_{CHK_ID}_K30(ROLE, SCENE, CLIENT_ID)
ENDIF
SIF RESULT
	RETURN 1
;--------------------------------------------------
;ここにあるのは各依頼で共通の口上です
;依頼ごとの口上を表示した場合は共通の口上は表示されません
;【】で囲ってあるのは口上前後の地の文や発生する処理です
;WAITをするか等の目安にしてください（L,WはそれぞれPRINTFORML,PRINTFORMWの略）
;--------------------------------------------------
SELECTCASE SCENE
CASE "依頼提示時"
;●依頼を持ちかけられる時
;【W どうやら［彼女］は［あなた］に頼み事があるようだ】
;【◆口上】
;【依頼データ表示】
;【INPUT（受託するかY/N）】
	
CASE "依頼非受託時"
;●内容だけ見て受託しなかった時
;【L ［あなた］は丁重にお断りした】
PRINTFORML 「…是吗。我不能强求呢」
;【W ［彼女］は残念そうな顔をしている】
	
CASE "依頼受託時"
;●依頼を受託した時
;【W ［あなた］は［彼女］の依頼を受けた】
PRINTFORMW 「谢谢您。拜托了」
CASE "依頼確認時"
;●[366]で依頼内容を依頼人に確認した時
PRINTFORML 「怎么了？再说一遍？打起精神来啊」
;【依頼データ表示】
;【INPUT（破棄するかY/N）】
	
CASE "依頼破棄時"
;●受託した依頼を破棄する時
PRINTFORML 「…是吗。没办法呢」
;【W 依頼を破棄しました。】
	
CASE "依頼実行直前"
;●[367]で依頼を実行する時、実行処理の前に呼び出される
;※依頼によって状況が大きく異なるので共通口上は非推奨
;【◆口上】
;【実行時の地の文・ソース等】
;【▼下の口上に続く】
	IF ROLE == "CLIENT"
	;（共通）CLIENT：依頼実行の対象と依頼主（口上主）が同一の場合（主に特訓系ですが一緒に捜索等をした場合も含まれます）
		
	ELSEIF ROLE == "TARGET"
	;（共通）TARGET：口上主が依頼実行の対象である場合（主に配達系ですが捜索等をした際、TARGETにしていた場合も含まれます）
		
	ENDIF
CASE "依頼実行直後"
;●[367]で依頼を実行する時、実行処理の後に呼び出される
;※依頼によって状況が大きく異なるので共通口上は非推奨
;【▲上の口上から続き】
;【◆口上】
;【達成時・CLIENT：▼下の口上に続く】
;【達成時・TARGET：忘れずに［依頼主］に報告しよう】
	IF ROLE == "CLIENT"
	;（共通）CLIENT：依頼実行の対象と依頼主（口上主）が同一の場合（主に特訓系ですが一緒に捜索等をした場合も含まれます）
		SELECTCASE CFLAG:CLIENT_ID:依頼状況
		CASE 2
		;実行後未解決
			
		CASE 3
		;実行後達成
			
		CASE 6
		;実行後失敗（現在「06_誰来告訴我！」のみ）
			
		ENDSELECT
	ELSEIF ROLE == "TARGET"
	;（共通）TARGET：口上主が依頼実行の対象である場合（主に配達系ですが捜索等をした際、TARGETにしていた場合も含まれます）
		SELECTCASE CFLAG:CLIENT_ID:依頼状況
		CASE 2
		;実行後未解決
			
		CASE 3
		;実行後達成
			
		CASE 6
		;実行後失敗（現在「06_誰来告訴我！」のみ）
			
		ENDSELECT
	ENDIF
CASE "成功報告時"
;●報告時（成功）
;【依頼実行と報告が同時の時：▲上の口上から続き】
	IF CFLAG:30:初期位置 == CFLAG:MASTER:初期位置 || TALENT:恋人
		PRINTFORML 「谢谢您」
		PRINTFORML 「也有好好准备奖励哦」
	ELSE
		PRINTFORML 「谢谢。这是约定的报酬」
	ENDIF
;【ソースの入手・道具等の報酬獲得】
	
CASE "失敗報告時"
;○直接失敗報告は現在「06_誰か教えて！」のみ
;●報告忘れ・期限切れになった際、遭遇時の最後に呼び出される
;（遭遇時）【挨拶等】→【機嫌の良し悪し】→【劣情察知】→【祭日イベント】→【◆ココ！】（尚、依頼失敗判定があるとデートのお誘いは発生しません）
PRINTFORML 「%K30_C_NAME(MASTER)%…都和阎魔约定好了，居然说“忘了”什么的，有点难以置信呢」
PRINTFORMW 「…过去的事就算了，以后请多加注意」
TALENT:30:心情 = MIN(TALENT:30:心情, 0)
;○心情の変化や追加のペナルティ等は口上側で処理してください
	
CASE "依頼報告不要"
;○一般依頼では現在「02_給花澆水」「09_誰的遗失物」のみ
;●起床時、報告不要依頼を達成していた場合に呼ばれる口上
;（起床時）【起床メッセージ】→【X時間寝た等】→【◆ココ！】→【神簽・補充等】→【一日開始】
;○地の文はありません
;○口上主がその場にいなくても表示されます（MASTERが寝る時のイベント口上と同じタイプ）
	
ENDSELECT
RETURN 1

;==================================================
;依頼口上・一般依頼01：幫忙做掃除
;==================================================
@M_KOJO_IRAI_1_K30(ROLE, SCENE, CLIENT_ID)
#DIMS ROLE     ;角色の立場、依頼者かそうでないか
#DIMS SCENE    ;セリフの表示されるタイミング
#DIM  CLIENT_ID;依頼者IDだけ抜き出したもの
;--------------------------------------------------
;RETURN 0 の部分は共通の口上が表示されます
;依頼ごとの口上を表示する部分は RETURN 0 を RETURN 1 にしてください
;--------------------------------------------------
SELECTCASE SCENE
CASE "依頼提示時"
	IF CFLAG:30:初期位置 == CFLAG:MASTER:初期位置
		PRINTFORML 「喂，差不多该收拾一下房间了吧？」
	ELSEIF TALENT:30:恋慕
		PRINTFORML 「工作堆积如山，顾不上做……」
		PRINTFORML 「可以拜托你吗？」
	ELSE
		PRINTFORML 「%K30_C_NAME(MASTER)%、你现在有空吧？」
	ENDIF
	RETURN 1
CASE "依頼非受託時"
	
	RETURN 0
CASE "依頼受託時"
	IF CFLAG:30:初期位置 == CFLAG:MASTER:初期位置
		PRINTFORMW 「我们快点收拾好吧」
	ELSEIF TALENT:30:恋慕
		PRINTFORMW 「真是对不起。拜托了」
	ELSE
		PRINTFORMW 「非常抱歉。拜托您了」
	ENDIF
	RETURN 1
CASE "依頼確認時"
	
	RETURN 0
CASE "依頼破棄時"
	
	RETURN 0
CASE "依頼実行直前"
;○この依頼は依頼主がTARGETです
	IF YOGORE:(GET_CHARAHOME(TARGET)) < 1000
	;先に掃除してしまっていた場合
	PRINTFORML 「咦……什么时候？」
	;【W ［彼女］の部屋は十分にきれいだ】
	;【▼そのまま下の口上へ】
		
		RETURN 1
	ELSE
	;一緒に掃除する場合
	PRINTFORML 「两个人一起做的话，很快就能完成了呢」
	;【W ［あなた］は［彼女］と協力して部屋の掃除を行なった】
	;【▼そのまま下の口上へ】
		
		RETURN 1
	ENDIF
CASE "依頼実行直後"
;○この依頼は必ず実行後達成します
;【▲上の口上から続き】
	IF CFLAG:30:初期位置 == CFLAG:MASTER:初期位置 || TALENT:恋人
		PRINTFORML 「果然平时就得注意才行呢」
	ELSE
		PRINTFORML 「谢谢您。房间变得干净了」
	ENDIF
;【▼そのまま下の口上へ】
	
	RETURN 1
CASE "成功報告時"
;報酬：低級素材
;【▲上の口上から続き】
;【報酬獲得】
	
	RETURN 0
CASE "失敗報告時"
	
	RETURN 0
;CASE "依頼報告不要"
;＜この依頼にはありません＞
;	RETURN 0
ENDSELECT

;==================================================
;依頼口上・一般依頼02：給花澆水
;==================================================
@M_KOJO_IRAI_2_K30(ROLE, SCENE, CLIENT_ID)
#DIMS ROLE     ;角色の立場、依頼者かそうでないか
#DIMS SCENE    ;セリフの表示されるタイミング
#DIM  CLIENT_ID;依頼者IDだけ抜き出したもの
;--------------------------------------------------
;RETURN 0 の部分は共通の口上が表示されます
;依頼ごとの口上を表示する部分は RETURN 0 を RETURN 1 にしてください
;--------------------------------------------------
SELECTCASE SCENE
CASE "依頼提示時"
	IF CFLAG:30:初期位置 == CFLAG:MASTER:初期位置
		PRINTFORML 「你和我今天早上都彻底忘了吧……」
	ELSEIF TALENT:30:恋慕
		PRINTFORML 「我这边有点忙不开……可以拜托你吗？」
	ELSE
		PRINTFORML 「%K30_C_NAME(MASTER)%、你现在有空吧？」
	ENDIF
	RETURN 1
CASE "依頼非受託時"
	
	RETURN 0
CASE "依頼受託時"
	IF CFLAG:30:初期位置 == CFLAG:MASTER:初期位置 || TALENT:恋人
		PRINTFORMW 「那就拜托了」
	ELSE
		PRINTFORMW 「谢谢」
	ENDIF
	RETURN 1
CASE "依頼確認時"
	
	RETURN 0
CASE "依頼破棄時"
	
	RETURN 0
CASE "依頼実行直前"
;【◆口上】
;【W ［你］は［依頼主］的家の鉢植えや植木に水をあげた】
;【▼そのまま下の口上へ】
	IF ROLE == "CLIENT"
	;澆水した時、依頼主である口上主がTARGETの場合
		
		RETURN 0
	ELSEIF ROLE == "TARGET"
	;澆水した時、依頼主ではない口上主がTARGETの場合
		
		RETURN 0
	ENDIF
CASE "依頼実行直後"
;○この依頼は必ず実行後達成します
;【▲上の口上から続き】
;【◆口上】
	IF ROLE == "CLIENT"
	;澆水した時、依頼主である口上主がTARGETの場合
	;この場合はそのまま下の口上へ続きます
		
		RETURN 0
	ELSEIF ROLE == "TARGET"
	;澆水した時、依頼主ではない口上主がTARGETの場合
		
		RETURN 0
	ENDIF
CASE "成功報告時"
;報酬：\500
	
	RETURN 0
CASE "失敗報告時"
	
	RETURN 0
CASE "依頼報告不要"
	
	RETURN 0
ENDSELECT

;==================================================
;依頼口上・一般依頼03：一起玩吧
;※この依頼は[幼稚]を持っている角色のみ発生します
;==================================================
@M_KOJO_IRAI_3_K30(ROLE, SCENE, CLIENT_ID)
#DIMS ROLE     ;角色の立場、依頼者かそうでないか
#DIMS SCENE    ;セリフの表示されるタイミング
#DIM  CLIENT_ID;依頼者IDだけ抜き出したもの
;--------------------------------------------------
;RETURN 0 の部分は共通の口上が表示されます
;依頼ごとの口上を表示する部分は RETURN 0 を RETURN 1 にしてください
;--------------------------------------------------
SELECTCASE SCENE
CASE "依頼提示時"
	
	RETURN 0
CASE "依頼非受託時"
	
	RETURN 0
CASE "依頼受託時"
	
	RETURN 0
CASE "依頼確認時"
	
	RETURN 0
CASE "依頼破棄時"
	
	RETURN 0
CASE "依頼実行直前"
;○この依頼は依頼主がTARGETです
;【◆口上】
;【W ［你］は［彼女］と遊んだ】
;【▼そのまま下の口上へ】
	
	RETURN 0
CASE "依頼実行直後"
;○この依頼は必ず実行後達成します
;【▲上の口上から続き】
;【◆口上】
;【▼そのまま下の口上へ】
	
	RETURN 0
CASE "成功報告時"
;報酬：好感度と信賴度のみ（心情が良くなる）
;【▲上の口上から続き】
;【◆口上】
	
	RETURN 0
CASE "失敗報告時"
	
	RETURN 0
;CASE "依頼報告不要"
;＜この依頼にはありません＞
;	RETURN 0
ENDSELECT

;==================================================
;依頼口上・一般依頼04：想要学習料理
;==================================================
@M_KOJO_IRAI_4_K30(ROLE, SCENE, CLIENT_ID)
#DIMS ROLE     ;角色の立場、依頼者かそうでないか
#DIMS SCENE    ;セリフの表示されるタイミング
#DIM  CLIENT_ID;依頼者IDだけ抜き出したもの
;--------------------------------------------------
;RETURN 0 の部分は共通の口上が表示されます
;依頼ごとの口上を表示する部分は RETURN 0 を RETURN 1 にしてください
;--------------------------------------------------
SELECTCASE SCENE
CASE "依頼提示時"
	PRINTFORML 「那个……能教我做菜吗？」
	IF TALENT:30:恋慕
		PRINTFORML 「……向想为之做菜的对象求助，听起来有些奇怪，但是」
		PRINTFORML 「果然你最值得依靠」
	ELSE
		PRINTFORML 「光靠书本查找总觉得无法完全理解」
		PRINTFORML 「果然还是直接请人指点最好」
	ENDIF
	RETURN 1
CASE "依頼非受託時"
	
	RETURN 0
CASE "依頼受託時"
	PRINTFORML 「谢谢您。我会努力的，请好好教我」
	RETURN 1
CASE "依頼確認時"
	
	RETURN 0
CASE "依頼破棄時"
	
	RETURN 0
CASE "依頼実行直前"
;○この依頼は依頼主がTARGETです
	IF ABL:30:料理技能 < 2
		PRINTFORML 「呃，首先该怎么做呢……」
	ELSEIF ABL:30:料理技能 < 4
		PRINTFORML 「总觉得掌握了窍门……」
	ELSE
		PRINTFORML 「呵呵呵，其实我只是想和你一起做菜罢了」
	ENDIF
;【L ［あなた］は［彼女］と一緒に料理をした】
;【W ［料理名］を作ります】
;【▼そのまま下の口上へ】
	
	RETURN 0
CASE "依頼実行直後"
;○この依頼は必ず実行後達成します
;【▲上の口上から続き】
	IF ABL:30:料理技能 < 2
		PRINTFORML 「做好了……这感觉真是充满成就感呢」
	ELSEIF ABL:30:料理技能 < 4
		PRINTFORML 「嗯，看起来很好吃」
	ELSE
		PRINTFORML 「无可挑剔，做出了美味的料理♪」
	ENDIF
;【▼そのまま下の口上へ】
	
	RETURN 1
CASE "成功報告時"
;報酬：\500
;【▲上の口上から続き】
	IF TALENT:恋慕
		PRINTFORML 「谢谢你陪我」
		PRINTFORML 「喏，这是奖励哦」
	ELSE
		PRINTFORML 「谢谢您教我」
		PRINTFORML 「约定的报酬请收下哦」
	ENDIF
	PRINTFORML 「做好的菜，我们快点尝尝吧」
;【報酬獲得】
;【L できた料理は二人いっしょに頂いた】
;【吃飯効果（料理打分）】
	
	RETURN 1
CASE "失敗報告時"
	
	RETURN 0
;CASE "依頼報告不要"
;＜この依頼にはありません＞
;	RETURN 0
ENDSELECT

;==================================================
;依頼口上・一般依頼05：関于特訓
;==================================================
@M_KOJO_IRAI_5_K30(ROLE, SCENE, CLIENT_ID)
#DIMS ROLE     ;角色の立場、依頼者かそうでないか
#DIMS SCENE    ;セリフの表示されるタイミング
#DIM  CLIENT_ID;依頼者IDだけ抜き出したもの
;--------------------------------------------------
;RETURN 0 の部分は共通の口上が表示されます
;依頼ごとの口上を表示する部分は RETURN 0 を RETURN 1 にしてください
;--------------------------------------------------
SELECTCASE SCENE
CASE "依頼提示時"
	IF K30_CHECK_HEN_T()
		PRINTFORML 「%K30_C_NAME(MASTER)%，要不来一决胜负？」
		PRINTFORML 「我想您也感到精力无处施展吧」
		PRINTFORML 「正巧我也……现在正想尽情释放一番呢……」
	ELSE
		PRINTFORML 「弹幕对决，能陪我一场吗？」
		PRINTFORML 「以人类之身，究竟要如何修炼才能拥有如此力量……」
		PRINTFORML 「直接向您请教是最好的办法吧」
	ENDIF
	RETURN 1
CASE "依頼非受託時"
	
	RETURN 0
CASE "依頼受託時"
	IF K30_CHECK_HEN_T()
		PRINTFORMW 「……那么，我们这就开始吧」
	ELSE
		PRINTFORMW 「谢谢。我已经准备好了，随时都可以」
	ENDIF
	RETURN 1
CASE "依頼確認時"
	
	RETURN 0
CASE "依頼破棄時"
	
	RETURN 0
CASE "依頼実行直前"
;○この依頼は依頼主がTARGETです
	IF K30_CHECK_HEN_T()
		PRINTFORML 「虽然很抱歉……但您做好觉悟了吗？」
	ELSE
		PRINTFORML 「那么，我们开始吧」
	ENDIF
;【W ［あなた］は［彼女］と弾幕ごっこの特訓をした】
;【▼そのまま下の口上へ】
	
	RETURN 1
CASE "依頼実行直後"
;○この依頼は必ず実行後達成します
;【▲上の口上から続き】
	CALL K30_D_LINE
	PRINTFORML
	IF K30_CHECK_HEN_T()
		PRINTDATADL
			DATAFORM 面对映姬激烈的弹幕，%CALLNAME:MASTER%毫无亮点地输掉了……
			DATAFORM 映姬毫不留情的攻击，让%CALLNAME:MASTER%被字面意义上地揍得体无完肤……
			DATAFORM 映姬毫无保留的弹幕，让%CALLNAME:MASTER%迅速落败……
		ENDDATA
		PRINTFORML 「……抱歉」
		PRINTDATAL
			DATAFORM 「一时……忘了手下留情了」
			DATAFORM 「今天好像有点……发泄过头了」
			DATAFORM 「身为阎魔，竟然……连规矩都忘了，使出了全力……」
		ENDDATA
		PRINTFORMW 映姬是\@ TALENT:機嫌 == -1 ? 难以抑制地带着焦躁的表情 # 双眼无神地 \@向%CALLNAME:MASTER%简单道了一句歉。
		RETURN 1
	ELSEIF RAND:2 == 1
		PRINTDATADL
			DATAFORM 结果以%CALLNAME:MASTER%精彩的逆转胜告终
			DATAFORM 结果在拉锯般的攻防之后，以%CALLNAME:MASTER%的胜利告终
			DATAFORM 结果自始至终%CALLNAME:MASTER%都掌控着场面，压倒映姬并取得了胜利
		ENDDATA
		PRINTDATAW
			DATAFORM 「我也得更加努力才行呢」
			DATAFORM 「就算撇开您有多么厉害不谈，我也还是有点不争气呢……」
			DATAFORM 「您的强大……真是深不可测呢」
		ENDDATA
	ELSE
		PRINTDATADL
			DATAFORM 结果以映姬精彩的逆转胜告终
			DATAFORM 结果在拉锯般的攻防之后，以映姬的胜利告终
			DATAFORM 结果自始至终映姬都掌控着场面，压倒%CALLNAME:MASTER%并取得了胜利
		ENDDATA
		PRINTDATAW
			DATAFORM 「总算保住了颜面」
			DATAFORM 「日常表现的差异体现出来了呢……实际上实力并没有差距」
			DATAFORM 「……下次可不一定会是同样的结果」\n「我也还需要继续努力」
		ENDDATA
	ENDIF
	
	PRINTFORML 「那么，我们从头回顾一下今天的比赛吧」
	PRINTFORMDW 特训结束后，也和映姬仔细地进行了复盘……
;【▼そのまま下の口上へ】
	RETURN 1
CASE "成功報告時"
;報酬：\500
;【▲上の口上から続き】
	PRINTFORML 
	IF K30_CHECK_HEN_T()
		PRINTFORML 「谢谢您奉陪了」
		PRINTFORML 「……………………」
		PRINTFORML 「……叨扰你的赔礼我也准备好了」
		PRINTFORML 
		PRINTFORMDL 递过来的报酬里，还包着一盒巧克力
		CALL GET_ITEM("巧克力", 1, 1)
	ELSE
		PRINTFORML 「今天谢谢您奉陪了」
		PRINTFORML 「我也认为这是个重新审视自己实力的好机会」
		PRINTFORML 「如果还有机会，请再多多指教」
	ENDIF
;【報酬獲得】
	RETURN 1
CASE "失敗報告時"
	
	RETURN 0
;CASE "依頼報告不要"
;＜この依頼にはありません＞
;	RETURN 0
ENDSELECT

;==================================================
;依頼口上・一般依頼06：誰来告訴我！
;==================================================
@M_KOJO_IRAI_6_K30(ROLE, SCENE, CLIENT_ID)
#DIMS ROLE     ;角色の立場、依頼者かそうでないか
#DIMS SCENE    ;セリフの表示されるタイミング
#DIM  CLIENT_ID;依頼者IDだけ抜き出したもの
;--------------------------------------------------
;RETURN 0 の部分は共通の口上が表示されます
;依頼ごとの口上を表示する部分は RETURN 0 を RETURN 1 にしてください
;--------------------------------------------------
SELECTCASE SCENE
CASE "依頼提示時"
	PRINTFORML 「我需要外界的知识」
	PRINTFORML 「如果要请教的话，您是最合适的人选吧」
	RETURN 1
CASE "依頼非受託時"

	RETURN 0
CASE "依頼受託時"

	RETURN 0
CASE "依頼確認時"
	
	RETURN 0
CASE "依頼破棄時"
	
	RETURN 0
CASE "依頼実行直前"
	IF IS_LIBRARY(CFLAG:MASTER:現在位置) && TARGET == CLIENT_ID
	;［查資料］と［進行解答］が重なっている場合
	;【◆口上】
	;【L ［你］は［彼女］の疑问に答えるために［現在地］を訪れた】
	;【L ここなら役に立つ資料が見つかりそうだ】
	;【INPUT（查資料/進行解答）】
	;【查資料＞［你］と［彼女］は［現在地］で調べ物をした】
	;【▼そのまま下の口上へ】
	;【進行解答＞［進行解答］へジャンプ】
		
		RETURN 0
	ELSEIF IS_LIBRARY(CFLAG:MASTER:現在位置)
	;［查資料］をした時、依頼主ではない口上主がTARGETの場合
	;【◆口上】
	;【［你］は［現在地］で調べ物をした】
	;【▼そのまま下の口上へ】
		
		RETURN 0
	ELSE
	;［進行解答］時（依頼主がTARGET）
	;【◆口上】
	;【L ［你］は［彼女］の疑问に答えた】
	;【成功：［彼女］の疑问は氷解した！】
	;【失敗：［彼女］は納得できなかったようだ……】
	;【▼そのまま下の口上へ】
		
		RETURN 0
	ENDIF
CASE "依頼実行直後"
	;【▲上の口上から続き】
	;【◆口上】
	SELECTCASE CFLAG:CLIENT_ID:依頼状況
	CASE 2
	;［查資料］をした時
		IF ROLE == "CLIENT"
		;一緒に［查資料］をした時
			
			RETURN 0
		ELSEIF ROLE == "TARGET"
		;依頼主ではない口上主の前で［查資料］をした時
			
			RETURN 0
		ENDIF
	CASE 3
	;成功した時
	;【▼そのまま下の口上へ】
		PRINTDATAL
			DATAFORM 「原来如此……非常有参考价值」
			DATAFORM 「……果然还是向实际了解的人请教最好呢」
			DATAFORM 「……原来是这么回事啊」\n「难怪我自己怎么查也查不到」
		ENDDATA
		RETURN 1
	CASE 6
	;失敗した時
	;【▼そのまま失敗報告時の口上へ】
		PRINTDATAL
			DATAFORM 「嗯嗯？」\n「那是不是不对呢……？」
			DATAFORM 「……虽然承蒙您教导，但很抱歉」\n「我觉得那个解释前后矛盾」
			DATAFORM 「……怎么说呢，虽然文脉是对的」\n「但总觉得有种很强的违和感……？」
		ENDDATA
		RETURN 1
	ENDSELECT
CASE "成功報告時"
;報酬：\500
	
	RETURN 0
CASE "失敗報告時"
	PRINTFORML 「虽然占用您的时间很抱歉」
	PRINTFORMW 「但我无论如何也还是不明白……」
	PRINTFORML 「……报酬我姑且还是给您吧」
	PRINTFORML 
	PRINTFORMDL 所持金 ＋500円
	MONEY += 500
	RETURN 1
;CASE "依頼報告不要"
;＜この依頼にはありません＞
;	RETURN 0
ENDSELECT

;==================================================
;依頼口上・一般依頼07：大掃除還没結束
;==================================================
@M_KOJO_IRAI_7_K30(ROLE, SCENE, CLIENT_ID)
#DIMS ROLE     ;角色の立場、依頼者かそうでないか
#DIMS SCENE    ;セリフの表示されるタイミング
#DIM  CLIENT_ID;依頼者IDだけ抜き出したもの
;--------------------------------------------------
;RETURN 0 の部分は共通の口上が表示されます
;依頼ごとの口上を表示する部分は RETURN 0 を RETURN 1 にしてください
;--------------------------------------------------
SELECTCASE SCENE
CASE "依頼提示時"
	IF CFLAG:30:初期位置 == CFLAG:MASTER:初期位置
		PRINTFORML 「毕竟不收拾房间的话，会很没眼看吧？」
	ELSE
		PRINTFORML 「说起来有点不好意思，但实在腾不出手，就给搁置了……」
		PRINTFORML 「可以请您帮忙吗？」
	ENDIF
	RETURN 1
CASE "依頼非受託時"
	
	RETURN 0
CASE "依頼受託時"
	IF CFLAG:30:初期位置 == CFLAG:MASTER:初期位置
		PRINTFORMW 「我们快点收拾好吧」
	ELSEIF TALENT:30:恋慕
		PRINTFORMW 「真是对不起。拜托了」
	ELSE
		PRINTFORMW 「非常抱歉。拜托您了」
	ENDIF
	RETURN 1
CASE "依頼確認時"
	
	RETURN 0
CASE "依頼破棄時"
	
	RETURN 0
CASE "依頼実行直前"
;○この依頼は依頼主がTARGETです
	IF YOGORE:(GET_CHARAHOME(TARGET)) < 1000
	;先に掃除してしまっていた場合
	PRINTFORML 「哎呀……变得干净了？」
	;【W ［彼女］の部屋は十分にきれいだ】
	;【▼そのまま下の口上へ】
		
		RETURN 1
	ELSE
	;一緒に掃除する場合
	;【◆口上】
	PRINTFORML 「两个人一起做的话，很快就能完成了呢」
	;【▼そのまま下の口上へ】
		
		RETURN 1
	ENDIF
CASE "依頼実行直後"
;○この依頼は必ず実行後達成します
;【▲上の口上から続き】
;【◆口上】
;【▼そのまま下の口上へ】
	
	RETURN 0
CASE "成功報告時"
;報酬：\1500
;【▲上の口上から続き】
;【◆口上】
;【報酬獲得】
	
	RETURN 0
CASE "失敗報告時"
	
	RETURN 0
;CASE "依頼報告不要"
;＜この依頼にはありません＞
;	RETURN 0
ENDSELECT

;==================================================
;依頼口上・一般依頼08：送信
;※この依頼は角色によっては発生しません
;==================================================
@M_KOJO_IRAI_8_K30(ROLE, SCENE, CLIENT_ID)
#DIMS ROLE     ;角色の立場、依頼者かそうでないか
#DIMS SCENE    ;セリフの表示されるタイミング
#DIM  CLIENT_ID;依頼者IDだけ抜き出したもの
;--------------------------------------------------
;RETURN 0 の部分は共通の口上が表示されます
;依頼ごとの口上を表示する部分は RETURN 0 を RETURN 1 にしてください
;--------------------------------------------------
SELECTCASE SCENE
CASE "依頼提示時"
	LOCAL = SEARCH_IRAI_EMPTY()
	PRINTFORML 「%K30_C_NAME(MASTER)%、您现在有空吗？」
	PRINTFORML 「如果可以的话，能帮我送这封信就太好了」
	RETURN 1
CASE "依頼非受託時"

	RETURN 0
CASE "依頼受託時"
	
	PRINTFORML 「谢谢」
	PRINTFORML 「那么，寄给%K30_C_NAME(IRAI_SLOT_TO_PERSON(LOCAL))%的信，我确实交给您了哦」
	PRINTFORML 「虽然不急，但请务必不要忘记交给她」
	RETURN 1
CASE "依頼確認時"
	
	RETURN 0
CASE "依頼破棄時"
	PRINTFORML 「是吗……」
	PRINTFORML 「没办法。请把信好好还给我」
	RETURN 1
CASE "依頼実行直前"
;○この依頼では手紙を渡される側の口上です
;【◆口上】
	PRINTFORML 「那是……%K30_C_NAME(CLIENT_ID)%回复的\@ CLIENT_ID == 49 ? 报告呢 # 信…… \@」
;【W ［あなた］は［彼女］に預かっていた手紙を渡した】
;【▼そのまま下の口上へ】
	RETURN 1
CASE "依頼実行直後"
;○この依頼は必ず実行後達成します
;【▲上の口上から続き】
;【◆口上】
	IF CLIENT_ID == 49
		PRINTFORML 「%K30_C_NAME(MASTER)%，谢谢您跑腿」
		PRINTFORM 「如果见到她的话
		PRINTDATAL
			DATAFORM 可以请您替我向她道谢，说她总是汇报得很及时，帮了大忙吗？」
			DATAFORM 可以请您替我向她道谢，说能完全放心地把管理交给她，帮了大忙吗？」
			DATAFORM 可以请您替我向她转告，说我这边没问题，请她继续努力吗？」
		ENDDATA
		SIF DIARY:30:17 == 0
			CALL K30_WRITE_DIARY(17)
	ELSEIF !STRCOUNT(CSTR:30:0, "変Ｔ")
		PRINTFORMW 「…………………………………嗯……」
		PRINTFORML 「…难道……………………………」
		PRINTFORMW 「…………竟然会发生这种事……」
		PRINTFORMW 「……………………………」
		PRINTFORMW 「可以请您替我转告赫卡提亚大人，说我明白了……」
		CALLF FIRSTTIME("変Ｔ指令")
	ELSE
		PRINTFORML 「难道，%\@ K30_CHECK_HEN_T() ? 这 # 那 \@%套制服要取消了……」
		PRINTFORMW 「………………………………………………」
		PRINTFORML 「………果然………不行吗……」
		PRINTFORMW 「………………………」
		PRINTFORMW 「可以请您替我转告赫卡提亚大人，说我%TEXTR("明白了/立即着手/日后答复")%吗……」
	ENDIF
	SIF CLIENT_ID == 113 && DIARY:30:18 == 0
		CALL K30_WRITE_DIARY(18)
	RETURN 1
CASE "成功報告時"
;報酬：素材4つ
	
	RETURN 0
CASE "失敗報告時"
	PRINTFORML 「%K30_C_NAME(MASTER)%，您是不是忘了什么……？」
	PRINTFORML 「……这不是我一个人的问题，这让我很困扰」
	PRINTFORML 「以后请多加注意」
	CALL CHANGE_CFLAG(4, 30, -10)
	PRINTFORML 映姬用有些可怕的眼神瞪了过来……
	TALENT:30:心情 = MIN(TALENT:30:心情, 0)
	RETURN 1
;CASE "依頼報告不要"
;＜この依頼にはありません＞
;	RETURN 0
ENDSELECT

;==================================================
;依頼口上・一般依頼09：誰的遗失物
;==================================================
@M_KOJO_IRAI_9_K30(ROLE, SCENE, CLIENT_ID)
#DIMS ROLE     ;角色の立場、依頼者かそうでないか
#DIMS SCENE    ;セリフの表示されるタイミング
#DIM  CLIENT_ID;依頼者IDだけ抜き出したもの
;--------------------------------------------------
;RETURN 0 の部分は共通の口上が表示されます
;依頼ごとの口上を表示する部分は RETURN 0 を RETURN 1 にしてください
;--------------------------------------------------
SELECTCASE SCENE
CASE "依頼提示時"
	PRINTFORML 「%K30_C_NAME(MASTER)%，这是个积累善行的好机会哦」
	PRINTFORML 「这是某个人的失物。请您找出来并送还给她吧」
	RETURN 1
CASE "依頼非受託時"
	
	RETURN 0
CASE "依頼受託時"
	
	RETURN 0
CASE "依頼確認時"
	
	RETURN 0
CASE "依頼破棄時"
	
	RETURN 0
CASE "依頼実行直前"
;○この依頼では落とし物を渡される側の口上です
	PRINTFORML 「哎呀……？那是……我的……？」
	PRINTFORML 「为什么会是%K30_C_NAME(MASTER)%……？」
	;【W ［あなた］は［彼女］に預かっていた落とし物を返した】
	;【▼そのまま下の口上へ】
	
	RETURN 1
CASE "依頼実行直後"
	;○この依頼は必ず実行後達成します
	;【▲上の口上から続き】
	PRINTFORML 「是吗。%K30_C_NAME(CLIENT_ID)%帮我找到了……」
	PRINTFORML 「%K30_C_NAME(MASTER)%，可以请您替我向%K30_C_NAME(CLIENT_ID)%转达谢意吗？」
	PRINTFORML 「也给%K30_C_NAME(MASTER)%添麻烦了。谢谢您」
	RETURN 1
CASE "成功報告時"
;報酬：上級素材
	
	RETURN 0
CASE "失敗報告時"
	
	RETURN 0
CASE "依頼報告不要"
	
	RETURN 0
ENDSELECT

;==================================================
;依頼口上・一般依頼10：怎么也找不到（場所探しパターン）
;==================================================
@M_KOJO_IRAI_10_K30(ROLE, SCENE, CLIENT_ID)
#DIMS ROLE     ;角色の立場、依頼者かそうでないか
#DIMS SCENE    ;セリフの表示されるタイミング
#DIM  CLIENT_ID;依頼者IDだけ抜き出したもの
;--------------------------------------------------
;RETURN 0 の部分は共通の口上が表示されます
;依頼ごとの口上を表示する部分は RETURN 0 を RETURN 1 にしてください
;--------------------------------------------------
SELECTCASE SCENE
CASE "依頼提示時"
	PRINTFORML 「能请您帮忙找一下失物吗？」
	PRINTFORML 「……这事儿您听着就好，我的部下好像把东西弄丢了」
	PRINTFORML 「我想在她发现并因此失落之前，悄悄地把它放回去」
	PRINTFORML 「可以的话，请您务必秘密处理」
	RETURN 1
CASE "依頼非受託時"
	
	RETURN 0
CASE "依頼受託時"
	
	RETURN 0
CASE "依頼確認時"
	
	RETURN 0
CASE "依頼破棄時"
	
	RETURN 0
CASE "依頼実行直前"
;【◆口上】
;【W 中奖了を探していた［你］はついに探していた落とし物を発見した】
;【▼そのまま下の口上へ】
	IF ROLE == "CLIENT"
	;依頼主である口上主と一緒に発見した場合
		
		RETURN 0
	ELSEIF ROLE == "TARGET"
	;発見した時、依頼主ではない口上主がTARGETの場合
		
		RETURN 0
	ENDIF
CASE "依頼実行直後"
;○この依頼は必ず実行後達成します
;【▲上の口上から続き】
;【◆口上】
	IF ROLE == "CLIENT"
	;依頼主である口上主と一緒に発見した場合
		
		RETURN 0
	ELSEIF ROLE == "TARGET"
	;発見した時、依頼主ではない口上主がTARGETの場合
		
		RETURN 0
	ENDIF
CASE "成功報告時"
;報酬：上級素材2つ
	
	RETURN 0
CASE "失敗報告時"
	
	RETURN 0
;CASE "依頼報告不要"
;＜この依頼にはありません＞
;	RETURN 0
ENDSELECT

;==================================================
;依頼口上・一般依頼11：怎么也找不到（人物探しパターン）
;==================================================
@M_KOJO_IRAI_11_K30(ROLE, SCENE, CLIENT_ID)
#DIMS ROLE     ;角色の立場、依頼者かそうでないか
#DIMS SCENE    ;セリフの表示されるタイミング
#DIM  CLIENT_ID;依頼者IDだけ抜き出したもの
;--------------------------------------------------
;RETURN 0 の部分は共通の口上が表示されます
;依頼ごとの口上を表示する部分は RETURN 0 を RETURN 1 にしてください
;--------------------------------------------------
SELECTCASE SCENE
CASE "依頼提示時"
	PRINTFORML 「能请您帮忙找一下失物吗？」
	PRINTFORML 「……这事儿您听着就好，我的部下好像把东西弄丢了」
	PRINTFORML 「我想在她发现并因此失落之前，悄悄地把它放回去」
	PRINTFORML 「可以的话，请您务必秘密处理」
	RETURN 1
CASE "依頼非受託時"
	
	RETURN 0
CASE "依頼受託時"
	
	RETURN 0
CASE "依頼確認時"
	
	RETURN 0
CASE "依頼破棄時"
	
	RETURN 0
CASE "依頼実行直前"
	;○この依頼では失くしもの持っていた側の口上です
	PRINTFORML 「如你所言……是不是我保管的这件物品呢？」
	;【W 聞き込みを続けていた［あなた］はついに探していた落とし物を発見した】
	;【▼そのまま下の口上へ】
	RETURN 1
CASE "依頼実行直後"
	;○この依頼は必ず実行後達成します
	;【▲上の口上から続き】
	PRINTFORML 「找到失主真是太好了」
	PRINTFORML 「既然拜托别人寻找，那一定是件很重要的东西吧」
	PRINTFORML 「请快点把它交给%K30_C_NAME(CLIENT_ID)%吧」
	RETURN 1
CASE "成功報告時"
;報酬：\3200
	
	RETURN 0
CASE "失敗報告時"
	
	RETURN 0
;CASE "依頼報告不要"
;＜この依頼にはありません＞
;	RETURN 0
ENDSELECT

;==================================================
;依頼口上・一般依頼12：懲らしめて！
;==================================================
@M_KOJO_IRAI_12_K30(ROLE, SCENE, CLIENT_ID)
#DIMS ROLE     ;角色の立場、依頼者かそうでないか
#DIMS SCENE    ;セリフの表示されるタイミング
#DIM  CLIENT_ID;依頼者IDだけ抜き出したもの
;--------------------------------------------------
;RETURN 0 の部分は共通の口上が表示されます
;依頼ごとの口上を表示する部分は RETURN 0 を RETURN 1 にしてください
;--------------------------------------------------
SELECTCASE SCENE
CASE "依頼提示時"
	LOCAL = SEARCH_IRAI_EMPTY()
	PRINTFORML 「稍微打扰一下可以吗」
	PRINTFORML 「作为阎魔的代理，我想请您向她发起弹幕对决」
	PRINTFORML 「如果我或我的部下直接出面的话，事情可能会闹大……」
	PRINTFORML 「而由您出面，无论结果如何，都不会闹起波澜」
	PRINTFORML 「您看如何，可以拜托您吗？」
	RETURN 1
CASE "依頼非受託時"
	
	RETURN 0
CASE "依頼受託時"
	PRINTFORML 「谢谢您」
	PRINTFORML 「那么，和%K30_C_NAME(IRAI_SLOT_TO_PERSON(LOCAL))%的弹幕对决，就交给您了」
	PRINTFORML 「还有需要注意的事情是……」
	SELECTCASE ABL:MASTER:戦闘能力
		CASE 1, 2
			PRINTFORML 「不用勉强，请务必注意不要让彼此受伤」
		CASE 3, 4
			PRINTFORML 「以两位的实力而言，一不小心可能会波及到周围」
			PRINTFORML 「请不要搞得太过张扬」
		CASE IS > 4
			PRINTFORML 「如果你们认真起来，周围一带可能会变成一片焦土……」
			PRINTFORML 「听好了，务必请您不要『把事情闹大』」
	ENDSELECT
	RETURN 1
CASE "依頼確認時"
	
	RETURN 0
CASE "依頼破棄時"
	
	RETURN 0
CASE "依頼実行直前"
;○この依頼では討伐される側の口上です
	IF CANNOT_DANMAKU() == 1
	;屋内のとき（勝負できない）
	;【◆口上】
	;【W 屋外で挑もう…】
		
		RETURN 0
	ELSEIF CANNOT_DANMAKU() == 2
	;仕事中（勝負できない）
	;【◆口上】
	;【W お取り込み中だ…】
		
		RETURN 0
	ELSEIF CANNOT_DANMAKU() == 3
	;你が疲労中（勝負できない）
	;【◆口上】
	;【W 今は疲れている…】
		
		RETURN 0
	ELSEIF CANNOT_DANMAKU() == 4
	;口上主が疲労竜（勝負できない）
	;【◆口上】
	;【W 今挑むのはフェアじゃない…】
		
		RETURN 0
	ELSEIF CANNOT_DANMAKU() == 5
	;既に今日一度弾幕勝負をしている（勝負できない）
	;【◆口上】
	;【W 今日はもう挑めない…】
		
		RETURN 0
	ELSE
	;【◆口上】
	;【W 勝負開始！！】
	;【以降はそのまま弾幕口上が呼ばれます】
		
		RETURN 0
	ENDIF
	;【▼そのまま下の口上へ】
CASE "依頼実行直後"
;○この依頼では討伐される側の口上です
	IF CFLAG:CLIENT_ID:依頼状況 == 2
		IF CANNOT_DANMAKU() == 0
			;败犬
			;【▲上の口上から続き】
			;【L ［彼女］の討伐に失敗した……】
			;【W ……こうなったら後日出直すしかない】
			;【◆口上】
			RETURN 0
		ELSE
			;挑めなかった場合
			;【▲上の口上から続き】
			;【◆口上】
			RETURN 0
		ENDIF
	ELSEIF CFLAG:CLIENT_ID:依頼状況 == 3
	;勝利
	;【▲上の口上から続き】
	;【W ［彼女］を懲らしめた！】
	;【◆口上】
		
		RETURN 0
	ENDIF
CASE "成功報告時"
;報酬：賞金（時価）
	
	RETURN 0
CASE "失敗報告時"
	
	RETURN 0
;CASE "依頼報告不要"
;＜この依頼にはありません＞
;	RETURN 0
ENDSELECT

;==================================================
;依頼口上・一般依頼13：好吃的魚が食べたいなぁ
;==================================================
@M_KOJO_IRAI_13_K30(ROLE, SCENE, CLIENT_ID)
#DIMS ROLE     ;角色の立場、依頼者かそうでないか
#DIMS SCENE    ;セリフの表示されるタイミング
#DIM  CLIENT_ID;依頼者IDだけ抜き出したもの
;--------------------------------------------------
;RETURN 0 の部分は共通の口上が表示されます
;依頼ごとの口上を表示する部分は RETURN 0 を RETURN 1 にしてください
;--------------------------------------------------
SELECTCASE SCENE
CASE "依頼提示時"
	PRINTFORML 「我希望能慰劳一下平时努力工作的部下」
	PRINTFORML 「我没有什么采购名贵食材的好门路，可以请您代劳吗？」
	RETURN 1
CASE "依頼非受託時"
	
	RETURN 0
CASE "依頼受託時"
	
	RETURN 0
CASE "依頼確認時"
	
	RETURN 0
CASE "依頼破棄時"
	
	RETURN 0
CASE "依頼実行直前"
;○この依頼は依頼主がTARGETです
;【◆口上】
;【L ［你］は［彼女］に好吃的魚を渡した】
;【L 何だか生きる希望がわいてきたよ。】
;【▼そのまま下の口上へ】
	
	RETURN 0
CASE "依頼実行直後"
;○この依頼は必ず実行後達成します
;【▲上の口上から続き】
;【◆口上】
;【▼そのまま下の口上へ】
	
	RETURN 0
CASE "成功報告時"
;報酬：白米３个
	
	RETURN 0
CASE "失敗報告時"
	
	RETURN 0
;CASE "依頼報告不要"
;＜この依頼にはありません＞
;	RETURN 0
ENDSELECT

;==================================================
;依頼口上・一般依頼16：お悩み相談
;==================================================
@M_KOJO_IRAI_16_K30(ROLE, SCENE, CLIENT_ID)
#DIMS ROLE     ;角色の立場、依頼者かそうでないか
#DIMS SCENE    ;セリフの表示されるタイミング
#DIM  CLIENT_ID;依頼者IDだけ抜き出したもの
;--------------------------------------------------
;RETURN 0 の部分は共通の口上が表示されます
;依頼ごとの口上を表示する部分は RETURN 0 を RETURN 1 にしてください
;--------------------------------------------------
SELECTCASE SCENE
CASE "依頼提示時"
	IF TALENT:30:思慕
		PRINTFORML 「%K30_C_NAME(MASTER)%，虽然可能是我的一些琐碎事……」
		PRINTFORML 「可以请您听我说一下吗？」
	ELSE
		PRINTFORML 「现在方便吗？」
		PRINTFORML 「有件事想和%K30_C_NAME(MASTER)%确认一下」
	ENDIF
	RETURN 1
CASE "依頼非受託時"
	IF TALENT:30:思慕
		PRINTFORML 「是吗……」
		PRINTFORML 「不……没什么大不了的，您别在意」
	ELSE
		PRINTFORML 「是吗」
		PRINTFORML 「那么请您先去把事情办完吧」
	ENDIF
	RETURN 1
CASE "依頼受託時"
	IF TALENT:30:思慕
		PRINTFORML 「嗯……」
		PRINTFORML 「那么，就拜托您了」
	ELSE
		PRINTFORML 「那么，请您认真听好」
	ENDIF
	RETURN 0
CASE "依頼確認時"
	PRINTFORML 「就算不用特意确认」
	PRINTFORML 「只是听我说说就好」
	RETURN 1
CASE "依頼破棄時"
	PRINTFORML 「………」
	PRINTFORML 「您就那么不想听吗？」
	RETURN 1
CASE "依頼実行直前"
	
	RETURN 0
CASE "依頼実行直後"
	IF TALENT:30:思慕
		;正解の選択肢
		IF TFLAG:193 == 1
			IF TFLAG:194 == 2
				PRINTFORML 「是……果然，是这样呢」
				PRINTFORML 「谢谢，很有参考价值……」
			ELSE
				PRINTFORML 「原来如此……」
				PRINTFORML 「真是非常有参考价值」
			ENDIF
		;ハズレの選択肢だったが逆に正解
		ELSEIF TFLAG:193 == 2
			PRINTFORML 「！！！」
			PRINTFORML 「真、真的吗……？」
			PRINTFORML 「谢谢，很有参考价值」
		;ハズレの選択肢
		ELSEIF TFLAG:193 == -1
			PRINTFORML 「………」
			PRINTFORML 「…您不是随便说的吧/您是认真……这么想的吗？」
		;正解の選択肢だったが逆にハズレ
		ELSEIF TFLAG:193 == -2
			PRINTFORML 「………」
			PRINTFORML 「…您就不能稍微委婉一点吗？」
		ENDIF
		SIF DIARY:30:27 == 0
			CALL K30_WRITE_DIARY(27)
	ELSE
		PRINTDATAL
			DATAFORM 「嗯，正如您所说」\n「根本没必要确认呢」
			DATAFORM 「您能好好理解真是太好了」
			DATAFORM 「是的，正是如此」\n「虽然觉得没必要问，但只是以防万一哦」
		ENDDATA
	ENDIF
	RETURN 1
CASE "成功報告時"
;報酬：野菜か果物
	PRINTFORML 
	IF TALENT:30:思慕
		PRINTFORML 「作为谢礼，虽然只是一点心意」
		PRINTFORML 「请收下吧」
	ELSE
		PRINTFORML 「那么，您也要努力更加精进自身」
	ENDIF
	RETURN 1
CASE "失敗報告時"
	PRINTFORML 
	PRINTFORML 「嘛，总之……」
	PRINTFORML 「谢谢您听我倾诉……」
	RETURN 1
;CASE "依頼報告不要"
;＜この依頼にはありません＞
;	RETURN 0
CASE "口上委託率"
;＜この依頼特有の分岐です。(RESULT:100の値)％の確率で"口上専用"が発生します＞
	RESULT:100 = 100

;＜RESULT:YYに0以外の数値を入れると、該当のお悩みを発生させなくできます（詳しくは一般依頼16_お悩み相談参照）＞
;1,2:弾幕ごっこの悩み 3,4:晩酌の悩み 5,6:本の悩み 7,8:香料の悩み
;9,10:音楽の悩み 11,12:服の悩み 13:髪型の悩み 14:参拝の悩み 15:ダイエットの悩み
;16,17:菜園の悩み 18:休日の悩み 19:人気の悩み 20:集中力の悩み 21:御三家の悩み 22:進化の悩み
	VARSET RESULT, 1, 1, 23
	RETURN 1
CASE "口上専用"
;＜この依頼特有の分岐です。(口上委託率)％の確率で発生します＞
;16,お悩み相談 の場合
;RESULT        発生判定,0だと発生しません
;RESULT:1      正解の選択肢（ただしRESULT:2が0だと、一定確率で逆にハズレる）
;RESULT:2      逆張り正解／ハズレ判定の消去,1だと逆張りが無くなります
;RESULTS:0     お悩み文章（自动で『』で囲まれます）
;RESULTS:1～3  選択肢１～３
;何も発生しない状態になると無限ループになるので注意してください
;●追記メモ
;RESULT:1を4～6にするとそれぞれ1～3がハズレ（残り2つが正解）になります
;RESULT:1を7にするとどれも正解になります
;RESULT:1を8にするとどれもハズレになります
;1～3以外の場合は逆張り判定が自動で無くなります
IF TALENT:30:思慕
	SELECTCASE RAND:4 
		CASE 0
			RESULTS:0 = 如果要邀请在意的人出门的话……』\n　　　『什么样的说法最好呢？
			RESULTS:1 = 坦率地表达心意
			RESULTS:2 = 假装若无其事
			RESULTS:3 = 毫不掩饰地强行促成
			RESULT:1 = 6
			RESULT:2 = 1
		CASE 1
			RESULTS:0 = 比如说……约在意的人出去约会』\n　　　『如果一起去的话，去哪里好呢？
			RESULTS:1 = 村里热闹的市集
			RESULTS:2 = 只有两个人的安静地方
			RESULTS:3 = 开局直奔情人旅馆
			RESULT:1 = 6
			RESULT:2 = 1
		CASE 2
			RESULTS:0 = 这只是一般而言哦……』\n　　　『您觉得什么样的神明会受到大家的欢迎呢……？
			RESULTS:1 = 死板又不懂变通的神明
			RESULTS:2 = 开朗又亲近人的神明
			RESULTS:3 = 亲切且对谁都温柔的神明
			RESULT:1 = 4
			RESULT:2 = 0
			TFLAG:194 = 2
		CASE 3
			RESULTS:0 = 那个……虽然真是无聊透顶的事』\n　　　『胸部的大小之类的……大家都会在意吗？
			RESULTS:1 = 含蓄内敛的也很好
			RESULTS:2 = 与其没有，不如有更好
			RESULTS:3 = 大的就是正义
			RESULT:1 = 4
			RESULT:2 = 0
			TFLAG:194 = 2
	ENDSELECT
ELSE
	SELECTCASE RAND:4 
		CASE 0
			RESULTS:0 = 如果我能给您颁发奖项的话』\n　　　『您觉得会是什么奖？
			RESULTS:1 = 罪孽深重奖
			RESULTS:2 = 罪孽深重奖
			RESULTS:3 = 罪孽深重奖
			RESULT:1 = 7
			RESULT:2 = 1
		CASE 1
			RESULTS:0 = 如果来听我的教诲』\n　　　『您觉得多久一次比较好？
			RESULTS:1 = 每天
			RESULTS:2 = 每周7次
			RESULTS:3 = 每24小时1次
			RESULT:1 = 7
			RESULT:2 = 1
		CASE 2
			RESULTS:0 = 您觉得不遵守我的教诲，死后会怎样？
			RESULTS:1 = 下地狱
			RESULTS:2 = 下地狱
			RESULTS:3 = 下地狱
			RESULT:1 = 7
			RESULT:2 = 1
		CASE 3
			RESULTS:0 = 您觉得您现在最应该做的是什么？
			RESULTS:1 = 积累善行
			RESULTS:2 = 致力于善行
			RESULTS:3 = 施予善行
			RESULT:1 = 7
			RESULT:2 = 1
	ENDSELECT
ENDIF
ENDSELECT

;==================================================
;依頼口上・一般依頼18：おなかすいた
;==================================================
@M_KOJO_IRAI_18_K30(ROLE, SCENE, CLIENT_ID)
#DIMS ROLE     ;キャラの立場、依頼者かそうでないか
#DIMS SCENE    ;セリフの表示されるタイミング
#DIM  CLIENT_ID;依頼者IDだけ抜き出したもの
#DIMS TEMPS
;--------------------------------------------------
;RETURN 0 の部分は共通の口上が表示されます
;依頼ごとの口上を表示する部分は RETURN 0 を RETURN 1 にしてください
;--------------------------------------------------
SELECTCASE SCENE
CASE "依頼提示時"
	IF TALENT:30:恋慕
		PRINTFORML 「虽然很突然，但很抱歉」
		PRINTFORML 「我就是特别想吃%K30_C_NAME(MASTER)%做的料理……」
		PRINTFORML 「呐，可以吗……？」
	ELSE
		PRINTFORML 「%K30_C_NAME(MASTER)%，方便吗？」
		PRINTFORML 「我想张罗一些料理犒劳大家，但是没有时间亲自制作」
		PRINTFORML 「能请您代劳吗？」
	ENDIF
	RETURN 1
CASE "依頼非受託時"
	
	RETURN 0
CASE "依頼受託時"
	LOCAL = 0
	TEMPS = 
	VARSET LOCALS
	IF TALENT:30:恋慕
		PRINTFORML 「谢谢你，%K30_C_NAME(MASTER)%」
		PRINTFORML 「我满心期待地等着哦」
		RETURN 1
	ENDIF
	RETURN 1
CASE "依頼確認時"
	IF !LOCAL
		IF TALENT:30:恋慕
			PRINTFORML 「对了对了，最关键的、我想请你做的料理就是这个」
			PRINTFORML 「那么就拜托你了哦」
		ELSE
			PRINTFORML 「我想请您做的料理是这个」
		ENDIF
		LOCAL ++
		RETURN 1
	ENDIF
	RETURN 0
CASE "依頼破棄時"
	RETURN 0
CASE "依頼実行直前"
	;依頼確認しないとリクエストは決まらない仕様
	;シュレディンガーの料理
	IF REQUEST_DISHNAME:30:0 != ""
		TEMPS '= REQUEST_DISHNAME:30:0
		SPLIT TEMPS, "／", LOCALS
	ELSE
		LOCALS:0 = "无"
	ENDIF
	LOCALS:0 = DISHNAME_TR(LOCALS:0)
	LOCALS:1 '= DISHNAME_TR() 
	RETURN 0
CASE "依頼実行直後"
	SELECTCASE SOURCE:30:歓楽
		;大成功
		CASE 1000
			IF LOCALS:0 == "无"
				PRINTFORML 「咦……！？」
				PRINTFORML 「您是怎么知道我想要这道菜的……？」
				PRINTFORML 「……咦？？」
			ELSEIF TALENT:30:恋慕
				IF LOCALS:0 == LOCALS:1
					PRINTFORML 「不愧是%K30_C_NAME(MASTER)%，完美呢」
					PRINTFORML 「呵呵……」
					PRINTFORML 「你为我做的%LOCALS:1%，我会好好品尝的……♥」
				ELSE
					PRINTFORML 「虽然%K30_C_NAME(MASTER)%做的事总是让我惊讶不已」
					PRINTFORML 「但也有这种出其不意的惊喜……真有趣呢」
					PRINTFORML 「这道%LOCALS:1%，谢谢你」
				ENDIF
			ELSE
				PRINTFORML 「这……真是做得非常出色的%LOCALS:1%呢」
				IF LOCALS:0 == LOCALS:1
					PRINTFORML 「真的超乎我的预期」
				ELSE
					PRINTFORML 「这样的话，即使不是%LOCALS:0%，大家也都会满意的吧」
				ENDIF
				PRINTFORML 「%K30_C_NAME(MASTER)%，谢谢您」
			ENDIF
		;成功
		CASE 300
			IF LOCALS:0 == "无"
				PRINTFORML 「看起来很好吃的%LOCALS:1%呢……」
				PRINTFORML 「您是怎么想到要做这个的呢？」
				PRINTFORML 「不，达到预期当然很棒，但总觉得有点不可思议呢……」
			ELSEIF TALENT:30:恋慕
				IF LOCALS:0 == LOCALS:1
					PRINTFORML 「果然交给%K30_C_NAME(MASTER)%是对的」
					PRINTFORML 「谢谢你」
				ELSE
					PRINTFORML 「……%LOCALS:1%？」
					PRINTFORML 「啊，不过……我觉得这样也挺好的」
					PRINTFORML 「%K30_C_NAME(MASTER)%，谢谢你」
				ENDIF
			ELSE
				IF LOCALS:0 == LOCALS:1
					PRINTFORML 「承蒙您代劳，帮了大忙」
				ELSE
					PRINTFORML 「不方便做%LOCALS:0%吗？」
					PRINTFORML 「不过，如果换成%LOCALS:1%的话，也帮了大忙」
				ENDIF
				PRINTFORML 「%K30_C_NAME(MASTER)%，谢谢您」
			ENDIF
		;失敗
		CASEELSE
			IF LOCALS:0 == "无"
				PRINTFORML 「……%K30_C_NAME(MASTER)%，做菜是没关系，但是」
				PRINTFORML 「您根本没听我说要做什么菜吧？？！」
			ELSEIF TALENT:30:恋慕
				PRINTFORML 「呃……这是什么啊……？？」
				IF LOCALS:0 == LOCALS:1
					PRINTFORML 「外表看起来像是%LOCALS:0%……之类的东西，但是……」
					PRINTFORML 「说实话……到底是怎么做才能变成这样的？」
				ELSE
					PRINTFORML 「我应该说过是%LOCALS:0%吧，但是……%LOCALS:1%？」
					PRINTFORML 「是我有什么地方说错了吗……」
				ENDIF
			ELSE
				PRINTFORML 「…虽然我觉得把事情交给我的我也有责任」
				IF LOCALS:0 == LOCALS:1
					PRINTFORML 「您是第一次做%LOCALS:1%吗？」
					PRINTFORML 「如果是不擅长做菜的话，能提前告诉我一声就帮大忙了」
				ELSE
					PRINTFORML 「我应该已经清楚地向您确认过，希望您做%LOCALS:0%了」
					PRINTFORML 「结果您却做出了%LOCALS:1%……」
					PRINTFORML 「临时抱佛脚随便做做，是不会得到好评的哦」
				ENDIF
			ENDIF
	ENDSELECT
	CALL K30_D_LINE
	PRINTFORML
	RETURN 1
CASE "成功報告時"
	PRINTFORML 「那么，这是报酬」
	SIF SOURCE:30:歓楽 == 1000
		PRINTFORML 「我多包了一些，请收下吧」
	;報酬：
	RETURN 1
CASE "失敗報告時"
	IF TALENT:30:恋慕
		PRINTFORML 「…虽然这次看来是失败了，但我对%K30_C_NAME(MASTER)%寄予厚望哦」
		PRINTFORML 「下次再拜托你的时候，请好好完成哦」
	ELSE
		PRINTFORML 「……无论如何，这毕竟是您特意做的料理」
		PRINTFORML 「我必须好好收下」
		PRINTFORML 「我也把报酬给您吧」
		CALL GET_MONEY_YEN(500, 2)
	ENDIF
	RETURN 1
;CASE "依頼報告不要"
;＜この依頼にはありません＞
;	RETURN 0
ENDSELECT

;==================================================
;依頼口上・固有依頼101：
;固有依頼の仕様は角色によって異なりますが依頼番号は101～で共通です
;"依頼名"部分に依頼名を入れて下さい
;==================================================
@M_KOJO_IRAI_お説教たいむ_K30(ROLE, SCENE, CLIENT_ID)
#DIMS ROLE     ;角色の立場、依頼者かそうでないか
#DIMS SCENE    ;セリフの表示されるタイミング
#DIM  CLIENT_ID;依頼者IDだけ抜き出したもの
;--------------------------------------------------
;RETURN 0 の部分は共通の口上が表示されます
;依頼ごとの口上を表示する部分は RETURN 0 を RETURN 1 にしてください
;--------------------------------------------------
;サボりが一瞬でバレるくらいだし、場所だって丸わかりでいいんじゃないかと
SELECTCASE GET_MAPID(CFLAG:[[小町]]:現在位置)
	CASE 0
		LOCALS = 博丽神社附近
	CASE 1
		LOCALS = 命莲寺附近
	CASE 2
		LOCALS = 人里附近
	CASE 3
		LOCALS = 红魔馆附近
	CASE 4
		LOCALS = 永远亭附近
	CASE 5
		LOCALS = 香霖堂
	CASE 6
		IF GET_MAPID(CFLAG:MASTER:現在位置) == 6
			LOCALS = 附近哪个地方
		ELSE
			LOCALS = 隐蔽的地方
		ENDIF
	CASE 7
		LOCALS = 茨华仙的宅邸
	CASE 8
		LOCALS = 守矢神社附近
	CASE 9
		LOCALS = 旧都附近
	CASE 10
		LOCALS = 月都附近
	CASEELSE
		LOCALS = 不明所以的地方
ENDSELECT
SIF CFLAG:[[小町]]:現在位置 % 100 == 99 && MAIN_MAP != 6
	LOCALS = 自己的房间
SIF CFLAG:30:現在位置 == CFLAG:[[小町]]:現在位置
	LOCALS = 眼前
SELECTCASE SCENE
CASE "依頼提示時"
	PRINTFORML 「%K30_C_NAME(MASTER)%，能把这封信交给小町吗？」
	PRINTFORML 「……嗯，信上写的内容正如您所料」
	RETURN 1
CASE "依頼非受託時"
	
	RETURN 0
CASE "依頼受託時"
	PRINTFORML 「谢谢您。那么，关键的小町的下落是……」
	IF LOCALS == "眼前"
		PRINTFORML 「是，就在我眼前呢。她在我面前堂而皇之地偷懒」
		PRINTFORML 「但是，即使要责备这种事，也需要按照程序以书面形式记录」
		PRINTFORML 「您可能会觉得麻烦，但是……请您配合」
	 	RETURN 1
	ELSE
		PRINTFORM 「%TEXTR("多半/反正/大概")%
		IF LOCALS == "自己的房间"
			PRINTDATAL
				DATAFORM 还在自己的房间里睡着吧」
				DATAFORM 在自己的房间里躺着偷懒吧」
			ENDDATA
		ELSE
			PRINTDATAL
				DATAFORM 在%LOCALS%闲逛吧」
				DATAFORM 在%LOCALS%偷懒了吧」
				DATAFORM 在%LOCALS%晃荡吧」
				DATAFORM 跑到%LOCALS%去睡午觉了吧」
			ENDDATA
		ENDIF
		PRINTDATAL
			DATAFORM 「真是的……我得说多少次她才懂啊」
			DATAFORM 「哎呀呀……这次她又会找什么借口呢」
			DATAFORM 「真是的……再不检点一些，吃亏的可是她自己啊」
			DATAFORM 「真是的……她到底什么时候才能认真点啊」
		ENDDATA
	ENDIF
	RETURN 1
CASE "依頼確認時"
	IF LOCALS == "眼前"
		PRINTFORML 「……有什么需要确认的吗？」
		PRINTFORML 「%K30_C_NAME(MASTER)%也不要玩了，这种事快点办完」
		PRINTFORML 「应该去帮助其他人」
	ELSE
		PRINTFORML 「哎呀？我以为她肯定在%LOCALS%的……」
		PRINTFORML 「既然是小町，她大概又晃荡到哪里去了吧」
		PRINTFORML 「对不起，能请您再连同周围一起找找看吗？」
	ENDIF
	RETURN 1
CASE "依頼破棄時"
	
	RETURN 0
CASE "依頼実行直前"
	;書いたはいいけどここには飛ばない
	CALL SET_KOJO_COLOR([[小町]])
	IF TALENT:[[小町]]:恋人
		PRINTFORML 「…%CALLNAME:MASTER%，你就当是帮帮你那又美又可爱的恋人吧」
	ELSEIF TALENT:[[小町]]:恋慕
		PRINTFORML 「…看在我和%TEXTR(@"%CALLNAME:MASTER%/你/")%的关系上，我想拜托你」
	ELSE
		PRINTFORML 「…%TEXTR(@"%CALLNAME:MASTER%/你/")%，%TEXTR("有件事想找你商量/我有件重要的事想拜托你/")%」
	ENDIF
	PRINTDATAL
		DATAFORM 「这封信，就不能当做没发生过吗……」
		DATAFORM 「能不能替我挨骂啊……」
	ENDDATA
	RESETCOLOR
	RETURN 1
CASE "依頼実行直後"
	;ここにも飛ばない
	CALL SET_KOJO_COLOR([[小町]])
	PRINTDATAL
		DATAFORM 「四季大人很可怕？是吗，果然如此呢……」
		DATAFORM 「你说办不到？嘛，仔细想想也是理所当然的呢……」
		DATAFORM 「你说偶尔还是反省一下比较好？别说那么冷淡的话嘛……」
		DATALIST
			DATAFORM 「哈啊……四季大人的说教啊……」
			DATAFORM 「……我的偷懒，其实全部都是你安排的…」
			DATAFORM 「…不能这么说吗？唉、真不如愿呐？」
		ENDLIST
	ENDDATA
	RESETCOLOR
	RETURN 1
CASE "成功報告時"
	SIF DIARY:30:8 == 0
		CALL K30_WRITE_DIARY(8)
	PRINTFORML 「辛苦了。谢谢您」
	PRINTFORML 「虽然我希望这是最后一次给您添这种麻烦」
	PRINTFORML 「但似乎很难如愿呢」
	RETURN 1
CASE "失敗報告時"
	PRINTFORML 「…您该不会是在袒护小町吧？」
	PRINTFORML 「慈悲之心固然重要，但这唯独对那个孩子没有任何好处」
	RETURN 1
CASE "依頼報告不要"
	
	RETURN 0
ENDSELECT

;;＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝
;;依頼口上テンプレのテンプレ
;;==================================================
;;依頼口上・一般依頼Y：
;;==================================================
;@M_KOJO_IRAI_Y_KX(ROLE, SCENE, CLIENT_ID)
;#DIMS ROLE     ;角色の立場、依頼者かそうでないか
;#DIMS SCENE    ;セリフの表示されるタイミング
;#DIM  CLIENT_ID;依頼者IDだけ抜き出したもの
;;--------------------------------------------------
;;RETURN 0 の部分は共通の口上が表示されます
;;依頼ごとの口上を表示する部分は RETURN 0 を RETURN 1 にしてください
;;--------------------------------------------------
;SELECTCASE SCENE
;CASE "依頼提示時"
;	
;	RETURN 0
;CASE "依頼非受託時"
;	
;	RETURN 0
;CASE "依頼受託時"
;	
;	RETURN 0
;CASE "依頼確認時"
;	
;	RETURN 0
;CASE "依頼破棄時"
;	
;	RETURN 0
;CASE "依頼実行直前"
;	
;	RETURN 0
;CASE "依頼実行直後"
;	
;	RETURN 0
;CASE "成功報告時"
;;報酬：
;	
;	RETURN 0
;CASE "失敗報告時"
;	
;	RETURN 0
;;CASE "依頼報告不要"
;;＜この依頼にはありません＞
;;	RETURN 0
;ENDSELECT
