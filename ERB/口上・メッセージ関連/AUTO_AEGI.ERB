;帝口上を参考に作った口上のない角色でウフフ中呼び出す自动喘息函数
;口上持ちでも任意で台词に挟めるようにARGS次第でカッコ省略できるようにしてみた

@AUTO_AEGI(ARG,ARGS,ARG:1 = 0)
#DIM 喘ぎ强度
#DIM 喘ぎ回数

;シラフじゃないと駄目
SIF !SHIRAHU(ARG)
	RETURN 0
SIF !CFLAG:ARG:诶嘿嘿
	RETURN 0
SIF GROUPMATCH(SELECTCOM, 19, 20, 81, 88, 89)
	RETURN 0
SIF AUTO_AEGI_BLOCKED_ADD_CUSTOM()
	RETURN 0
喘ぎ强度 = AEGI_LEVEL(ARG)
SIF !喘ぎ强度
	RETURN 0
SIF ARG == RANDOM_CHARANUM
	SETCOLOR CFLAG:ARG:1000

SIF ARGS != "前カッコ省略" && ARGS != "カッコ省略"
	PRINT 「

SELECTCASE 喘ぎ强度
	CASE 1
		喘ぎ回数 = 2 + RAND:2
	CASE 2
		喘ぎ回数 = 2 + RAND:2 + RAND:3
	CASE 3
		喘ぎ回数 = 3 + RAND:2 + RAND:3 + RAND:3
	CASEELSE
		喘ぎ回数 = 3 + RAND:喘ぎ强度 + RAND:喘ぎ强度 + RAND:喘ぎ强度
ENDSELECT

FOR LOCAL,0,喘ぎ回数
	LOCALS:LOCAL = %AEGI_PATTERN(喘ぎ强度, ARG, ARG:1)%
	;前のと一绪だったら一度だけ再抽选
	WHILE LOCAL > 0 && LOCALS:LOCAL == LOCALS:(LOCAL - 1)
		LOCALS:LOCAL = %AEGI_PATTERN(喘ぎ强度, ARG, ARG:1)%
	WEND
	CALL HPH_PRINT,@"%LOCALS:LOCAL%"
	SIF !RAND:2 && 喘ぎ强度 <= 3
		PRINT …
	SIF 喘ぎ强度 >= 4 || (喘ぎ强度 == 3 && !RAND:4)
		CALL HPH_PRINT,"HPH"
	SIF LOCAL != 喘ぎ回数 - 1
		PRINTPLAIN  
NEXT

SIF ARGS != "后カッコ省略" && ARGS != "カッコ省略"
	PRINTL 」
SIF ARG == RANDOM_CHARANUM
	RESETCOLOR

;@AUTO_AEGI(ARG,ARGS)的函数版，去掉了颜色功能，可以用于表达式输出
;ARG:1 BIT= 0,省略前括号 BIT=1,省略后括号 ，与命令版不同，式中默认不产生括号
;ARG:2 指定模式 指定对某部位的娇喘，1~5=CVABM
@AEGI_F(ARG = -1 ,ARG:1 = 3 ,ARG:2 = 0)
#FUNCTIONS
#DIM 喘ぎ强度
#DIM 喘ぎ回数
#DIM CONST 省略前括号 = 1
#DIM CONST 省略后括号 = 2
#DIM CONST 省略括号 = 3
SIF ARG < 0
	ARG = TARGET
喘ぎ强度 = AEGI_LEVEL(ARG)
SIF !喘ぎ强度
	RETURNF 
RESULTS =

SIF ARG:1 != 省略前括号 && ARG:1 != 省略括号
	RESULTS += "「"

SELECTCASE 喘ぎ强度
	CASE 1
		喘ぎ回数 = 2 + RAND:2
	CASE 2
		喘ぎ回数 = 2 + RAND:2 + RAND:3
	CASE 3
		喘ぎ回数 = 3 + RAND:2 + RAND:3 + RAND:3
	CASEELSE
		喘ぎ回数 = 3 + RAND:喘ぎ强度 + RAND:喘ぎ强度 + RAND:喘ぎ强度
ENDSELECT

FOR LOCAL,0,喘ぎ回数
	LOCALS:LOCAL = %AEGI_PATTERN(喘ぎ强度, ARG, ARG:2)%
	;前のと一绪だったら一度だけ再抽选
	WHILE LOCAL > 0 && LOCALS:LOCAL == LOCALS:(LOCAL - 1)
		LOCALS:LOCAL = %AEGI_PATTERN(喘ぎ强度, ARG, ARG:2)%
	WEND
	RESULTS += LOCALS:LOCAL
	SIF !RAND:2 && 喘ぎ强度 <= 3
		RESULTS += "…"
	SIF 喘ぎ强度 >= 4 || (喘ぎ强度 == 3 && !RAND:4)
		RESULTS += "HPH"
	SIF LOCAL != 喘ぎ回数 - 1
		RESULTS += " "
NEXT

SIF ARG:1 != 省略后括号 && ARG:1 != 省略括号
	RESULTS += "」"
RETURNF RESULTS

@AEGI_LEVEL(ARG)
#FUNCTION
LOCAL = CUP:ARG:快Ｃ + CUP:ARG:快Ｖ + CUP:ARG:快Ａ + CUP:ARG:快Ｂ + CUP:ARG:快Ｍ

SELECTCASE LOCAL
	CASE 0
		RETURNF 0
	CASE IS < 2500
		RETURNF 1
	CASE IS < 5000
		RETURNF 2
	CASE IS < 10000
		RETURNF 3
	CASE IS < 30000
		RETURNF 4
	CASE IS < 50000
		RETURNF 5
	CASEELSE
		RETURNF 6
ENDSELECT


;バリエーションおよび喘ぎ强度と台词の对应状况は改善の余地があるだろう
;
;>まず是やらしくいじられてる场所をつぶやくようにしよう
;>对象のCUPを见るために参数を扩张
@AEGI_PATTERN(喘ぎ强度, ARG, ARG:1 = 0)
#FUNCTIONS
#DIM 喘ぎ强度
;2025年8月12日 新增指定模式:CVABM
SELECTCASE ARG:1
	CASE 1
		GOTO Cpt
	CASE 2
		GOTO Vpt
	CASE 3
		GOTO Apt
	CASE 4
		GOTO Bpt
	CASE 5
		GOTO Mpt
ENDSELECT
;部位つぶやき、とりあえず20%で（部位そのものをつぶやくとは言っていない）
;部位ごとのCUPを合计して乱数をとり、Ｃから顺に乱数が合计值以内かで部位を判定、ヒットすればその部位をつぶやく（喘ぎ强度と陷落系素質と部位感度を合わせて计算していいんだけど、それは先の话）
;部位陷落は感度5が条件なのを考えるともう少し分けつつ「感觉*30(最大180)+1d100」の结果で分岐させることでバリエーションが出るといいなぁ
IF TCVAR:ARG:强行 && 喘ぎ强度 < 3

ELSEIF RAND:100 < 20 && (CUP:ARG:快Ｃ + CUP:ARG:快Ｖ + CUP:ARG:快Ａ + CUP:ARG:快Ｂ + CUP:ARG:快Ｍ) 
	SELECTCASE RAND:(CUP:ARG:快Ｃ + CUP:ARG:快Ｖ + CUP:ARG:快Ａ + CUP:ARG:快Ｂ + CUP:ARG:快Ｍ)
	;CUPを合计して乱数を取る。これでCUPの值に应じて拾う概率に差が生まれる
	CASE IS < CUP:ARG:快Ｃ
		$Cpt ;クリ、肉棒どうしよう…（このあとに性别判定入れれば分岐は可能ではある）
		LOCAL = MIN(ABL:ARG:Ｃ感覚 * 20, 180) + RAND:100
		SIF CFLAG:ARG:自動喘息 != 2
			LOCAL = MIN(LOCAL, 150)
		SELECTCASE LOCAL
		;感觉＋乱数による分岐、下に行くほどアレです
		CASE 0 TO 80
			LOCALS = %TEXTR("啊…/呀/咿呀/嘶嗯/啊HPH～/呀HPH/咿呀HPH/嘶嗯HPH/达咩/达咩HPH/呀哒～/呀哒HPH/")%
		CASE 81 TO 150
			LOCALS = %TEXTR("豆豆HPH…/呜啊/唔啊/小豆豆/那里……/达咩/呀哒～/呀哒HPH/达咩HPH/小豆HPH…/呜啊HPH/唔啊HPH/小豆豆HPH/那里HPH……/")%
		CASE 151 TO 200
			LOCALS = %TEXTR("阴蒂/小豆/小豆豆/硬硬的/小穴/阴/达咩/呀哒～/呀哒HPH/达咩HPH/阴蒂HPH/小豆HPH/小豆豆HPH/硬硬的HPH/小穴HPH/豆豆HPH/")%
		CASEELSE
			LOCALS = %TEXTR("豆豆HPH……/黏黏的/小……/小豆豆～/阴蒂/小豆豆…/达咩/呀哒～/呀哒HPH/豆豆HPH……/黏黏的HPH/小HPH……/小豆豆HPH～/阴蒂HPH/小豆豆HPH…/达咩HPH/")%
		ENDSELECT

	CASE IS < CUP:ARG:快Ｃ + CUP:ARG:快Ｖ
		$Vpt
		LOCAL = MIN(ABL:ARG:Ｖ感覚 * 20, 180) + RAND:100
		SIF CFLAG:ARG:自動喘息 != 2
			LOCAL = MIN(LOCAL, 150)
		;膣、肉オナホまで言わせるのは稍微违うと思ったので控えました
		SELECTCASE LOCAL
		;感觉＋乱数による分岐、下に行くほどアレです
		CASE 0 TO 80
			LOCALS = %TEXTR("呜…/咕…/呀/咿呀/那里/达咩/呀哒～/呀哒HPH/达咩HPH/呜HPH…/咕HPH…/呀HPH/咿呀HPH/那里HPH/")%
		CASE 81 TO 150
			LOCALS = %TEXTR("里面…/好硬/蹭到了/好热/那个/在里面/肚子里面/达咩/呀哒～/呀哒HPH/达咩HPH/里面HPH…/好硬HPH/蹭到了HPH/好热HPH/那个HPH/在里面HPH/肚子里面HPH/")%
		CASE 151 TO 200
				LOCALS = %TEXTR("小……穴/阴道/子宫/感觉好像/里面/好…好深/达咩/呀哒～/呀哒HPH/达咩HPH/小……穴HPH/阴道HPH/子宫HPH/感觉好像HPH/里面HPH/好…好深HPH/")%
		CASEELSE
				LOCALS = %TEXTR("喵呀/稀饭/咕哩咕咿/咕啾咕啾/喜欢～/好像/达咩/呀哒～/呀哒HPH/达咩HPH/喵呀HPH/稀饭HPH/咕哩咕咿HPH/咕啾咕啾HPH/喜欢HPH～/好像HPH/")%
		ENDSELECT

	CASE IS < CUP:ARG:快Ｃ + CUP:ARG:快Ｖ + CUP:ARG:快Ａ
		$Apt
		;あなぅ、多分一番はっちゃけられる场所だと思う（のであとは任せた）
		LOCAL = MIN(ABL:ARG:Ａ感覚 * 20, 180) + RAND:100
		SIF CFLAG:ARG:自動喘息 != 2
			LOCAL = MIN(LOCAL, 150)
		SELECTCASE LOCAL
		;感觉＋乱数による分岐、下に行くほどアレです
		CASE 0 TO 80
			LOCALS = %TEXTR("嗯咕…啊咕…/咿呀/咿呀嗯/咕/那里/达咩/呀哒～/呀哒HPH/达咩HPH/嗯咕HPH…啊咕HPH…/咿呀HPH/咿呀嗯HPH/咕HPH/那里HPH/")%
		CASE 81 TO 150
			LOCALS = %TEXTR("屁股/屁/那里/不对/达咩/呀哒～/呀哒HPH/达咩HPH/屁股HPH/屁HPH/那里HPH/不对HPH/")%
		CASE 151 TO 200
			LOCALS = %TEXTR("菊穴/屁股/菊/很深的/里面/穴/咕啵咕啵/达咩/呀哒～/呀哒HPH/达咩HPH/菊穴HPH/屁股HPH/菊HPH/很深的HPH/里面HPH/穴HPH/咕啵咕啵HPH/")%
		CASEELSE
			LOCALS = %TEXTR("别搅动呀/穴～/咕啾咕啾的/咕哩咕哩的/屁穴/菊穴/感觉/达咩/呀哒～/呀哒HPH/达咩HPH/插错地方了HPH/穴HPH～/咕啾咕啾的HPH/咕哩咕哩的HPH/屁穴HPH/菊穴HPH/感觉HPH/")%
		ENDSELECT

	CASE IS < CUP:ARG:快Ｃ + CUP:ARG:快Ｖ + CUP:ARG:快Ａ + CUP:ARG:快Ｂ
		$Bpt
		;胸、いろいろかけると思ったらない人のことを忘れてた(ﾋﾟﾁｭｰﾝ)
		LOCAL = MIN(ABL:ARG:Ｂ感覚 * 20, 180) + RAND:100
		SIF CFLAG:ARG:自動喘息 != 2
			LOCAL = MIN(LOCAL, 150)
		SELECTCASE LOCAL
		;感觉＋乱数による分岐、下に行くほどアレです
		CASE 0 TO 80
			LOCALS = %TEXTR("哈…/咿嗯…/咿呀/呀嗯/咿呦/达咩/呀哒～/呀哒HPH/达咩HPH/哈HPH…/咿嗯HPH…/咿呀HPH/呀嗯HPH/咿呦HPH/")%
		CASE 81 TO 150
			LOCALS = %TEXTR("胸部/乳头/咕啾的一下/达咩/呀哒～/呀哒HPH/达咩HPH/胸部HPH/乳头HPH/咕啾的一下HPH/")%
		CASE 151 TO 200
			LOCALS = %TEXTR("胸部/乳房/奶子/最前面/咕哩咕哩地/达咩/呀哒～/呀哒HPH/达咩HPH/胸部HPH/乳房HPH/奶子HPH/最前面HPH/咕哩咕哩地HPH/")%
		CASEELSE
			LOCALS = %TEXTR("胸部/乳房/奶子/小樱桃/咕哩咕哩地/硬硬的/咕哩地/达咩/呀哒～/呀哒HPH/达咩HPH/胸部HPH/乳房HPH/奶子HPH/小樱桃HPH/咕哩咕哩地HPH/硬硬的HPH/咕哩地HPH/")%
		ENDSELECT

	CASEELSE
		$Mpt
		LOCAL = MIN(ABL:ARG:Ｍ感覚 * 20, 180) + RAND:100
		SIF CFLAG:ARG:自動喘息 != 2
			LOCAL = MIN(LOCAL, 150)
		;おくち、实は死に分岐的可能性が高いという。指令にゆびちゅぱください
		SELECTCASE LOCAL
		;感觉＋乱数による分岐、下に行くほどアレです
		CASE 0 TO 80
			LOCALS = %TEXTR("嗯…/嗯呜…/嗯卟/咿呀/嗯呀/达咩/呀哒～/呀哒HPH/达咩HPH/嗯HPH…/嗯呜HPH…/嗯卟HPH/咿呀HPH/嗯呀HPH/")%
		CASE 81 TO 150
			LOCALS = %TEXTR("嘴/嘴巴/舔/啾噗/哦卟/啾卟/达咩/呀哒～/呀哒HPH/达咩HPH/嘴HPH/嘴巴HPH/舔HPH/啾噗HPH/哦卟HPH/啾卟HPH/")%
		CASE 151 TO 200
			LOCALS = %TEXTR("嘴穴/下面/舔舔/里面/咕啾/咕哩咕哩地/达咩/呀哒～/呀哒HPH/达咩HPH/嘴穴HPH/下面HPH/舔舔HPH/里面HPH/咕啾HPH/咕哩咕哩地HPH/")%
		CASEELSE
			LOCALS = %TEXTR("嘴巴/口穴/舔咕哩/嘴穴/啾噜噜/啾噗卟咕啾/达咩/呀哒～/呀哒HPH/达咩HPH/嘴巴HPH/口穴HPH/舔咕哩HPH/嘴穴HPH/啾噜噜HPH/啾噗卟咕啾HPH/")%
		ENDSELECT

	ENDSELECT
	RETURNF LOCALS
ENDIF
IF TCVAR:ARG:强行 && (喘ぎ强度 < 3 || (喘ぎ强度 == 3 && RAND:4))
	IF TALENT:ARG:胆量 > 0 || TALENT:ARG:応答 > 0 || TALENT:ARG:自尊心 > 0
		LOCALS = %TEXTR("不要啊…/真差劲/已经足够了吧…/真恶心…/不要碰我…/去死/可恶/咕…/不HPH要啊…/真HPH差劲/已经HPH足够了吧…/真HPH恶心…/不要HPH碰我…/去死HPH/可恶HPH/咕…HPH/")%
		SIF !RAND:10 && !TALENT:ARG:人类
			LOCALS = 人类什么的
	ELSE
		LOCALS = %TEXTR("呜呜呜…/抽泣…/不要…/不要啊…/讨厌啊…/请原谅我…/讨厌/咿咕/呜呜呜…HPH/抽泣…HPH/不要…HPH/不要啊…HPH/讨厌啊…HPH/请原谅我…HPH/讨厌HPH/咿咕HPH/")%
	ENDIF
ELSE
;通常喘ぎ
SELECTCASE 喘ぎ强度
	CASE 1
		LOCALS = %TEXTR("啊…/嗯唔…/嗯…/呜嗯…/哈啊…/啊…HPH/嗯唔…HPH/嗯…HPH/呜嗯…HPH/哈啊…HPH/")%
	CASE 2
		LOCALS = %TEXTR("呀啊/哈/呼啊啊/呜啊/呜嗯/咕呼/呼唔/啊/啊啊/啊啊啊/啊嗯/哈啊/哈/咿啊/咿嗯/咿呀/嗯嗯/哈呜/嗯哈/嗯咕/呀啊HPH/哈HPH/呼啊啊HPH/呜啊HPH/呜嗯HPH/咕呼HPH/呼唔HPH/啊HPH/啊啊HPH/啊啊啊HPH/啊嗯HPH/哈啊HPH/哈HPH/咿啊HPH/咿嗯HPH/咿呀HPH/嗯嗯HPH/哈呜HPH/嗯哈HPH/嗯咕HPH/")%
	CASEELSE
		IF RAND:喘ぎ强度 >= 3 && CFLAG:ARG:自動喘息 == 2
			LOCALS = %TEXTR("啊嗯/啊啊啊～～/呜啊/呜啊啊/喔/呜喔/喔嗯～～/喔哈啊/哈喔/喔～～/嗯喔/喔呜/哈咿/嗯啊/啊嗯啊啊/咕嘎/啊嘎啊啊/嗯～～/嗯呜喔/啊HPH嗯/啊HPH啊啊～～/呜HPH啊/呜啊HPH啊/喔HPH/呜HPH喔/喔HPH嗯～～/喔HPH哈啊/哈喔HPH/喔HPH～～/嗯喔HPH/喔HPH呜/哈咿HPH/嗯啊HPH/啊嗯啊HPH啊/咕嘎HPH/啊嘎啊啊HPH/嗯HPH～～/嗯HPH呜喔/")%
		ELSEIF RAND:喘ぎ强度 >= 2
			LOCALS = %TEXTR("喔/喔喔/咿哈咿/咿嗯嗯/啊咿嗯/哈咿/好厉害/好腻害/哈啊嗯/～～/咿啊啊嗯/嗯嗯/要变得奇怪了/喔HPH/喔喔HPH/咿哈咿HPH/咿嗯嗯HPH/啊咿嗯HPH/哈咿HPH/好厉害HPH/好腻害HPH/哈啊嗯HPH/～～HPH/咿啊啊HPH嗯/嗯嗯HPH/要变得奇怪了HPH/")%
		ELSEIF !RAND:3
			LOCALS = %TEXTR("哈呜/哈嗯/咕嗯/啊啊/咿呀嗯/哈啊/啊/哈呜HPH/哈嗯HPH/咕嗯HPH/啊啊HPH/咿呀嗯HPH/哈啊HPH/啊HPH/")%
		ELSEIF !RAND:2
			LOCALS = %TEXTR("好棒/更多/咿嗯/咿ー/嗯哈啊/啊啊嗯/好激烈/好舒服/好棒HPH/更多HPH/咿嗯HPH/咿ーHPH/嗯哈啊HPH/啊啊嗯HPH/好激烈HPH/好舒服HPH/")%
		ELSE
			LOCALS = %TEXTR("呀啊/嗯啊/嗯啊嗯/呜ー/啊/啊ー/啊啊/啊嗯/哈啊/哈ー/咿嗯/咿呀/嗯嗯/哈呜/嗯咕/呀啊HPH/嗯啊HPH/嗯啊嗯HPH/呜ーHPH/啊HPH/啊ーHPH/啊啊HPH/啊嗯HPH/哈啊HPH/哈ーHPH/咿嗯HPH/咿呀HPH/嗯嗯HPH/哈呜HPH/嗯咕HPH/")%
		ENDIF
ENDSELECT
ENDIF
;随机で「っ」をカタ卡娜にすることでバリエーションが增えたように错觉させる姑息な处理
;促音，对中文无用
;IF !RAND:4 && 喘ぎ强度 >= 3
;	LOCALS = %REPLACE(@"%LOCALS%","啊","啊")%
;	LOCALS = %REPLACE(@"%LOCALS%","嗯","嗯")%
;ENDIF
RETURNF LOCALS