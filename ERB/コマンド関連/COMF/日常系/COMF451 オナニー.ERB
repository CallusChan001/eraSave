;-------------------------------------------------
;自慰
;日常系指令、レベル1
;-------------------------------------------------
@COM451
#DIM C_ID
#DIM AMT
IF TARGET && (!EXHIBITIONIST_DIARY || GETBIT(TALENT:MASTER:性別, 1))
	PRINTFORMW 自慰的时候、必须是谁也不能打扰的 自由和救赎的 独自一人安静祥和的……
	RETURN -1
ENDIF
IF EXHIBITIONIST_DIARY && GETBIT(TALENT:MASTER:性別, 0) && !COM_ABLE_EXHIBITIONIST_DIARY_451()
	PRINTFORMW 现在这个玩法可能还是太大胆了……
	RETURN -1
ENDIF
SIF CFLAG:MASTER:現在位置 != CFLAG:MASTER:初期位置
	JUMP EXHIBITIONIST_DIARY_451
PRINTFORML 脑海中想起了谁？
DRAWLINE
FOR LOCAL,1,CHARANUM
	IF !IS_NAMED(LOCAL) || !CFLAG:LOCAL:面識
		CONTINUE
	ENDIF
	PRINTFORMLC [{LOCAL, 3}] %CALLNAME:LOCAL%
NEXT
PRINTL
DRAWLINE
;PRINTL [999] 谁也不去想 [1000] 放弃
PRINTFORML [999] 谁也不去想 [1000] 放弃 %EXHIBITIONIST_DIARY && GETBIT(TALENT:MASTER:性別, 0) ? "[2000] 你小姐的露出日记" # ""%
INPUT
C_ID = RESULT
SELECTCASE C_ID
	CASE 1 TO CHARANUM
		IF 自机立绘开关
			CALL PRINT_FACE_PLAYER, MASTER, "発情", "服", "", ""
			PRINTFORMDW 「%TEXTR("既然如此/这样的话/果然")%...」
			CALL PRINT_FACE_PLAYER, MASTER, "自慰", "裸", "", ""
			PRINTFORMDL 「%TEXTR("啊...嗯...啊/咕...呜.../噗...呜呜")%❤」
			PRINTFORMDW 「%CALLNAME:C_ID%❤」
		ENDIF
		CALL PRINT_FACE, C_ID, "発情", "裸", "", ""
		PRINTFORML %CALLNAME:MASTER%想象着%CALLNAME:C_ID%处理了性欲
	CASE 999
		IF 自机立绘开关
			CALL PRINT_FACE_PLAYER, MASTER, "発情", "服", "", ""
			PRINTFORMDW 「%TEXTR("既然如此/这样的话/果然")%...」
			CALL PRINT_FACE_PLAYER, MASTER, "自慰", "裸", "", ""
			PRINTFORMDL 「%TEXTR("啊...嗯...啊/咕...呜.../噗...呜呜")%❤」
		ENDIF
		IF GETBIT(J飞机杯Mods, 2) && RAND:2
			PRINTW ………
			PRINTW %CALLNAME:MASTER%渐渐感到心痒难耐，于是决定把脑海中想到的荷取当作自慰的对象……
			C_ID = 51
		ELSE
			PRINTFORML %CALLNAME:MASTER%思考着%TEXTR("天体的运行/山川草木/生老病死")%处理了性欲
		ENDIF
	CASE 2000
		JUMP EXHIBITIONIST_DIARY_451
	CASEELSE
		RETURN -1
ENDSELECT
AMT = 50 + RAND:51

;オナホ構造改革
IF GETBIT(J飞机杯Mods, 0)
	PRINTW 用改造过的飞机杯勤奋地自宅发电……
	AMT *= 2
ENDIF

;魔法飞机杯
IF GETBIT(J飞机杯Mods, 2) && INRANGE(C_ID,1,CHARANUM)
	PRINTL 用魔改过的飞机杯勤奋地自宅发电……
	PRINTFORMW 魔法飞机杯渐渐地变化成了%CALLNAME:MASTER%想象出的%CALLNAME:C_ID%的小穴那样了！
	AMT *= 4
ENDIF

;奇迹飞机杯
IF GETBIT(J飞机杯Mods, 3) && INRANGE(C_ID,1,CHARANUM)
	PRINTL 用呼唤奇迹的飞机杯勤奋地自宅发电……
	PRINTFORMW 奇迹飞机杯与%CALLNAME:MASTER%想象的%CALLNAME:C_ID%的膣内连接起来了！
	CALL PRINT_FACE, C_ID, "发情", "裸", ""
	PRINTFORML %CALLNAME:MASTER%通过飞机杯尽情享受了真正的%CALLNAME:C_ID%小穴的触感……
	PRINTFORMW 远在别处的%CALLNAME:C_ID%在不明所以的情况下被虚幻的肉棒玩弄一番！
	SIF TALENT:C_ID:0 ==1
		PRINTFORML 毕竟只是通过飞机杯进行的奇迹性行为，实际上并没有夺走%CALLNAME:C_ID%的处女之身，
	PRINTFORMW %CALLNAME:MASTER%在尽情享受了%CALLNAME:C_ID%的小穴飞机杯之后，抵在最深处完成了中出射精！
	EXP:C_ID:1 += RAND:10 + 1
	EXP:C_ID:6 += RAND:10 + 1
	AMT *= 8
ENDIF

;没长几把的你小姐是怎么射精的？
IF GETBIT(TALENT:MASTER:性別, 1)
	IF TALENT:MASTER:濃厚精液
		AMT *= 2
		PRINTFORMW ……{AMT}份量的浓厚精液出来了
	ELSE
		PRINTFORMW ……{AMT}份量的精液出来了
	ENDIF
	IF GETBIT(J飞机杯Mods, 1)
		TFLAG:700 += AMT
		PRINTFORMW 飞机杯的储液罐里积攒了{TFLAG:700}的精液……
		IF TFLAG:700 >= 1000 && GETBIT(J飞机杯Mods, 2)
			PRINTL
			PRINTW 那时，发生了不可思议的事情……
			PRINTFORML 气温、风向、湿度、大气压、星曜、月相、行星排列、魔法、飞机杯积攒的精液和时间停止能力等等……创造了奇迹！
			PRINTW 魔法飞机杯进化成了『奇迹飞机杯』！！
			BASE:MASTER:8 = 0
			TFLAG:700 = 0
			SETBIT J飞机杯Mods, 3
		ELSEIF TFLAG:700 >= 1000 && !GETBIT(J飞机杯Mods, 2)
			PRINTL
			PRINTW 那时，发生了不可思议的事情……
			PRINTFORML 气温、风向、湿度、大气压、星曜、月相、行星排列……以及最重要的，%CALLNAME:MASTER%积蓄已久的性欲……
			PRINTFORMW 各种条件奇迹般组合的结果，%CALLNAME:MASTER%射出的精液带着生命的辉光结晶化了！
			CALL COLORMESSAGE("独占爱欲的奇迹之石", C_D_PINK, 0, 1)
			PRINTFORMW 入手了！！
			TFLAG:700 = 0
			ITEM:530 += 1
		ENDIF
	ELSEIF GETBIT(J飞机杯Mods, 3)
		TFLAG:700 += AMT
	ENDIF

	;奇迹飞机杯
	IF GETBIT(J飞机杯Mods, 3) && INRANGE(C_ID,1,CHARANUM) && TFLAG:700 > 0
		PRINTFORML %CALLNAME:MASTER%射出的精液从飞机杯内被转移到了%CALLNAME:C_ID%的小穴里！
		EX:C_ID:14 += AMT
		PRINTFORMW %CALLNAME:C_ID%的小穴被灌注了{EX:C_ID:14}份量的精液……
	ENDIF
ELSE
	PRINTFORMW ……{AMT}份量的爱液出来了
ENDIF
BASE:MASTER:精力 -= AMT
SIF BASE:MASTER:精力 < 0
	BASE:MASTER:精力 = 0
DOWNBASE:MASTER:気力 = 100

TIME += 20
RETURN 1

;等待
@COM_ABLE451
;ショップ画面では不可
SIF !TFLAG:100
	RETURN 0
;一括管理
SIF GLOBAL_COMABLE(451)
	RETURN RESULT
;気力0では不可
SIF BASE:MASTER:気力 <= 0
	RETURN 0
;精力0では不可
SIF BASE:MASTER:精力 <= 0
	RETURN 0
;ウフフ中は不可
SIF CFLAG:诶嘿嘿
	RETURN 0
;你小姐的露出日记
SIF EXHIBITIONIST_DIARY && GETBIT(TALENT:MASTER:性別, 0)
	RETURN 1
;停止中は不可
SIF FLAG:70 == 1
	RETURN 0
;私室以外では不可
SIF CFLAG:MASTER:現在位置 != CFLAG:MASTER:初期位置
	RETURN 0
RETURN 1
