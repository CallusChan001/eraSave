;※※※※※※※※※※※※※※※※※※※※※※※※※
;日常系指令
;一些翻修者353想说的话：
;与EVENT系模板存在重合内容的指令，推荐优先去看EVENT系模板。（呜呜呜）
;如果对模板中的说明仍有疑惑，或者对模板有更进一步的要求，欢迎来茶群狠狠鞭挞353。（呜呜呜）
;模板给出的差分内容并不是全都要填的，写自己想写的就好，不要的地方可以直接删掉。
;口上内容并不是非要向地文内容靠齐的，如果不喜欢地文，可以直接隐藏地文，随心所欲地写自己的内容。更甚者可以考虑写自己的替换地文或者CUSTOMCOM。
;※※※※※※※※※※※※※※※※※※※※※※※※※
;==================================================
;300,会话
;TFLAG:193(1=大成功 0=成功 -1=失败 -2=大失败（ABL:教養 > ABL:MASTER:教養 + 3 && FLAG:催眠強度 <= 50））
;TCVAR:302(0=可以会话 1>=非恋慕时不能会话) 表现为：虽然想向TARGET搭话可是不知道该说些什么。四周弥漫着尴尬的气氛…
; 每次会话时，会根据TFLAG:193的成否、MASTER的会话技能、催眠强度对TCVAR:301（会话累积值）进行加值，如果是约会中则加值更少
; 当TCVAR:301 > 100时，会使TCVAR:302（会话不能）为真。此时必须使TCVAR:301随时间归零后，会话才会有成功的可能，否则，在此期间的会话指令将会一直失败
;TCVAR:烂醉(没有大成功的情况，1=通常成功or大失败)
; 由于内容过多，需要请参考地文：ERB\口上・メッセージ関連\EVENT_MESSAGE_COM300.ERB
;==================================================
@M_KOJO_XXX_SUCCESS_COM_KX_300
;成否判定
;TFLAG:192（-2=强制中止指令、-1＝强制失败、0=根据COM文件决定、1=强制成功or大成功）
TFLAG:192 = 0
;若口上侧无管理则TCVAR:20（COUNTER触发）时强制成功
;若MARK:反発刻印 >= 3则指令强制失败，无视是否陷落
;==================================================
;可选项：关于地文描述的显示设置
;如果返回0，则地文与口上都会显示；如果返回1，则地文会隐藏，口上会显示；如果返回2，则地文会显示，口上会隐藏；如果返回3则均会被隐藏
;==================================================
@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_300
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_300
;指令共通MESSAGE(TRAIN_MESSAGE) 
;4.920之前的指令地文，是使用函数TRAIN_MESSAGE来控制的
;如果删除它，例如「TARGET和你无聊地说着话」这种叙述将不显示，且您的口上不会自动启用口上色
;下面是调用口上的主函数
CALL M_KOJO_XXX_MESSAGE_COM_KX_300_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_300_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	;请在这个区间里输入口上的输出内容

	;会话累积值达到阈值，无法会话，想向TARGET搭话可是不知道该说些什么。四周弥漫着尴尬的气氛…
	IF TCVAR:302	
		PRINTFORMW
	;以下的差分都可以嵌套TFLAG:193的情况

	;烂醉，无法会话，烂醉的TARGET口齿不清
	ELSEIF TCVAR:145	
		PRINTFORMW
	;愤怒值满，不想说话
	ELSEIF CFLAG:318 > 0	
		PRINTFORMW
	;参加宴会中，对酌相谈
	ELSEIF CFLAG:20 > 0 && CFLAG:350 == 49	
		PRINTFORMW
	;陪睡，在被子里说枕边话	
	ELSEIF CFLAG:334	
		PRINTFORMW
	;约会中，可以更亲密些	
	ELSEIF CHK_DATENOW(CFLAG:12)		
		PRINTFORMW
	ENDIF
ENDIF
RETURN 1
;==================================================
;301,泡茶
;TFLAG:193(1=大成功（一起度过了快乐的时光） 0=成功 -1=失败（不合TARGET的口味）)
; 当MASTER和美铃的亲密达到7级后，大成功时会有1/5的概率模仿美铃泡茶的样子
; GETBIT(TCVAR:MASTER:特別的茶水, 0)表示使用了ITEM红茶叶，本次泡的是红茶，会使一部分角色获得的SOURCE乘以更高的倍率。可惜的是在COMF中会立即CLEARBIT，口上侧无法直接检测
;==================================================
@M_KOJO_XXX_SUCCESS_COM_KX_301
;成否判定
;TFLAG:192（-2=强制中止指令、-1＝强制失败、0=根据COM文件决定、1=强制成功or大成功）
TFLAG:192 = 0
;注：若口上侧无管理则TCVAR:20（COUNTER触发）时强制成功
; 指令CD中、睡眠中、陪睡中、在浴场、宴会中、约会中不在待客室、在外出（非主地图）时，TARGET亲密 < 3，均不可实行指令
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_301
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_301
CALL M_KOJO_XXX_MESSAGE_COM_KX_301_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_301_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	SELECTCASE TFLAG:193
		;大成功，一起度过了快乐的时光
		CASE 1	
			PRINTFORMW
		;失败，不合TARGET的口味
		CASE -1	
			PRINTFORMW
		CASEELSE
			PRINTFORMW
	ENDSELECT	
ENDIF
RETURN 1
;==================================================
;302,身体接触
;TFLAG:193(1=大成功 0=成功 -1=失败)
; 不处于约会时，执行指令会使指令进入CD
;==================================================
@M_KOJO_XXX_SUCCESS_COM_KX_302
;成否判定
;TFLAG:192（-2=强制中止指令、-1＝强制失败、0=根据COM文件决定、1=强制成功or大成功）
TFLAG:192 = 0
;若口上侧无管理则TCVAR:20（COUNTER触发）时强制成功
;非约会时指令处于CD中、睡眠中、陪睡中、工作中均不可实行指令
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_302
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_302
CALL M_KOJO_XXX_MESSAGE_COM_KX_302_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_302_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	;在浴室，相互搓背
	IF BATHCHECK(CFLAG:MASTER:300) && IN_HOME(CFLAG:MASTER:300)
		PRINTFORMW
	;约会中
	ELSEIF CHK_DATENOW(CFLAG:12) && CFLAG:MASTER:300 != OMANEKIBEYA()
		PRINTFORMW
	;参加宴会中
	ELSEIF CFLAG:TARGET:350 == 49
		PRINTFORMW
	;其他
	ELSE
		
	ENDIF
ENDIF
RETURN 1
;==================================================
;303,道歉
;TFLAG:193(2=送上点心盒后成功 1=大成功 0=成功 -1=失败 -2=送上点心盒后失败)
;如果TARGET的TALENT:胆量 < 0则哭泣，反之则生气
;==================================================
@M_KOJO_XXX_SUCCESS_COM_KX_303
;成否判定
;TFLAG:192（-2=强制中止指令、-1＝强制失败、0=根据COM文件决定、1=强制成功or大成功）
TFLAG:192 = 0
;大成功清空愤怒值，普通成功愤怒减半
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_303
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_303
CALL M_KOJO_XXX_MESSAGE_COM_KX_303_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_303_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	SELECTCASE TFLAG:193
		;送上点心盒后成功，表示过去的事情就付诸流水吧
		CASE 2
			PRINTFORMW
		;大成功，笑着给予了原谅
		CASE 1
			PRINTFORMW
		;成功，无可奈何地原谅
		CASE 0
			PRINTFORMW
		;失败，还在哭泣/生气
		CASE -1
			PRINTFORMW
		;送上点心盒后失败，没有收下点心盒，还不想原谅
		CASE -2
			PRINTFORMW
	ENDSELECT	
ENDIF
RETURN 1
;==================================================
;304,帮忙干活
;TFLAG:193(1=大成功 0=成功 -1=失败)
;成功率根据工作对应的技能决定
;CFLAG:350(工作内容请参考 ERB\MOVEMENTS\JOB_仕事内容.ERB ，时间/日期不同，角色的工作也可能发生变化
;TCVAR:315（=1 没法帮忙，如映姬的审判， =2 代表帮忙也不会加快进度的工作， 如椛的看守）
;CFLAG:350 == 41（会话） || 46（玩耍）或者 TCVAR:315 == 2 时，在 时间停止状态下不能帮忙
;==================================================
@M_KOJO_XXX_SUCCESS_COM_KX_304
;成否判定
;TFLAG:192（-2=强制中止指令、-1＝强制失败、0=根据COM文件决定、1=强制成功or大成功）
TFLAG:192 = 0
; 如果工作是参加宴会、TCVAR:315 == 1（没法帮忙）、约会中，均不可实行指令
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_304
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_304
CALL M_KOJO_XXX_MESSAGE_COM_KX_304_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_304_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	;时间停止中
	IF FLAG:70
		; 请一定先明白口上的角色是什么工作，不对应的条件请直接删去

		;失败，与丝毫动弹不得的TARGET玩耍
		IF CFLAG:350 == 46
			PRINTFORMW
		;失败，不是时间停止时能做的工作，没法帮忙
		ELSEIF CFLAG:350 == 41 || TCVAR:315 == 2
			PRINTFORMW
		;TFLAG:193 == 1，顺利地帮忙了；-1，不是很顺利
		ELSE
			
		ENDIF
	;通常
	ELSE
		;与TARGET玩耍
		IF CFLAG:350 == 46
			PRINTFORMW
		;TFLAG:193 == 1，顺利地帮忙了；-1，没能帮上忙
		ELSE
			
		ENDIF
	ENDIF
ENDIF
RETURN 1
;==================================================
;305,索求膝枕（MASTER向TARGET索求膝枕，枕在TARGET腿上）
;TFLAG:193(-5=MASTER的体型比TARGET大太多了 1=大成功 0=成功 -1=失败)(-5以外没有地文的差分)
;ABL:親密(> 5，一边看着MASTER的脸一边温柔的抚摸起来… > 2，温柔地抚摸着MASTER的头… 以下，紧绷着身体一动不动…)
;如果TALENT:妊娠，则贴在肚子上听动静
; 该指令有CD
;==================================================
@M_KOJO_XXX_SUCCESS_COM_KX_305
;成否判定
;TFLAG:192（-2=强制中止指令、-1＝强制失败、0=根据COM文件决定、1=强制成功or大成功）
TFLAG:192 = 0
; 如果TALENT:MASTER:体型 > TALENT:体型 + 2，则指令会强制失败，使TFLAG:193 = -5，并大量消减TARGET的体力与气力，减少好感度
; 亲热强度<1、不在室内、在浴室、角色工作中、指令CD中均不可实行指令
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_305
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_305
CALL M_KOJO_XXX_MESSAGE_COM_KX_305_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_305_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	;MASTER的体型比TARGET大太多了，TARGET被压得很不舒服
	IF TFLAG:193 == -5
		PRINTFORMW
	ELSE
		;妊娠中，贴在肚子上听动静
		IF TALENT:153
			PRINTFORMW
		;亲密大于5，一边看着MASTER的脸一边温柔的抚摸起来
		ELSEIF ABL:9 > 5	;
			PRINTFORMW
		; 亲密大于2，温柔地抚摸着MASTER的头	
		ELSEIF ABL:9 > 2
			PRINTFORMW
		; 亲密不足，紧绷着身体一动不动	
		ELSE

		ENDIF
	ENDIF	
ENDIF
RETURN 1
;==================================================
;306,撫摸肚子（地文内的描述更像是子宫按摩）
;TFLAG:193(1=大成功 0=成功 -1=失败)
;ABL:親密 > 5 && TALENT:妊娠时，会使TFLAG:193 = 1,ABL:親密 <= 5则TFLAG:193 = -1
; 因此这个指令没有TFLAG:192来进行控制
; 亲热强度< 1，工作中，不可实行指令
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_306
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_306
CALL M_KOJO_XXX_MESSAGE_COM_KX_306_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_306_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	;时间停止中
	IF FLAG:70
	;通常
	ELSE
		SELECTCASE TFLAG:193
			;大成功（必然是TARGET妊娠中），充满爱意地将两人的手重叠
			CASE 1
				PRINTFORMW
			;失败，亲密不足，流露出明显的不愉快
			CASE -1
				PRINTFORMW
			;恋慕，被触及子宫；以下，好像很诧异
			CASEELSE
				
		ENDSELECT
	ENDIF
ENDIF
RETURN 1
;==================================================
;307,捏臉蛋（其实是有点疼的，会加一点苦痛和反感的SOURCE）
;TFLAG:193(1=大成功 0=成功 -1=失败)
	;TALENT:恋慕(一边露出害羞的表情一边做出反击…
	;ABL:親密 > 5，也怯生生的把手伸向了MASTER的脸…
	;ABL:従順 >= 5，一边露出害羞的表情一边任MASTER为所欲为…
	;其他则甩开手
;==================================================
@M_KOJO_XXX_SUCCESS_COM_KX_307
;成否判定
;TFLAG:192（-2=强制中止指令、-1＝强制失败、0=根据COM文件决定、1=强制成功or大成功）
TFLAG:192 = 0
;注意：若口上侧无管理，则拥抱模式下必定成功
; 亲热强度<1、工作中、约会中不在待客室均不可实行指令
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_307
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_307
CALL M_KOJO_XXX_MESSAGE_COM_KX_307_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_307_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	;时间停止中
	IF FLAG:70
	;睡眠中，一脸不爽地背过脸去
	ELSEIF CFLAG:313
		PRINTFORMW
	;通常或者陪睡中
	ELSE
		;恋慕，一边露出害羞的表情一边做出反击
		IF TALENT:3
			PRINTFORMW
		;亲密大于5，也怯生生的把手伸向了MASTER的脸	
		ELSEIF ABL:9 > 5
			PRINTFORMW
		;顺从大于5，一边露出害羞的表情一边任MASTER为所欲为
		ELSEIF ABL:10 >= 5 
			PRINTFORMW
		;其他，甩开手
		ELSE

		ENDIF
	ENDIF
ENDIF
RETURN 1
;==================================================
;308,捅脸颊
;陪睡/睡眠时恶作剧限定指令，不需要考虑其他差分了
;TFLAG:193(1=大成功 0=成功 -1=失败,)
;==================================================
@M_KOJO_XXX_SUCCESS_COM_KX_308
;成否判定
;TFLAG:192(-2=强制中止指令、-1＝强制失败、0=根据COM文件决定、1=强制成功or大成功
TFLAG:192 = 0
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_308
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_308
CALL M_KOJO_XXX_MESSAGE_COM_KX_308_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_308_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	;睡眠时恶作剧
	IF CFLAG:313
	;TFLAG:193 == 1，露出微笑；-1，不爽地背过脸
	;陪睡中
	ELSE
	;TFLAG:193 == 1，笑嘻嘻地回击；-1，嘟着脸甩开手
	ENDIF
ENDIF
RETURN 1
;==================================================
;309,摸头
;TFLAG:193(1=大成功 0=成功 -1=失败)
;ABL:親密(5以上=露出害羞的表情， 反之红着脸甩开手
; 该指令有CD
;==================================================
@M_KOJO_XXX_SUCCESS_COM_KX_309
;成否判定
;TFLAG:192(-2=强制中止指令、-1＝强制失败、0=根据COM文件决定、1=强制成功or大成功
TFLAG:192 = 0
;注意：若口上侧无管理，则拥抱模式下必定成功
; 亲热强度 < 1、眠姦中、工作中、指令CD中而不在陪睡/恶作剧状态，均不可实行指令
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_309
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_309
CALL M_KOJO_XXX_MESSAGE_COM_KX_309_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_309_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	;时间停止中
	IF FLAG:70
	;睡眠中，ABL:親密 > 5，露出笑容；<= 5，毫无反应
	ELSEIF CFLAG:313
		PRINTFORMW
	;通常
	ELSE
		SELECTCASE TFLAG:193
			;大成功，露出放松的表情眯起了眼睛
			CASE 1
				PRINTFORMW
			;失败，有点亲昵过头
			CASE -1
				PRINTFORMW
			;成功，ABL:親密 > 5，露出害羞的表情任凭抚摸；<= 5，红着脸甩开手
			CASE 0

		ENDSELECT
	ENDIF
ENDIF
RETURN 1
;==================================================
;331,泡茶(下药)
;TFLAG:193(1=大成功（度过了愉快的时光） 0=成功（喝下了茶水） -1=失败（怀疑着没有喝下茶水）)
;MASTER拥有调和知识则降低发觉下药的概率，角色污臭耐性<0（敏感或洁癖）则提高发觉概率
;==================================================
@M_KOJO_XXX_SUCCESS_COM_KX_331
;成否判定
;TFLAG:192(-2=强制失败(注、并非强制中止指令）、-1＝强制失败、0=根据COM文件决定、1=强制成功or大成功
TFLAG:192 = 0
;注:若睡眠药强度>=2时，仍继续下睡眠药，则指令强制失败（具体表现为：角色睡意太高，打着哈欠拒绝了茶）
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_331
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_331
CALL M_KOJO_XXX_MESSAGE_COM_KX_331_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_331_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	;能加进去的药，不一定全都要写
	SELECTCASE TFLAG:131 
		;媚药，脸上出现红晕，吐出充满热气的气息（使TARGET发情）
		CASE 41
		;利尿剤，夹紧大腿内侧，扭扭捏捏地扭动着腰
		CASE 42 
		;催情薬，露出陶醉的表情凝视着这边（使好感上升变得容易）
		CASE 250
		;睡眠薬，为了强忍睡意打起了哈欠
		CASE 252
		;新鲜精液，拥有TALENT:精愛味覚的TARGET会陶醉地回味这个味道
		CASE 47
	
	ENDSELECT	
	SELECTCASE TFLAG:193
		;大成功，喝下茶水，度过了愉快的时光
		CASE 1
			PRINTFORMW
		;成功，喝下茶水
		CASE 0
			PRINTFORMW
		;失败，怀疑地没有喝下茶水
		CASE -1
			PRINTFORMW
	ENDSELECT	
ENDIF
RETURN 1
;==================================================
;332,劝酒
;TFLAG:193(0=劝酒成功 
;如果非恋慕且经历过烂醉奸（愤怒），或者角色酒气大于2/3（喝不下了），则直接强制失败，除此之外
;当(TALENT:TARGET:酒耐性 == -2 && CFLAG:TARGET:不會喝酒 < 5)或者口上侧决定的TFLAG:192 == -1时，会额外出现一个说服的选项
;1= 运算后说服劝酒成功，-1=说服劝酒失败
;当说服成功后会增加CFLAG:不會喝酒的值（酒耐心== -2的角色不會喝酒值起初为-3） 
;-2=当CFLAG:不會喝酒值减到-10以下时，会强制说服大失败（终于被惹火了） 
;-5=放弃说服，或者角色（白莲专用）完全戒酒，或者口上侧决定强制失败)
;COM_STR(用来表示本次劝酒所用的酒的名称，等价于%ITEMNAME:(酒的ID，具体详见ITEM)%)
;ALCOHOL_TASTE(TFLAG:194（实际上就是本次酒的ID）)表示对酒的口味的评价，
;>=15时，表示很中意这样的酒，拥有CFLAG:不會喝酒的角色如果CFLAG值<5 则再增加一次值
;(关于喝酒的描写CFLAG:不會喝酒 <3时会喝一小口就停下， <5时不像以前那样抵触酒了，其他就是喝光了酒)
;<10时，本次喝的酒不合口味，减少CFLAG:不會喝酒的值
;和其他指令不一样，地文在COMF文件里，路径：ERB\コマンド関連\COMF\日常系\COMF332 お酒をふるまう.ERB
;==================================================
@M_KOJO_XXX_SUCCESS_COM_KX_332
;成否判定
;TFLAG:192（-1＝强制失败、0=根据COM文件决定）
;TFLAG:口上特殊補正 (如果在此处输入数字，则可以增加或减少ALCOHOL_TASTE，即对某种酒的喜好程度。（具体差分输入酒的ID即可）)
TFLAG:192 = 0
TFLAG:口上特殊補正 = 0

;在浴室、在外出（非主地图）时，TARGET亲密 < 3、CFLAG:妊娠自覚状態、约会而不在待客室时均无法实行指令
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_332
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_332
CALL M_KOJO_XXX_MESSAGE_COM_KX_332_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_332_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	;如果是确定了会喝酒的角色，可以把0以外的CASE全部删掉
	SELECTCASE TFLAG:193
		;本来不会喝酒，但是经过说服后开始怯生生地喝起酒来
		CASE 1
			PRINTFORMW
		;正常喝酒
		CASE 0
			PRINTFORMW
		;还是不肯喝酒
		CASE -1
			PRINTFORMW
		;拒绝喝酒，被惹火了
		CASE -2
			PRINTFORMW
		;完全没有要喝酒的意思
		CASE -5
			PRINTFORMW
	ENDSELECT
	;喝的酒不合口味
	IF ALCOHOL_TASTE(TFLAG:194) < 10
		PRINTFORMW 
	;对酒很中意	
	ELSEIF ALCOHOL_TASTE(TFLAG:194) >= 15
		PRINTFORMW
	ENDIF
ENDIF
RETURN 1
;==================================================
;333,听牢骚
;TFLAG:193(6=大成功(醉酒状态) 5=成功(醉酒状态) 4=失败(醉酒状态) 3=大成功 2=成功 1=失败)
;==================================================
@M_KOJO_XXX_SUCCESS_COM_KX_333
;成否判定
;TFLAG:192（-2=强制中止指令、-1＝强制失败、0=根据COM文件决定、1=强制成功or大成功）
TFLAG:192 = 0
; ABL:親密 < 3、拥有反发刻印时无法实行指令
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_333
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_333
CALL M_KOJO_XXX_MESSAGE_COM_KX_333_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_333_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	SELECTCASE TFLAG:193
		;大成功（醉酒状态），说着醉话笑了起来
		CASE 6
			PRINTFORMW
		;成功（醉酒状态），在说醉话
		CASE 5
			PRINTFORMW
		;失败（醉酒状态），越来越不讲理了
		CASE 4
			PRINTFORMW
		;大成功，抱怨完后乖乖听MASTER说教
		CASE 3
			PRINTFORMW
		;成功，说完想说的话之后沉默了
		CASE 2
			PRINTFORMW
		;失败，说着又开始生气了
		CASE 1
			PRINTFORMW
	ENDSELECT
ENDIF
RETURN 1
;==================================================
;334,碰杯
;宴会限定指令
;TFLAG:193(1=大成功 0=成功 -1=失败)
;CFLAG:妊娠自覚状態(1=改为吃饭)
;TALENT:酒耐性(-2=改为吃饭)
;==================================================
@M_KOJO_XXX_SUCCESS_COM_KX_334
;成否判定
;TFLAG:192（-2=强制中止指令、-1＝强制失败、0=根据COM文件决定、1=强制成功or大成功）
TFLAG:192 = 0

;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_334
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_334
CALL M_KOJO_XXX_MESSAGE_COM_KX_334_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_334_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	;对自己怀孕了有自觉，不能喝酒而改为吃东西
	IF CFLAG:911 == 1
		PRINTFORMW
	;酒耐性为-2，不会喝酒，改为吃东西
	ELSEIF TALENT:121 == -2
		PRINTFORMW
	;正常喝酒
	ELSE 
		PRINTFORMW
	ENDIF
	SELECTCASE TFLAG:193
		;大成功，看起来很快乐
		CASE 1
			PRINTFORMW
		;成功
		CASE 0
			PRINTFORMW
		;失败，对话几乎无法进行下去
		CASE -1
			PRINTFORMW
	ENDSELECT
ENDIF
RETURN 1
;==================================================
;335,照料（MASTER照料喝醉的TARGET）
;宴会限定指令
;如果TARGET的CFLAG:職種 == JOB_酔いつぶれる则无法实行指令
;TFLAG:193(1=大成功 （舒服地醒来了）0=成功 -1=失败（几乎没有任何帮助）)
;==================================================
@M_KOJO_XXX_SUCCESS_COM_KX_335
;成否判定
;TFLAG:192（-2=强制中止指令、-1＝强制失败、0=根据COM文件决定、1=强制成功or大成功）
TFLAG:192 = 0

;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_335
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_335
CALL M_KOJO_XXX_MESSAGE_COM_KX_335_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_335_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	SELECTCASE TFLAG:193
		;大成功，舒服地醒来了
		CASE 1
			PRINTFORMW
		;成功……没有地文
		CASE 0
			PRINTFORMW
		;失败，几乎没有任何帮助
		CASE -1
			PRINTFORMW
	ENDSELECT
ENDIF
RETURN 1
;==================================================
;336,膝枕（MASTER给TARGET膝枕）
;ABL:親密(4以下=感觉不太好… 9以下=好像很害羞的样子…… 9以上=好像很幸福的样子……
; 该指令有CD
;==================================================
@M_KOJO_XXX_SUCCESS_COM_KX_336
;成否判定
;TFLAG:192（-2=强制中止指令、-1＝强制失败、0=根据COM文件决定、1=强制成功or大成功）
TFLAG:192 = 0
;TIME_PROGRESS(TFLAG:膝枕した)，时间间隔44以下则强制失败（脚会发麻）
;MASTER体型小于角色体型-1，则因体格差别太大而强制失败
; 亲热强度<2、在室外、在浴室、工作中、睡眠中均不可实行指令
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_336
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_336
CALL M_KOJO_XXX_MESSAGE_COM_KX_336_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_336_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	SELECTCASE ABL:9
		;亲密小于5，感觉不太好
		CASE IS < 5
			PRINTFORMW
		;亲密小于等于9，好像很害羞
		CASE 5 TO 9
			PRINTFORMW
		;更高的亲密，好像很幸福
		CASEELSE
			PRINTFORMW
	ENDSELECT

	;因为很舒服，TARGET就这样睡着了
	IF TFLAG:193 > 0
		PRINTFORMW
	ENDIF
ENDIF
RETURN 1
;==================================================
;337,和孩子互动
; TFLAG:193 > 0，指令成功，被正常对待；否则会被警戒和疏远
;其实该指令的TFLAG:192没有意义。TFLAG:193是根据对儿童的爱情度（CHILD_LOVE:CHARA:CHILDNUM）判定的，
;爱情度低于0（仅无自觉妊娠情况下会低于0）时TFLAG:193 = -1，会强制失败；< 200时 TFLAG:193 = 1；< 300时TFLAG:193 = 2；< 400时TFLAG:193 = 3；以上则TFLAG:193 = 4
;但是爱情度会在每次实行与孩子互动的指令时增加，所以即使是一开始低爱情度的情况，也能够逐渐升为高爱情度。
;TFLAG:194表示在这个指令中孩子的编号
;地文内包含巨量差分，请自行查看ERB\口上・メッセージ関連\EVENT_MESSAGE_COM300.ERB
; 因为如果场上有多个孩子，可以选择要与哪个孩子互动，这个时候可以切换TARGET，所以TARGET在这个指令并不是固定的，地文内会进行代换
; 因为COMF文件最后会使TARGET = CHARA，TFLAG:194 = CHILDNUM，所以可以直接拿来用
; 儿童的名字可以用%CHILDNAME:TARGET:(TFLAG:194)%表示
;==================================================
@M_KOJO_XXX_SUCCESS_COM_KX_337
;成否判定
;TFLAG:192（-2=强制中止指令、-1＝强制失败、0=根据COM文件决定、1=强制成功or大成功）
TFLAG:192 = 0
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_337
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_337
CALL M_KOJO_XXX_MESSAGE_COM_KX_337_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_337_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	;并不是全都要写，请自行安插TFLAG:193的差分
	; TFLAG:193 > 0，爱情度高，被视作家人正常对待；-1就是爱情度低，被警戒和疏远
	SELECTCASE CHILD_ACT:TARGET:(TFLAG:194)
		;抚摸熟睡的孩子
		CASE "睡眠"
			PRINTFORMW
		;CFLAG:TARGET:出産経過日 < CHILD_語彙，叫醒孩子；会说话之后就是和孩子说早安
		CASE "起床"
			PRINTFORMW
		;给孩子洗澡
		CASE "入浴"
			PRINTFORMW
		;CFLAG:CHARA:出産経過日 < CHILD_離乳，看TARGET给孩子喂奶；离乳之后就是和孩子一起吃饭
		CASE "吃飯"
			PRINTFORMW
		;CFLAG:CHARA:出産経過日 < CHILD_自立前，和孩子一起玩玩具；自立之后就是和孩子聊天
		CASE "玩具"
			PRINTFORMW
		;和孩子一起画画
		CASE "お絵かき"
			PRINTFORMW
		;和孩子一起玩
		CASE "玩耍"
			PRINTFORMW
		;帮助孩子学习
		CASE "勉強"
			PRINTFORMW
		;和孩子谈论读的书
		CASE "読書"
			PRINTFORMW
		;帮孩子做料理
		CASE "料理"
			PRINTFORMW
		;和孩子谈论画画
		CASE "絵描き"
			PRINTFORMW
		;和孩子一起唱歌，如果场地允许、拥有对应乐器且技能达标则是进行伴奏
		CASE "歌唱"
			PRINTFORMW
		;帮孩子打扫卫生
		CASE "掃除"
			PRINTFORMW
		;和孩子谈论寺子屋
		CASE "支度"
			PRINTFORMW
		;向孩子说路上小心
		CASE "登校"
			PRINTFORMW
		;看孩子上课
		CASE "授業"
			PRINTFORMW
		;向孩子说欢迎回来
		CASE "帰宅"
			PRINTFORMW
		;和孩子聊工作，需要孩子自立之后
		CASE "仕事"
			PRINTFORMW
		; 地文里写的大部分是和孩子聊天……需要孩子自立之后
		CASE "散歩"
			PRINTFORMW
		; 剩下的非通用CASE就不写了……请自行翻阅地文吧
		CASEELSE

	ENDSELECT
ENDIF
RETURN 1
;==================================================
;350,推倒（时姦時名为猥亵）
;地文路径 ERB\口上・メッセージ関連\EVENT_MESSAGE_COM_押し倒し.ERB
;TFLAG:194 == 0时为正常成功，除此之外，EYEWITNESS() == 1时TFLAG:194 = 1，会被人看见；== 2，不想在户外做（现版本已删除）　
; GET_TARGETNUM()> 1的情况下，TCVAR:MASTER:亲热 < 2或者TARGET其中一个人没有取得合意时TFLAG:194 = 3，不想多人一起做
; BASE:情緒 < 300 || TCVAR:MASTER:亲热 < 2时，TFLAG:194 = 4，还没有做的心情，即使有合意也不行；口上侧PERMISSION存在特殊判定时，TFLAG:194 = 100，有合意，但是因为口上特殊判定而强制失败
;TCVAR:初次拥抱　1=普通地获得合意　2=还没有KISS过就获得合意　3=使用药或者发情期时获得合意…　4=拥有时姦刻印或使用奇迹之石后获得合意
;5=被逼迫要求做且无法拒绝(拥有胆怯素质才有可能触发) 
;6=被拒绝了，但是并不是不高兴（好意判定略低于理性）　7=被普通地拒绝（好意低出理性一定值）　8=被强硬地拒绝（好意与理性差距过大） 
;9=即便禁止插入，也允许了推倒（现版本已不启用） 98=口上内特殊判定加持时失败 99=口上内特殊判定加持时成功
;10= 在!TFLAG:194时，如果角色是抽中守矢神签后的约会对象，则可以强迫角色进入UFUFU状态（个别情况遂不写进通用模板） 
; 如果没能取得合意，TCVAR:初次拥抱在每次判定时都会重新赋值
;如果flagsetting内口上内特殊判定未设置为1，则特殊判定将不会生效
; 如果TFLAG:パール期限值为真（也就是说MASTER因为惩罚正在被塞入肛珠）的时候指令强制失败……（）
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_350
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_350
CALL M_KOJO_XXX_MESSAGE_COM_KX_350_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_350_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	;并不是都需要写，部分内容可以合并在一起
	IF FLAG:70 
	ELSEIF TFLAG:194 
		;非初次，拒绝
		SELECTCASE TFLAG:194
			;会被人看见
			CASE 1 		
				PRINTFORMW
			;不想多人一起做（地文被注释掉了）
			CASE 3 		
				PRINTFORMW
			;还没有做的心情（即使有合意）
			CASE 4 		
				PRINTFORMW
			;有合意，但是因为口上特殊判定而强制失败
			CASE 100	
				PRINTFORMW
		ENDSELECT 
	ELSEIF TCVAR:181
		;初次拥抱，允许或失败都有
		SELECTCASE TCVAR:181
			;普通地获得合意，差分较多，就不一一写了
			CASE 1		
				
			;还没有KISS过就获得合意（仅限没有无知素质的角色），虽然接受了拥抱但似乎有些不满
			CASE 2		
				PRINTFORMW
			;使用了媚药等药物或者发情期时获得合意，按捺不住身体的躁动、默许了
			CASE 3
				PRINTFORMW
			;拥有时姦刻印或者使用奇迹之石后获得合意，懵懵懂懂地接受了
			CASE 4		
				PRINTFORMW
			;被逼迫要求做且无法拒绝(拥有胆怯素质才有可能触发)，容易屈服的TARGET无法对MASTER提出拒绝
			CASE 5		
				PRINTFORMW
			;被拒绝了，但是并不是不高兴
			CASE 6		
				PRINTFORMW
			;被普通地拒绝，TALENT:TARGET:処女 == 0，被冷淡对待
			CASE 7		
				PRINTFORMW
			;被强硬地拒绝，TALENT:TARGET:胆量 < 0 || OTOKOGIRAI(TARGET)，胆小或者厌男的TARGET发出尖叫将MASTER撞飞了；除此之外，冷淡地拒绝了
			CASE 8		
				PRINTFORMW
			;口上内特殊判定加持时失败
			CASE 98		

			;口上内特殊判定加持时成功
			CASE 99		

		ENDSELECT	
	;非初次 成功
	ELSE 

	ENDIF 
ENDIF
RETURN 1
;==================================================
;351,帯出去
;==================================================
@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_351
RETURN 0
;如果态度较差的角色在非烂醉，非因依赖而允许同行的情况下，或者角色正在工作且非烂醉时，是不能带着同行的。
;如果身处室外，正在下雨，MASTER手里有伞或者角色带着伞则会共用雨伞，多人不可。
@M_KOJO_XXX_MESSAGE_COM_KX_351
;带出去这个指令没有地文
CALL M_KOJO_XXX_MESSAGE_COM_KX_351_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_351_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	;同行，带TARGET离开
	IF CFLAG:320 == 60
		;共用雨伞（相合伞）
		IF TEQUIP:201

		ENDIF
	;取消与TARGET的同行状态
	ELSE

	ENDIF
ENDIF
RETURN 1
;==================================================
;352,告白
;FLAG:甲斐性無(1=强制中止指令)
;TFLAG:193 (1=成功 0=失败)
;==================================================
@M_KOJO_XXX_SUCCESS_COM_KX_352
;成否判定
;TFLAG:192（-2=强制中止指令、-1＝强制失败、0=根据COM文件决定、1=强制成功or大成功）
TFLAG:192 = 0
;亲热强度 < 2、GET_TARGETNUM() > 1时无法实行指令
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_352
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_352
CALL M_KOJO_XXX_MESSAGE_COM_KX_352_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_352_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	;成功，和TARGET成为了恋人
	IF TFLAG:193

	;虽然想对TARGET告白但是怎么也说不出口，FLAG:甲斐性無，诅咒自己没有胆量
	ELSE

	ENDIF
ENDIF
RETURN 1
;==================================================
;353,猥褻（睡眠时恶作剧）
;FLAG:甲斐性無(1=强制中止指令)
;要注意此时TARGET是睡着的，最好不要写太多语言描写
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_353
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_353
CALL M_KOJO_XXX_MESSAGE_COM_KX_353_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_353_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL

ENDIF
RETURN 1
;==================================================
;354,陪睡
;CFLAG:衰弱（1以上=睡着了，微微扭动着身体）
;CFLAG:お招き（0以外=睡着了，微微扭动着身体）
;非恋慕状态无法陪睡，如果开启了补丁的话，爱欲也可以陪睡
;==================================================
@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_354
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_354
CALL M_KOJO_XXX_MESSAGE_COM_KX_354_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_354_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	;TARGET衰弱中或者招待中，微微扭动着身体
	IF CFLAG:316 || CFLAG:336
		PRINTFORMW
	;一睁眼就开心地迎接了MASTER
	ELSE
		PRINTFORMW
	ENDIF
ENDIF
RETURN 1
;==================================================
;355,时间停止（应该仅限于对此时地文的修改）
;如果口上设定中角色在时间停止时无法行动，请不要写任何对角色言行的描写，尽量写成类似地文的风格。
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_355
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_355
CALL M_KOJO_XXX_MESSAGE_COM_KX_355_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_355_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL

ENDIF
RETURN 1
;==================================================
;356,邀请去阴暗处
;ABL:露出癖 + TALENT:羞恥心 >= 3 或者 TALENT:無知 就能成功
;==================================================
@M_KOJO_XXX_SUCCESS_COM_KX_356
;成否判定
;TFLAG:192（-1＝强制失败、0=根据COM文件决定、1=强制成功）
TFLAG:192 = 0
; 没有合意、在待客室时不可实行指令
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_356
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_356
CALL M_KOJO_XXX_MESSAGE_COM_KX_356_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_356_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	;失败，似乎对在外面做的事情还很抵触
	IF TFLAG:193 == -1
		PRINTFORMW
	;成功，TALENT:無知，把什么都不知道的TARGET邀请进了阴暗处；以外，把满脸通红的TARGET邀请进了阴暗处
	ELSE
		PRINTFORMW
	ENDIF
ENDIF
RETURN 1
;==================================================
;360,任凭摆布
; 这是被TARGET抱住/逆推之后出现的选项，因此其实所有行动的主导者都是TARGET。如果气力为0时仍处于逆推/抱住状态则只能实行该指令
;根据是任凭摆布还是抵抗，以及TARGET的属性，会对角色的下一个COUNTER行动有一定的影响
;可参考地文ERB\口上・メッセージ関連\EVENT_MESSAGE_COM300.ERB
; 因为是被逆推时的内容，也更推荐去看看COUNTER中对应的TARGET的行动
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_360
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_360
CALL M_KOJO_XXX_MESSAGE_COM_KX_360_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_360_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	; 并不是全都要写
	SELECTCASE TCVAR:20 
		;向MASTER展示乳沟
		CASE 27
			PRINTFORMW
		;接吻 	
		CASE 30
			PRINTFORMW
		;从身前抱住，TALENT:TARGET:体型 > TALENT:PLAYER:体型，把脸埋进TARGET的乳沟
		CASE 32 	
			PRINTFORMW
		;被要求揉TARGET的胸
		CASE 33
			PRINTFORMW
		;TARGET自己掀起裙子，如果EQUIP:下半身内衣２为真，则TARGET穿着下半身内衣，用%PANTSNAME(EQUIP:下半身内衣２, TARGET)%进行表示
		CASE 35 	
			PRINTFORMW
		;被TARGET手淫
		CASE 50
			PRINTFORMW
		;被TARGET（拥有男性器）口交/舐阴
		CASE 51
			PRINTFORMW
		;被TARGET（拥有男性器）素股/磨豆腐
		CASE 52
			PRINTFORMW
		;TARGET为MASTER乳交
		CASE 53 	
			PRINTFORMW
		;TARGET为MASTER足交
		CASE 54
			PRINTFORMW
		;对MASTER进行肛门爱抚、舔肛
		CASE 55, 56
			PRINTFORMW
		;指插入MASTER的女性器
		CASE 57
			PRINTFORMW
		; 被TARGET胸爱抚
		CASE 58
			PRINTFORMW
		; 被TARGET吸乳头
		CASE 59
			PRINTFORMW
		;法式深吻
		CASE 60
			PRINTFORMW
		;被强制舔TARGET的阴部、进行肛门奉仕
		CASE 70, 72
			PRINTFORMW
		;MASTER为TARGET口交
		CASE 71
			PRINTFORMW
		;洗面奶（TARGET用胸部搓MASTER的脸）
		CASE 73 	
			PRINTFORMW
		; 相互磨胸部
		CASE 74	
			PRINTFORMW
		;爱抚TARGET的私处
		CASE 76
			PRINTFORMW
		;被要求吸TARGET的乳头
		CASE 77
			PRINTFORMW 
		; 正常位对MASTER的V进行插入
		CASE 80
			PRINTFORMW	
		; 后背位对MASTER的V进行插入	
		CASE 83
			PRINTFORMW
		; TARGET插入MASTER的V进行动腰，TEQUIP:MASTER:体位 == 1是正常位，2是后背位
		CASE 84
			PRINTFORMW	
		;TARGETＶ被插入
		CASE 85 
			PRINTFORMW
		;TARGET要求膣内射精
		CASE 86 
			PRINTFORMW
		;TARGETＡ被插入
		CASE 87 	
			PRINTFORMW
		;V插入TARGET时MASTER动腰
		CASE 88 	
			PRINTFORMW
		;A插入TARGET时MASTER动腰
		CASE 89 	
			PRINTFORMW
		; 后背位对MASTER的A进行插入
		CASE 90
			PRINTFORMW
		CASEELSE

	ENDSELECT
ENDIF
RETURN 1
;==================================================
;361,进行抵抗（和任凭摆布的影响度计算是反着来的，行动时间翻倍，除此之外没有太大区别……）
;MASTER气力归零后无法进行抵抗
; 地文路径和任凭摆布一样
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_361
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_361
CALL M_KOJO_XXX_MESSAGE_COM_KX_361_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_361_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	; 并不是全都要写
	SELECTCASE TCVAR:20 
		;接吻 	
		CASE 30
			PRINTFORMW
		;从身后、身前抱住
		CASE 31,32 	
			PRINTFORMW
		;被要求揉TARGET的胸
		CASE 33
			PRINTFORMW
		; 被TARGET用手玩弄下体
		CASE 34
			PRINTFORMW	
		;TARGET自己掀起裙子，如果EQUIP:下半身内衣２为真，则TARGET穿着下半身内衣，用%PANTSNAME(EQUIP:下半身内衣２, TARGET)%进行表示
		CASE 35 	
			PRINTFORMW
		; 被TARGET从后面揉胸
		CASE 36
			PRINTFORMW
		;41请求MASTER正常位插入TARGET的V、43请求MASTER后背位插入TARGET的V、44请求后背位插入A
		CASE 41, 43, 44
			PRINTFORMW
		;被TARGET手淫
		CASE 50
			PRINTFORMW
		;被TARGET（拥有男性器）口交/舐阴
		CASE 51
			PRINTFORMW
		;被TARGET（拥有男性器）素股/磨豆腐
		CASE 52
			PRINTFORMW
		;TARGET为MASTER乳交
		CASE 53 	
			PRINTFORMW
		;TARGET为MASTER足交
		CASE 54
			PRINTFORMW
		;对MASTER进行肛门爱抚、舔肛
		CASE 55, 56
			PRINTFORMW
		;指插入MASTER的女性器
		CASE 57
			PRINTFORMW
		; 被TARGET胸爱抚
		CASE 58
			PRINTFORMW
		; 被TARGET吸乳头
		CASE 59
			PRINTFORMW
		;法式深吻
		CASE 60
			PRINTFORMW
		;被强制舔TARGET的阴部
		CASE 70
			PRINTFORMW
		;MASTER为TARGET口交
		CASE 71
			PRINTFORMW
		; MASTER为TARGET进行肛门奉仕
		CASE 72
			PRINTFORMW	
		;洗面奶（TARGET用胸部搓MASTER的脸）
		CASE 73 	
			PRINTFORMW
		; 相互磨胸部
		CASE 74	
			PRINTFORMW
		; TARGET骑在MASTER的手臂上摩擦性器
		CASE 75	
			PRINTFORMW
		;爱抚TARGET的下体
		CASE 76
			PRINTFORMW
		;被要求吸TARGET的乳头
		CASE 77
			PRINTFORMW 
		; 正常位对MASTER的V进行插入
		CASE 80
			PRINTFORMW	
		; 后背位对MASTER的V进行插入	
		CASE 83
			PRINTFORMW
		; TARGET插入MASTER的V进行动腰，TEQUIP:MASTER:体位 == 1是正常位，2是后背位
		CASE 84
			PRINTFORMW	
		;TARGETＶ被插入
		CASE 85 
			PRINTFORMW
		;TARGET要求膣内射精
		CASE 86 
			PRINTFORMW
		;TARGETＡ被插入
		CASE 87 	
			PRINTFORMW
		;V插入TARGET时MASTER动腰
		CASE 88 	
			PRINTFORMW
		;A插入TARGET时MASTER动腰
		CASE 89 	
			PRINTFORMW
		; 后背位对MASTER的A进行插入
		CASE 90
			PRINTFORMW
		CASEELSE

	ENDSELECT
ENDIF
RETURN 1

;==================================================
;363,朗读
;（角色持有 幼稚素质时，MASTER携带特定书籍《御伽草子》才可使用）
;TFLAG:193(1=大成功 0=成功 -1=失败)（没有地文分歧）
;==================================================
@M_KOJO_XXX_SUCCESS_COM_KX_363
;成否判定
;TFLAG:192（-2=强制中止指令、-1＝强制失败、0=根据COM文件决定、1=强制成功or大成功）
TFLAG:192 = 0

;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_363
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_363
CALL M_KOJO_XXX_MESSAGE_COM_KX_363_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_363_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	;陪睡中， 在\@ INROOM(CFLAG:MASTER:現在位置) == 2 ? 床 # 铺盖 \@上读起了书
	IF CFLAG:334
		PRINTFORMW
	; MASTER体型更大，TARGET躺在MASTER的膝盖上读起了书（地文好像是错的）	
	ELSEIF TALENT:MASTER:100 > TALENT:100 && INROOM(CFLAG:MASTER:300)
		PRINTFORMW
	ELSE
		PRINTFORMW
	ENDIF 
ENDIF
RETURN 1
;==================================================
;364,撒豆子(仅在节分日（冬之月3日），对鬼族的TARGET可用，会使TARGET获得极大的痛苦）
;TFLAG:193表示撒豆子参加的人数
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_364
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_364
CALL M_KOJO_XXX_MESSAGE_COM_KX_364_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_364_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL

ENDIF
RETURN 1
;==================================================
;365,素材购入
;对象存在CFLAG:素材販売时才可使用
;如果本次买了东西的话，会TIME += 5，如果真的想检查是否买了东西的话从这里入手 
;由于素材是在COMF文件中当时随机生成的，不会保存，所以没有办法直接检查卖的是什么素材，
;由于生成素材的循环中，生成时采集经验+1，如果生成素材为空则再+2，总共3次循环。如果真的想要检查今天没有素材卖的情况的话可以从这里入手
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_365
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_365
CALL M_KOJO_XXX_MESSAGE_COM_KX_365_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_365_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	;今天已经买了东西的情况，不会再卖了
	IF TCVAR:171	
		PRINTFORMW
	ELSE

	ENDIF
ENDIF
RETURN 1
;==================================================
;368,陪同行動 
;如果某个技能等级为1以上，则会发生基于技能的自由行动
;详细内容参考ERB\MOVEMENTS\自由行動\FREE_ACT_10.ERB
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_368
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_368
CALL M_KOJO_XXX_MESSAGE_COM_KX_368_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_368_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	SELECTCASE Activity_Type:TARGET
		CASE 0
			;▼思考事情［在思考什么］
			;角色在自己房间（或者同居后在MASTER房间）时限定
			;TFLAG:193,-1=TARGET随便敷衍过去了
			PRINTFORMW 
		CASE 1
			;▼游玩［一起玩］
			;※角色拥有[幼稚]，且在开阔地限定
			;TFLAG:193,1=气氛变得热烈了,-1=有点冷场了
			PRINTFORMW 
		CASE 2
			;▼食事［一起吃饭］
			;TFLAG:193,-1=MASTER其实也没那么饿
			PRINTFORMW 
		CASE 3
			;▼吃小零食［一起吃小零食］
			;※[妖精]种族的角色，或者是露米娅、古明地恋、幽幽子、紫苑、美铃会触发这个
			;TFLAG:193,-1=MASTER其实也没那么饿
			PRINTFORMW 
		CASE 4
			;▼扫除［帮忙扫除］
			;※[掃除係]限定，或者TARGET的污臭敏感 <= -1，只会扫自己的房间  
			PRINTFORMW 
		CASE 5
			;▼运动［一起做运动］
			;※拥有[音楽知識]或者无战斗能力则不会触发
			PRINTFORMW 
		CASE 6
			;▼读书［询问阅读感想］
			;需要角色教养在1以上，且当前场所能够读书（或者是自己房间）
			;TFLAG:193,-1=沉浸在书中无法回话的样子， ELSE则热烈地讨论起了书本的内容
			PRINTFORMW 
		CASE 7
			;▼料理［帮忙做饭］→［求分点饭菜］
			;需要角色料理技能在1以上，而且肚子饿了
			;TFLAG:193,2=一起做饭,0=肚子多少填满了,-1==MASTER并没有那么饿
			PRINTFORMW 
		CASE 8
			;▼演奏［协同合奏］or［进行伴奏］
			;※TARGET拥有[音楽知識]（随着TALENT:音楽知識的种类而変化）
			;TALENT:音楽知識,1=演奏,2=唱歌,3=跳舞
			;TFLAG:193,1=兴致勃勃地,0=成功,-1=失败,-2=没有可以用的乐器
			PRINTFORMW 
		CASE 9
			;▼采集［帮忙采集］
			;※需要角色拥有采集等级
			PRINTFORMW 
		CASE 10
			;▼垂钓［一起钓鱼］
			;要求角色拥有钓鱼等级
			;TFLAG:193,-1=在钓鱼中的TARGET旁发呆 （MASTER没有钓鱼竿则强制失败，只能看着）
			PRINTFORMW 
		CASE 11
			;▼实验［帮忙做实验］
			;※对象拥有调和等级
			PRINTFORMW 
		CASE 12
			;▼放松［一起放松］
			PRINTFORMW 
		CASE 13
			;▼晩酌［陪同喝酒］
			;※酒耐性0以上才会触发
			PRINTFORMW 
		CASE 14
			;▼买东西［帮忙买东西］
			;在有商店的位置才能触发
			PRINTFORMW 
		CASE 15
			;▼说教［去看看情况］
			;※神霊・蓬莱人之外的角色才会被映姬说教
			;TFLAG:193  != 0  MASTER也被映姬发现并说教了
			PRINTFORMW 
		CASE 16
			;▼落穴［一起恶作剧］or［去看看情况］
			;※TARGET为三月精、琪露诺、克劳恩皮丝时才会一起恶作剧
			;除此以外的角色全都有可能掉坑里（掉坑概率视角色的战斗能力）
			PRINTFORMW 
		CASE 17
			;▼制作雪雕［一起堆雪］
			;※冬天限定，且要求在非恶劣天气时，环境积雪达到一定程度
			;不同角色制作的雪雕不同，详见对应文件
			PRINTFORMW 
		CASE 18
			;▼悠闲地缩进被炉［在被炉里放松］
			;※冬天限定，水栖角色和冰妖精不会触发
			PRINTFORMW 
	ENDSELECT
ENDIF
RETURN 1

;自由行动判定用函数
;如果在与上述模板对应的 CASE 编号中返回 -1，这个自由行动将不会被触发
@M_KOJO_XXX_自由行動判定_KX(ARG)
SELECTCASE ARG
	;CASE 1, 2, 5
	;	RETURN -1
	CASEELSE
		RETURN 0
ENDSELECT

;==================================================
;402,就寝
;TFLAG:193(0=通常 1=一家三口排成了川字)
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_402
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_402
;就寝没有TRAIN_MESSAGE
CALL M_KOJO_XXX_MESSAGE_COM_KX_402_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_402_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	; 一家人睡在了一起
	IF TFLAG:193 == 1
		PRINTFORMW
	; 通常
	ELSE 
		PRINTFORMW
	ENDIF
ENDIF	
RETURN 1
;==================================================
;403,休憩
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_403
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_403
CALL M_KOJO_XXX_MESSAGE_COM_KX_403_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_403_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	;陪在睡着的TARGET旁边睡了一会儿
	IF CFLAG:313
		PRINTFORMW
	;通常，稍微休息了一下
	ELSE 	
		PRINTFORMW
	ENDIF
ENDIF
RETURN 1
;==================================================
;405,外出(同行時变成约会
;NEMUKE() >= 720时，会因睡意过盛而无法出门，若MASTER变身成了小人也无法外出
;不可带3人外出约会，若角色和MASTER之中一人气力过低，或者角色处于工作日，或者角色态度较低时接受了角色的依赖，都无法外出
;更详细请参考ERB\コマンド関連\COMF\日常系\COMF405 出掛ける.ERB
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_405
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_405
;外出没有对应的地文
CALL M_KOJO_XXX_MESSAGE_COM_KX_405_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_405_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	; FLAG:73（约会的对象）在大部分情况下都可以等效替换掉CFLAG:320（同行），并且可以用%CALLNAME:(FLAG:73)%来表示约会对象的名字（CFLAG:320则不行）
	; 但是，当约会对象不止一个（开启了多人约会时），此时想要表示多个对象只能使用CFLAG:同行，因为FLAG:73只能记录一个数值，后面的角色会覆盖掉前面的角色
	;同行，与TARGET约会开始了
	IF CFLAG:320

	;与TARGET之外的人出发去约会了
	ELSEIF CFLAG:MASTER:320
	
	;目送MASTER外出
	ELSE
	
	ENDIF
ENDIF
RETURN 1
;==================================================
;410,扫除
;FLAG:70 ，时间停止中
;如果角色的工作为扫除且正在工作时，非时停状态下该指令不可用
;TFLAG:193(0=钦佩地注视 1=一起帮忙扫地)
;这个是按照角色ABL等级运算后结果是否大于地位判定的，也就是说地位越高的角色越不容易帮忙扫地。地位可在角色的对应CSV文件中查找）
;TFLAG:194（3=脏污程度高 2=脏污程度中 1=脏污程度低 0=脏污程度最小）
;地文内存在户外扫除的差分，条件用OUTROOF(CFLAG:現在位置)，并且在冬天（DAY:2 == 4）户外扫除时会变成扫雪
;如果TALENT:MASTER:清掃中毒，扫除的态度会异常积极
;以及……可以在UFUFU中途（仅顺推，被逆推是不行的）进行扫除（会被瞪的）
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_410
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_410
CALL M_KOJO_XXX_MESSAGE_COM_KX_410_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_410_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	; 时间停止中，无视TARGET进行扫除
	IF FLAG:70
		PRINTFORMW
	; 在非睡眠，非UFUFU的状态下，和TARGET一起扫除
	ELSEIF TFLAG:193 && !CFLAG:313 && !CFLAG:317
		PRINTFORMW
	; UFUFU时，无视TARGET进行扫除
	ELSEIF CFLAG:317
		PRINTFORMW
	; MASTER一个人扫除
	ELSE
		
	ENDIF
ENDIF
RETURN 1
;==================================================
;411,战斗训练
;TFLAG:194(3=夏天的烈日 2=危险的天气 1=恶劣的天气 （如果在危险/恶劣天气下训练会扣除更多体力气力）0=屋内or通常天气
;如果MASTER比角色更强，就会变成MASTER对角色进行指导，反之则是角色对MASTER进行指导
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_411
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_411
CALL M_KOJO_XXX_MESSAGE_COM_KX_411_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_411_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	; MASTER的战斗能力更高，对TARGET进行指导
	IF ABL:MASTER:42 > ABL:42
		PRINTFORMW
	; 被TARGET指导
	ELSE
		PRINTFORMW
	ENDIF

	; 在室内进行训练
	IF !TFLAG:194
		PRINTFORMW
	; 在室外，受天气影响
	ELSE
		SELECTCASE TIME:5
			; 雨中的训练，非常的累
			CASE 4, 6
				PRINTFORMW
			; 晴天，在蓝天下训练；TFLAG:194 == 3酷暑时在强烈的阳光直射下训练，快要中暑了
			CASE 1

			; 暴雨中强行进行严格的训练，累得快死了
			CASE 5
				PRINTFORMW
			; 雪中的训练，非常的累
			CASE 8, 10, 12, 13
				PRINTFORMW
			; 暴风雪中强行进行严格的训练，累得快死了
			CASE 9
				PRINTFORMW
			; 其他天气
			CASEELSE
				
		ENDSELECT
	ENDIF

ENDIF
RETURN 1
;==================================================
;412,学习
;若MASTER的教养大于角色，则是由MASTER教导TARGET， 反之亦然
;不同天气会导致学习时间增减
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_412
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_412
CALL M_KOJO_XXX_MESSAGE_COM_KX_412_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_412_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	; 睡眠时、工作时，此时TARGET无法进行/接受指导，仅仅只是陪伴
	IF CFLAG:313 || CFLAG:325 == 5

	ELSE
		; MASTER教养更高，教导TARGET
		IF ABL:MASTER:43 > ABL:43
			PRINTFORMW
		; 接受TARGET的教导
		ELSE
			PRINTFORMW
		ENDIF
	ENDIF
ENDIF
RETURN 1
;==================================================
;413,料理
;TFLAG:194(100以上=禁断的菜单（跳蛋食物） 3=甜点 2=主食 1=轻食
;如果要细致到某一盘料理，可以用DISHNAME == ""(引号内填上料理的名称)，制作相应料理的差分
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_413
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_413
;TFLAG:194在100以上时
CALL M_KOJO_XXX_MESSAGE_COM_KX_413_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_413_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	; 料理的分类
	SELECTCASE TFLAG:194
		; 禁断的菜单（跳蛋食物）
		CASE IS >= 100
			SELECTCASE DISH_NAME
				; 用胡椒盐给跳蛋调味后裹上一层薄薄的小麦粉进行油炸……什么东西这是？
				CASE "油炸跳蛋"
					PRINTFORMW
				; 把处理好的跳蛋用開水快速烫一下后装到凉的碗里、加上梅肉……什么东西这是？
				CASE "电动按摩风跳蛋湯引"
					PRINTFORMW
				; 将跳蛋做成刺身后稍微烤一下、作成饭团并涂上了特製的佐料……什么东西这是？
				CASE "夹子用跳蛋握手"
					PRINTFORMW
				; 用海带为底料的纯粹高汤将蔬菜和跳蛋一起煮……什么东西这是？
				CASE "飛機杯剪裁跳蛋水煮"
					PRINTFORMW 
			ENDSELECT
		; 甜点
		CASE 3

		; 主食
		CASE 2
		
		; 轻食、小吃
		CASE 1

	ENDSELECT		
ENDIF
RETURN 1
;==================================================
;414,吃饭（MASTER和TARGET一起吃饭）
;TFLAG:193(1=大成功 0=成功 -1=失败)
;TFLAG:194(1=TARGET没穿内裤时吃涮涮锅（捏他自一部AV(HRND-257)，会给该食物添加精力效果，） 2=禁断的菜单（跳蛋食物） 31=兴奋剂高汤 30=奶酪番茄沙拉 34=银吉兽料理
;如果在料理里混入了异物的话，用%ITEMNAME:DISH_DRG%进行表示
;如果想要检查对一些料理做的特殊处理的话，比如去掉蔬菜什么的，用STRCOUNT(DISH_TASTE, "去掉蔬菜的/")作为条件
;对个别料理做出差分的方法同料理
;在特殊节分吃相应的料理，会有特殊地文，详见ERB\口上・メッセージ関連\EVENT_MESSAGE_COM400.ERB
;可以根据料理的点数做差分TCVAR:306（料理評価値），显示是百分制的，但实际是千分位的并向下取整
;==================================================
@M_KOJO_XXX_SUCCESS_COM_KX_414
;成否判定
;TFLAG:192(-2=强制中止指令(非TARGET時强制失败)、-1＝强制失败、0=根据COM文件决定(非TARGET時强制成功)、1=强制成功or大成功
TFLAG:192 = 0
; TFLAG:192在这里控制对料理的评价值，=1则最低500分，最高700分；=-1则固定为400分；=-2中止指令，=0则系统自行计算
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_414
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_414
CALL M_KOJO_XXX_MESSAGE_COM_KX_414_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_414_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	; TARGET对料理的评价值，口上侧如果用TFLAG:192控制，会直接改变评价值
	SELECTCASE TCVAR:306
		;40分以下，体力恢复倍率为0.6
		CASE IS < 400	
		;60分以下，体力恢复倍率为0.8
		CASE IS < 600	
		;75分以下，体力恢复倍率为1.0
		CASE IS < 750	
		;75分及以上，体力恢复倍率为1.1，并且心情上升一级
		CASEELSE	
	
	ENDSELECT

	SELECTCASE TFLAG:193
		; 大成功，TARGET吃得干干净净
		CASE 1
			PRINTFORMW
		; 失败，不合TARGET的口味
		CASE -1
			PRINTFORMW
		; 成功，一起吃饭，度过了愉快的时光
		CASEELSE
			PRINTFORMW 
	ENDSELECT	
ENDIF
RETURN 1
;==================================================
;415,招待吃饭（和414吃饭几乎一样，函数都是调用的414的，唯一的不同在于MASTER不会吃）
;TFLAG:193(1=大成功 0=成功 -1=失败)
;==================================================
@M_KOJO_XXX_SUCCESS_COM_KX_415
;成否判定
;TFLAG:192(-2=强制中止指令、-1＝强制失败、0=根据COM文件决定、1=强制成功or大成功
TFLAG:192 = 0

;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_415
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_415
CALL M_KOJO_XXX_MESSAGE_COM_KX_415_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_415_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	; TARGET对料理的评价值，口上侧如果用TFLAG:192控制，会直接改变评价值
	SELECTCASE TCVAR:306
		;40分以下，体力恢复倍率为0.6
		CASE IS < 400	
		;60分以下，体力恢复倍率为0.8
		CASE IS < 600	
		;75分以下，体力恢复倍率为1.0
		CASE IS < 750	
		;75分及以上，体力恢复倍率为1.1，并且心情上升一级
		CASEELSE	
	
	ENDSELECT

	SELECTCASE TFLAG:193
		; 大成功，TARGET吃得干干净净
		CASE 1
			PRINTFORMW
		; 失败，不合TARGET的口味
		CASE -1
			PRINTFORMW
		; 中止指令，TARGET一副难以言喻的表情，将%EX_DISH_NAME%还了回来
		CASE -2	
			PRINTFORMW
		; 成功，一起吃饭，度过了愉快的时光
		CASEELSE
			PRINTFORMW 
	ENDSELECT	
ENDIF
RETURN 1
;==================================================
;416,演奏
;TFLAG:193(1=大成功 0=成功 -1=失败)
;TFLAG:使用楽器(1=电子琴 2=钢琴 3=吉他 4=小号 5=小提琴)
;IF 宴会場所在判定(MASTER)（在宴会时进行演奏）
;TCVAR:演奏参加 为真时，表示角色拥有音乐技能且参与了演奏，视角色不同，参与的方式也不同（可以是奏乐、可以是歌唱、可以是跳舞），参与后SOURCE的乘算也不同，详见COMF文件
; 参与演奏也是有CD的
; COMF文件路径：ERB\コマンド関連\COMF\日常系\COMF416 演奏する.ERB
;==================================================
@M_KOJO_XXX_SUCCESS_COM_KX_416
;成否判定
;TFLAG:192(-2=强制中止指令、-1＝强制失败、0=根据COM文件决定、1=强制成功or大成功
TFLAG:192 = 0
; 宴会时，ABL:MASTER:音楽技能 < 3指令强制失败
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_416
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_416
CALL M_KOJO_XXX_MESSAGE_COM_KX_416_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_416_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	; 使用的乐器
	SELECTCASE TFLAG:141
		; 电子琴
		CASE 1
			PRINTFORMW
		; 钢琴
		CASE 2
			PRINTFORMW
		; 吉他
		CASE 3
			PRINTFORMW
		; 小号
		CASE 4
			PRINTFORMW
		; 小提琴
		CASE 5
			PRINTFORMW
	ENDSELECT	

	SELECTCASE TFLAG:193
		; 大成功，参加演奏则享受着和MASTER的演奏并沉浸其中；不参加则听得入迷一脸陶醉
		CASE 1
			PRINTFORMW
		; 失败，参加演奏则因为MASTER和不协和音而面色不快；不参加则用手堵住了耳朵
		CASE -1
			PRINTFORMW
		; 成功，参加演奏则享受着和MASTER的演奏并投去了佩服的视线，不参加则带着钦佩的表情听着
		CASE 0
			PRINTFORMW
	ENDSELECT	
ENDIF
RETURN 1
;==================================================
;417,午睡
;仅TIME > 660 && TIME < 900时是午睡，其他时间段为假寐
;CFLAG:陪睡中，1=在身旁睡着
; 午睡的TFLAG:193是在地文里赋值的，所以要用的就别关掉地文
;在非陪睡状态下，如果随机值为5且未取得UFUFU的合意，TFLAG:193 = 2；如果随机值为2且TARGET无接吻经验，TFLAG:193 = 3
; TFLAG:193(0=TARGET正抱着MASTER睡觉 1=TARGET枕在MASTER的大腿上睡觉 2=TARGET偷偷KISS了 3=TARGET偷看了寝颜 4=TARGET正在为MASTER做膝枕 5=TARGET正在摸MASTER的隐私部位
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_417
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_417
CALL M_KOJO_XXX_MESSAGE_COM_KX_417_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_417_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	; 陪睡中
	IF CFLAG:334
		PRINTFORMW
	ELSE
		SELECTCASE TFLAG:193
			; 身体无法动弹，睁开眼发现原来是TARGET抱着MASTER在睡觉
			CASE 0
				PRINTFORMW
			; 感觉大腿被重物压着，原来是TARGET拿MASTER的身体当枕头在睡觉
			CASE 1
				PRINTFORMW
			; 醒来发现TARGET坐在一旁，不知为什么捂住了嘴
			CASE 2
				PRINTFORMW
			; 醒来眼前出现了TARGET的脸，睡觉的样子被TARGET看得清清楚楚了
			CASE 3
				PRINTFORMW
			; 醒来时发现TARGET正在为MASTER作膝枕，TARGET露出微笑，抚摸了MASTER
			CASE 4
				PRINTFORMW
			; 被腿间被揉来揉去的感觉弄醒了，即便被MASTER不满地瞟了一眼，TARGET也还是满不在乎地继续着下流的按摩
			CASE 5
				PRINTFORMW
		ENDSELECT	
	ENDIF
ENDIF
RETURN 1
;==================================================
;421,祈願
;由于条件很复杂，需要参考ERB\指令関連\COMF\日常系\COMF421 願掛け.ERB
;以下仅列出几个通用祈愿内容
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_421
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_421
CALL M_KOJO_XXX_MESSAGE_COM_KX_421_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_421_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	; 祈愿内容
	SELECTCASE FLAG:560
		;精力超群
		CASE 200	

		;內心平靜
		CASE 201	

		;内裤能扫除出来
		CASE 202	

		;更容易吊起H气氛（也就是吹起桃色之风）
		CASE 203	
		
		CASEELSE

	ENDSELECT	
ENDIF
RETURN 1

;==================================================
;422～430的指令，由于这些是特殊指令，因此在模板中不受支持
;==================================================

;==================================================
;431,在浴室里放松
;TFLAG:194 == 1表示已经洗过了，不可以连续入浴
;当满足钱汤指令的实行条件（在人里/旧地狱的钱汤）时，该指令不可用（也就是说431和432指令是相互冲突的）
; TFLAG:400为真表示在公共场所洗澡，路人做出了反应
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_431
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_431
CALL M_KOJO_XXX_MESSAGE_COM_KX_431_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_431_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	;在浴场里放松了一会儿
	IF BATHCHECK(CFLAG:MASTER:300)	
		PRINTFORMW
	;在简易泳池放松了一会儿
	ELSE	
		PRINTFORMW
	ENDIF
ENDIF
RETURN 1
;==================================================
;432,钱汤（即付费澡堂）
;这个是洗澡后的口上
;在人里的澡堂还可以包场，包场后可以进入贷切钱汤这个单独的房间做UFUFU的事，想写后续的话请写在事件系的进入浴场 
;TFLAG:209(4= 没能进去（人里銭湯番台的女孩投来了愤怒的视线） 1=进入钱汤 7= 泡涤身之泉）
;TFLAG:211(4=没能进去（地底温泉番台的妖怪投来了愤怒的视线） 1=进入钱汤）
; 钱汤的地文在ERB\コマンド関連\COMF\日常系\COMF432 銭湯.ERB
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_432
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_432
CALL M_KOJO_XXX_MESSAGE_COM_KX_432_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_432_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	;人里
	IF CFLAG:MASTER:300 == 大衆浴場	

	;旧地狱
	ELSEIF CFLAG:MASTER:300 == 940		

	ENDIF
ENDIF
RETURN 1
;==================================================
;436,读书（目前已被统合进COM660读书，此模板废弃）
;TFLAG:193(选择文学书(1=神秘武术(文学？) 2=失败 3=文学),选择实用书(4=失败 5=实用书),选择小黄书(6=小薄本 7=保健体育 8=欲望涌上来了))
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_436
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_436
CALL M_KOJO_XXX_MESSAGE_COM_KX_436_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_436_1
;==================================================
;440,等待
;仅在地图入口处可执行此命令 CHK_ENTRANCE(CFLAG:MASTER:現在位置, MAIN_MAP)
;差分较多，具体可参考地文ERB\口上・メッセージ関連\EVENT_MESSAGE_COM400.ERB
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_440
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_440
CALL M_KOJO_XXX_MESSAGE_COM_KX_440_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_440_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	SELECTCASE CFLAG:MASTER:300
		CASE 桜花道的鳥居, P22参道
			PRINTFORMW
		CASE 地蔵小路, P140地蔵小路
			PRINTFORMW
		CASE 広場, P201人里的門
			PRINTFORMW
		CASE 霧之湖, P343湖畔
			PRINTFORMW
		CASE 竹林入口, P447竹林入口
			PRINTFORMW
		CASE 森林的入口, P501魔法之森入口
			PRINTFORMW
		CASE 中有之道, P601中有之道
			PRINTFORMW
		CASE 山麓樹海, P701樹海道入口
			PRINTFORMW
		CASE 九天瀑布, P801山頂入口
			PRINTFORMW
		CASE 幻想風穴, P948縦穴底部
			PRINTFORMW
		CASEELSE
			PRINTFORMW
	ENDSELECT

ENDIF
RETURN 1
;==================================================
;441,听课(慧音专用版的学习，只能在慧音工作时实施该指令）
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_441
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_441
CALL M_KOJO_XXX_MESSAGE_COM_KX_441_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_441_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	; MASTER的教养更高，慧音一边接受教导一边上课
	IF ABL:MASTER:43 > ABL:43
		PRINTFORMW 
	; 一边接受慧音的教导一边上课
	ELSE
		PRINTFORMW
	ENDIF

ENDIF
RETURN 1
;==================================================
;442,伐采
;如果手上本来就有原木的话，会跳到对原木的处理而不是砍树
;TIME:2 >= 5（下午6点之后）且未时停时，或者天气恶劣时无法砍树
;如果不使用催眠，是不能在没有与地区相应住户打好关系的情况下盗砍的
;木材种类用%WOOD_NAME(数字)%表示（12是竹子，646是香木，其余的详见ERB\コマンド関連\COMF\日常系\WoodData.ERB
; 砍树的地文在COMF文件里，ERB\コマンド関連\COMF\日常系\COMF442 伐採する.ERB
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_442
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_442
CALL M_KOJO_XXX_MESSAGE_COM_KX_442_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_442_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	; 本次砍树砍到的原木的种类
	SELECTCASE FLAG:866
		;砍到的是香木
		CASE 646	

		;砍到的是巨木(尺寸)，可以再分一层木材种类
		CASE 201 TO 299		
		
		;砍到的是大木（尺寸），可以再分一层木材种类
		CASE 101 TO 199		
		
		;没砍到木头
		CASE 0 	
		
		;竹子是特例，没有存进FLAG，而是LOG_SALES:12
		
		;砍到的是各种普通的木头（尺寸正常）
		CASEELSE 	
	
	ENDSELECT
ENDIF
RETURN 1
;==================================================
;445,采集
;如果不使用催眠，是不能在没有与地区相应住户打好关系的情况下盗采的
;TFLAG:193表示採集物的物品ID, == 0就是什么都没有找到，物品ID详见CSV/ITEM.CSV
;TFLAG:194表示这次采集到的物品数量
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_445
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_445
CALL M_KOJO_XXX_MESSAGE_COM_KX_445_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_445_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	; 什么都没有找到
	IF !TFLAG:193
		PRINTFORMW
	; 找到东西了
	ELSE
	
	ENDIF 
ENDIF
RETURN 1
;==================================================
;448,设下陷阱 \ 设下昆虫诱捕装置
;TIME:2 >= 5（下午6点之后）且未时停时，或者天气恶劣时无法实行该指令
;如果不使用催眠，是不能在没有与地区相应住户打好关系的情况下盗猎的
;TFLAG:193,
;   -1=陷阱坏掉了
;    0=陷阱还在那里
;    1=捕获到了猎物
;   10=设置了昆虫诱捕装置
;   11=破弃了昆虫诱捕装置
;   12=抓到了一个虫子
;FLAG:194,猎物的编号，具体可参考地文ERB\口上・メッセージ関連\EVENT_MESSAGE_COM400.ERB
;虫子的名称 可通过 MUSHI_NAME 来表示和确定
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_448
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_448
CALL M_KOJO_XXX_MESSAGE_COM_KX_448_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_448_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	SELECTCASE TFLAG:193
		;陷阱还在那里
		CASE 0
			PRINTFORMW
		;抓到猎物了，用TFLAG:194表示猎物的种类
		CASE 1

		; 陷阱坏掉了，将散落的零件回收了
		CASE -1
			PRINTFORMW
		; 设置了捕虫陷阱
		CASE 10
			PRINTFORMW
		; 将捕虫陷阱废弃了
		CASE 11
			PRINTFORMW
		; 捕虫陷阱补获了虫子
		CASE 12

	ENDSELECT	
ENDIF
RETURN 1
;==================================================
;449,捕虫
;TFLAG:193,
;   -2=就算杀了你，也要得到它（百分百让虫子逃走）
;   -1=索要虫子→拒否
;    0=没有抓到
;    1=MASTER抓到虫子了
;    2=MASTER称赞TARGET抓到了虫子
;    3=索要虫子→沮丧地让出了ー
;    4=索要虫子→一脸得意地让出了ー
;虫子的名称 可通过 MUSHI_NAME 来表示和确定
;冬天没有虫子
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_449
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_449
CALL M_KOJO_XXX_MESSAGE_COM_KX_449_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_449_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	SELECTCASE TFLAG:193
		; 相互争斗的时候虫子逃走了
		CASE -2
			PRINTFORMW
		; TARGET拒绝让出虫子
		CASE -1
			PRINTFORMW
		; 什么也没抓到
		CASE 0
			PRINTFORMW
		; MASTER抓到虫子了
		CASE 1
			PRINTFORMW
		; MASTER称赞TARGET抓到的虫子
		CASE 2
			PRINTFORMW
		; TARGET沮丧地把虫子让给的MASTER
		CASE 3
			PRINTFORMW
		; TARGET一脸得意地把虫子让给了MASTER
		CASE 4
			PRINTFORMW
	ENDSELECT		
ENDIF
RETURN 1
;==================================================
;483,斗虫
;TFLAG:193,
;    1=１対１对战
;    2=３～４人战
;    3=２対２团队战
;TFLAG:194是MASTER的排名（MASTER排名为1代表TARGET失败）
;战斗期间的口上包含在EVENT系模板中，这里写战斗之后的内容
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_483
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_483
CALL M_KOJO_XXX_MESSAGE_COM_KX_483_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_483_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	SELECTCASE TFLAG:193
	;1V1，TFLAG:194 == 1表示MASTER胜利，沉浸在战胜的余韵中；反之败北，体会了无法想象的屈辱感
	CASE 1

	;3~4人混战，TFLAG:194 == 1表示MASTER胜利，奖励了带来胜利的虫子们；反之败北，认为这是对虫子们一个很好的锻炼
	CASE 2

	;2V2，TFLAG:194 == 1表示MASTER胜利，和战友一起分享了胜利的欢愉；反之败北，互相称赞了对方
	CASE 3

	ENDSELECT

ENDIF
RETURN 1
;==================================================
;484,打西瓜
;雨天，或者手上端着料理时无法使用该指令
;TFLAG:193,
;   -1=失败
;    0=成功
;    1=大成功
;    2=木刀大成功
;TFLAG:194 == 0表示TARGET为正直者，没有说谎；== 1表示TARGET为说谎者 
;打西瓜时会在参与角色中随机选择一个角色来报出虚假的位置信息（正邪必然是说谎者））
;如果角色为说谎者，则在打西瓜失败后获得更多的欢乐，反之则降低欢乐获取值，获得受动与征服（均为SOURCE）
;打西瓜中途的口上包含在EVENT系模板中，这里写打西瓜结束后的内容
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_484
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_484
CALL M_KOJO_XXX_MESSAGE_COM_KX_484_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_484_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	SELECTCASE TFLAG:193
		; 木刀大成功，漂亮地把西瓜切成了花一样的等份
		CASE 2

		; 大成功，准确地击中了西瓜，将西瓜华丽地切开了
		CASE 1

		; 成功，勉强击中了，西瓜切得不是很好看
		CASE 0

		; 失败，没有切到西瓜
		CASE -1

	ENDSELECT
ENDIF
RETURN 1

;==================================================
;490,道具
;TFLAG:193表示使用道具的ID
;TFLAG:194表示使用的対象 0=MASTER,1=TARGET
;内容过多，请参考ERB\コマンド関連\COMF\日常系\COMF490 アイテム.ERB
;如果不想细写的话，可以用ITEMTYPE粗略给ITEM分种类
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_490
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_490
;使用道具没有地文
CALL M_KOJO_XXX_MESSAGE_COM_KX_490_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_490_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	SELECTCASE ITEMTYPE(TFLAG:193)
		;药物
		CASE 1		

		;能提供BUFF的物品
		CASE 2		

		;食物（主食或轻食）
		CASE 3		

		;甜点
		CASE 4		

		;水果（不会增加饱腹度的物品）
		CASE 5		

		;其他
		CASE 6		

	ENDSELECT	
ENDIF
RETURN 1

;※※※※※※※※※※※※※※※※※※※※※※※※※
;约会系指令
;约会系口上实际上会在外出期间被触发
;※※※※※※※※※※※※※※※※※※※※※※※※※
[SKIPSTART]
;目前未实装
;==================================================
;600,约会会话
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_600
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_600
CALL M_KOJO_XXX_MESSAGE_COM_KX_600_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_600_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL

ENDIF
RETURN 1

;==================================================
;601,约会时身体接触
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_601
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_601
CALL M_KOJO_XXX_MESSAGE_COM_KX_601_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_601_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL

ENDIF
RETURN 1

;==================================================
;602,约会时接吻
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_602
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_602
CALL M_KOJO_XXX_MESSAGE_COM_KX_602_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_602_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL

ENDIF
RETURN 1
[SKIPEND]
;==================================================
;603,牵手
;TFLAG:193(1=大成功 0=成功 -1=失败)(失败时只会犹豫地握住手
;连续实施牵手指令会变成拉手（见之后的模板）
;==================================================
@M_KOJO_XXX_SUCCESS_COM_KX_603
;成否判定
;TFLAG:192(-2=强制中止指令、-1＝强制失败、0=根据COM文件决定、1=强制成功or大成功
TFLAG:192 = 0

;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_603
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_603
CALL M_KOJO_XXX_MESSAGE_COM_KX_603_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_603_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	; 成功，面泛红晕开心的把手回握过来
	IF TFLAG:193 == 1
		PRINTFORMW
	; 失败， 有些犹豫的握住了手
	ELSEIF TFLAG:193 == -1
		PRINTFORMW
	; 普通成功
	ELSE
		PRINTFORMW
	ENDIF
ENDIF
RETURN 1
;==================================================
;604,散步（其实就是约会时的移动指令）
;约会时、CFLAG:現在位置代表MASTER移动的目标位置
;部分角色（小町和若鹭姬）会导致移动所需时间增减
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_604
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_604

CALL M_KOJO_XXX_MESSAGE_COM_KX_604_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_604_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	; 请自行写下目标位置
	SELECTCASE CFLAG:300
		CASE 1
		
		CASEELSE

	ENDSELECT	
ENDIF
RETURN 1
;==================================================
;605,绕道（会导致到达目的地的所需时间增加10分钟）
;TFLAG:193(1=大成功 0=成功 -1=失败)(没有地文差分)
;==================================================
@M_KOJO_XXX_SUCCESS_COM_KX_605
;成否判定
;TFLAG:192(-2=强制中止指令、-1＝强制失败、0=根据COM文件决定、1=强制成功or大成功)
TFLAG:192 = 0
;若口上侧无管理则TCVAR:20（COUNTER触发）时强制成功
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_605
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_605
;绕道没有TRAIN_MESSAGE
CALL M_KOJO_XXX_MESSAGE_COM_KX_605_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_605_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL


ENDIF
RETURN 1
;==================================================
;610,请TARGET吃饭
;TFLAG:193(1=大成功 0=成功 -1=失败)
;可以实施该指令的地点：
;933=地底酒场（旧地狱街道）、218=人里小料理屋（商家町）444=夜雀小店（竹林入口）（如果米斯琪在工作中则不可用）、中有之道（这个地方要求必须外出，没有对应的地点ID）
;==================================================
@M_KOJO_XXX_SUCCESS_COM_KX_610
;成否判定
;TFLAG:192(-2=强制中止指令、-1＝强制失败、0=根据COM文件决定、1=强制成功or大成功
TFLAG:192 = 0

;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_610
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_610
CALL M_KOJO_XXX_MESSAGE_COM_KX_610_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_610_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	; 大成功,TARGET非常高兴
	IF TFLAG:193 == 1
		PRINTFORMW
	; 失败,TARGET好像很不满
	ELSEIF TFLAG:193 == -1
		PRINTFORMW
	; 成功
	ELSE
		PRINTFORMW
	ENDIF
ENDIF
RETURN 1
;==================================================
;613,赚钱	[目前已弃用]
;==================================================
@M_KOJO_XXX_SUCCESS_COM_KX_613
;成否判定
;TFLAG:192(-2=强制中止指令、-1＝强制失败、0=根据COM文件决定、1=强制成功or大成功
TFLAG:192 = 0

;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_613
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_613
CALL M_KOJO_XXX_MESSAGE_COM_KX_613_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_613_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
;==================================================
;614,采购食材
;TFLAG:193(1=购入且获得了约会经验 0=购入 -1=没有购入)
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_614
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_614
CALL M_KOJO_XXX_MESSAGE_COM_KX_614_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_614_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	SELECTCASE TFLAG:193
		; 购入且获得了约会经验
		CASE 1
		
		; 购入
		CASE 0
		
		; 没有购入
		CASE -1

	ENDSELECT	
ENDIF
RETURN 1
;==================================================
;615,吃便当
;可以实行该指令的地方：地蔵小路,倒垂的柳树下,霧之湖,玄武之泽,大蛤蟆之池,绝景之丘,山之湖,天界
;TFLAG:193(1=大成功 0=成功 -1=失败)
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_615
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_615
CALL M_KOJO_XXX_MESSAGE_COM_KX_615_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_615_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	;失败，不好评价的味道
	IF TFLAG:193 == -1
	;大成功，谈笑着度过了一段愉快的时光
	ELSE
		; 料理技能的差分
		SELECTCASE ABL:44
			;小于2，比较微妙 
			CASE IS < 2	

			; 小于4，相当美味
			CASE IS < 4	

			; 高于4，绝品，最美味了
			CASEELSE

		ENDSELECT	
	ENDIF
ENDIF
RETURN 1
;==================================================
;617,邀请去甜品店
;TFLAG:193(1=大成功（十分喜悦） 0=成功 -1=失败)(地文分岐只是为了大成功而追加，并无实际加成
;==================================================
@M_KOJO_XXX_SUCCESS_COM_KX_617
;成否判定
;TFLAG:192(-2=强制中止指令、-1＝强制失败、0=根据COM文件决定、1=强制成功or大成功
TFLAG:192 = 0

;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_617
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_617
CALL M_KOJO_XXX_MESSAGE_COM_KX_617_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_617_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL

ENDIF
RETURN 1
;==================================================
;618,花屋
;似乎没有什么检查是否购买的直接方法
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_618
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_618
CALL M_KOJO_XXX_MESSAGE_COM_KX_618_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_618_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL

ENDIF
RETURN 1
;==================================================
;620,铃奈庵
;TFLAG:193(1=借好书了 0=没有借书）
;ITEM:10X (X =1 战术指南书  X = 2 料理指南书  X = 3 字典  X = 4 御伽草子  X = 5 演奏指南书  X = 6 纸芝居  X = 7 百鱼图鉴  X = 8 采集指南  X = 9 药学教本  X = 10 伐木心得
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_620
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_620
CALL M_KOJO_XXX_MESSAGE_COM_KX_620_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_620_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	; 借了书
	IF TFLAG:193
		SELECTCASE ITEM
			; 战术指南书
			CASE 101
				PRINTFORMW
			; 料理指南书
			CASE 102
				PRINTFORMW
			; 字典
			CASE 103		
				PRINTFORMW
			;御伽草子（童话书）
			CASE 104
				PRINTFORMW
			; 演奏指南书
			CASE 105
				PRINTFORMW
			; 纸芝居（漫画书）
			CASE 106
				PRINTFORMW
			; 百鱼图
			CASE 107
				PRINTFORMW 
			; 采集指南
			CASE 108
				PRINTFORMW
			; 药学教本
			CASE 109
				PRINTFORMW
			; 伐木心得
			CASE 110
				PRINTFORMW
		ENDSELECT		
	; 没有借书
	ELSE

	ENDIF

ENDIF
RETURN 1
;==================================================
;621,钓鱼
;钓到的物品（用COM_STR表示）包括"釣れない"（没有钓到）,"跳蛋","木片","紙切れ"（纸片）
;以及物品的名称（用%ITEMNAME:(ARG)%表示）、鱼的种类（用%FISH_NAME(ARG)%）（ARG替换为对应的ID，具体请参考COMF621文件））
;或者用TFLAG:193表示：0=没钓到，610=木片，131= 纸片，21= 跳蛋，其他为物品或鱼
;TFLAG:194 > 1000 表示是TARGET钓到的，反之则是MASTER钓到的
;在非约会时（约会时必然会一起钓鱼），如果当前角色ABL:TARGET:親密 >= 5 - TALENT:TARGET:釣魚Lv，且非工作状态，意识清醒，就会一起钓鱼。否则不会。
;IF INRANGE(ARG, 11, 20) || INRANGE(ARG, 24, 60)  表示此时钓上的是好吃的鱼
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_621
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_621
CALL M_KOJO_XXX_MESSAGE_COM_KX_621_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_621_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	SELECTCASE TFLAG:193
		; 什么也没有钓到
		CASE 0
			PRINTFORMW
		; 钓上来了木片
		CASE 610
			PRINTFORMW
		; 钓上来了纸片（守矢守札）
		CASE 131
			PRINTFORMW
		;钓上来了鱼
		CASE 1 TO 20, 22 TO 60	

		; 钓上来了跳蛋
		CASE 21
			PRINTFORMW
		;钓上来了物品
		CASEELSE	

	ENDSELECT
ENDIF
RETURN 1
;==================================================
;626,土产屋
;TFLAG:194(行动结果(-2=被赶出来了 -1=并没有买礼物 1=400点不足（BAD） 2=～699点（NOMAL） 3=700点以上（GOOD）
;CFLAG:性格傾向会导致地文的分歧
;如果想细致地写礼物的名字、种类和形容词的话，将下面的代码取消注释就行了，根据需要使用相应的LOCALS，不用就删掉
;想写得更加具体请参考ERB\イベント関連\贈り物関連\贈り物.ERB
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_626
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_626
CALL M_KOJO_XXX_MESSAGE_COM_KX_626_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_626_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL

	[SKIPSTART]
	CALL GIFTDATA_ADJECT(GET_GIFTDATA(TCVAR:TARGET:333, "形容詞"))
	LOCALS:1 = %RESULTS:1%
	;这个表示礼物所包含的修饰性TAG，比如”光、秩序、帅气的、和风“之类的TAG，因为一次会有很多TAG所以不建议直接写出来，用STRFIND/STRCOUNT之类的命令来筛选
	LOCALS:2 = %RESULTS:0%		
	;这个表示礼物的前缀，比如”救世的“之类的形容词，同样不建议直接写出来
	CALL GIFTDATA_MAIN(GET_GIFTDATA(TCVAR:TARGET:333, "本体"))
	LOCALS:1 += RESULTS:1
	;这一步会将礼物的本体相关TAG（如“穿戴、装饰”等TAG）存进去，不建议直接写出来
	LOCALS:3 = %RESULTS:0%
	;这个表示礼物是什么东西，比如”提包、剑“之类的名词，这个可以直接写出来
	CALL GIFTNAME(TCVAR:TARGET:333, TARGET)
	LOCALS:4 = %RESULTS%
	;礼物的名字，可以直接用
	[SKIPEND]
	
	SELECTCASE TFLAG:194
		;看的时间太久被赶出去
		CASE -2
		
		;果然还是放弃（只是逛街看商品，没有买礼物）
		CASE -1
		
		;礼物满意度< 400点（BAD），看着礼物哭笑不得
		CASE 1
		
		;礼物满意度在400点～699点（NOMAL），笑着收下了礼物
		CASE 2
		
		;礼物满意度在700点以上（GOOD），满脸笑容地收下了礼物
		CASE 3
		
	ENDSELECT
ENDIF
RETURN 1
;==================================================
;660,读书
;TFLAG:193(选择文学书(1=神秘武术(文学？) 2=失败 3=文学成功),选择实用书(4=失败 5=实用书成功),选择小黄书(6=小薄本 7=保健体育 8=欲望涌上来了))
; 如果TARGET拥有无知素质，读小黄书时满足一定条件会在地文里触发教导成人知识的事件，使TARGET失去无知素质
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_660
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_660
CALL M_KOJO_XXX_MESSAGE_COM_KX_660_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_660_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	SELECTCASE TFLAG:193
		;忍殺，领略了神秘武术的精髓
		CASE 1		
	
		;文学失败，不明白哪里有趣
		CASE 2		
	
		;文学成功，比想象中的还要有趣
		CASE 3		
	
		;实用失败，没有学到知识
		CASE 4		
	
		;实用成功，学到了新的知识
		CASE 5		
	
		;印度爱经，对先人们的智慧抱以深深的敬意
		CASE 6		
	
		;保健体育，加深了对女体相关知识的理解
		CASE 7		
	
		;小黄书，欲望涌上来了
		CASE 8		

	ENDSELECT	
ENDIF
RETURN 1
;==================================================
;698,进入房间
;仅在外出期间进入TARGET的房间时显示，如果同时和其他角色在进行约会，则被约会角色盯着强制失败
;如果不启用无条件访问补丁的话，
;1.角色工作中、2.如果催眠强度不够，既没有角色的恋慕也不是爱人，还不在发情状态、3.角色愤怒>50、4.角色睡眠中，这些条件成立的话无法使用指令 
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_698
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_698
CALL M_KOJO_XXX_MESSAGE_COM_KX_698_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_698_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL

ENDIF
RETURN 1
;==================================================
;699,外出
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_COM_KX_699
RETURN 0

@M_KOJO_XXX_MESSAGE_COM_KX_699
CALL M_KOJO_XXX_MESSAGE_COM_KX_699_1
RETURN RESULT

@M_KOJO_XXX_MESSAGE_COM_KX_699_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	;单独外出
	IF !TARGET	
		PRINTFORMW
	;TARGET睡眠中，为了不惊醒睡着的TARGET悄悄地外出
	ELSEIF CFLAG:313	
		PRINTFORMW
	; TARGET不处于睡眠时间，带上TARGET一起外出
	ELSEIF !睡眠時間(TARGET) && !CFLAG:313
		PRINTFORMW
	; 在TARGET的目送下一个人外出	
	ELSE		
		PRINTFORMW
	ENDIF
ENDIF
RETURN 1

;※※※※※※※※※※※※※※※※※※※※※※※※※
;派生指令
;※※※※※※※※※※※※※※※※※※※※※※※※※
;==================================================
;60,掏耳朵
;先索求膝枕，后身体接触，身体接触会变成掏耳朵
;根据膝枕和被膝枕的区别，分为角色被掏耳朵和主角被掏耳朵。可以用 PREVCOM进行侦测前一个指令到底是什么来检测到底是谁掏谁
;TFLAG:193(1=大成功 0=成功 -1=失败)
;==================================================
@M_KOJO_XXX_SUCCESS_SCOM_KX_60
;成否判定
;TFLAG:192(-2=强制中止指令、-1＝强制失败、0=根据COM文件决定、1=强制成功or大成功
TFLAG:192 = 0

;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_SCOM_KX_60
RETURN 0

@M_KOJO_XXX_MESSAGE_SCOM_KX_60
CALL M_KOJO_XXX_MESSAGE_SCOM_KX_60_1
RETURN RESULT
@M_KOJO_XXX_MESSAGE_SCOM_KX_60_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	; 大成功，用温柔的动作掏耳朵
	IF TFLAG:193 == 1
		PRINTFORMW
	; 失败，手忙脚乱
	ELSEIF TFLAG:193 == -1
		PRINTFORMW
	; 普通成功
	ELSE
	ENDIF
ENDIF
RETURN 1
;==================================================
;61,抱枕
;(TARGET睡眠时间or衰弱)陪睡时、前一个指令为拥抱，后接就寝，会让就寝变成抱枕
; MASTER\@ TALENT:105 > 0 ? 把脸埋进TARGET的胸部 # 将TARGET抱住 \@睡着了
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_SCOM_KX_61
RETURN 0

@M_KOJO_XXX_MESSAGE_SCOM_KX_61
CALL M_KOJO_XXX_MESSAGE_SCOM_KX_61_1
RETURN RESULT
@M_KOJO_XXX_MESSAGE_SCOM_KX_61_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL

ENDIF
RETURN 1
;==================================================
;62,亲额头
;前摸头，后接吻，会让接吻变成这个（因为是亲额头所以不用担心初吻）
;TFLAG:193(1=大成功 0=成功 -1=失败)(没有地文分歧）
;ABL:欲望(5以上=欲求不满的眼神）
;ABL:親密(5以上=脸变得通红）
;==================================================
@M_KOJO_XXX_SUCCESS_SCOM_KX_62
;成否判定
;TFLAG:192(-2=强制中止指令、-1＝强制失败、0=根据COM文件决定、1=强制成功or大成功
TFLAG:192 = 0
;TFLAG:102 == 3（被逆推时），指令强制成功
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_SCOM_KX_62
RETURN 0

@M_KOJO_XXX_MESSAGE_SCOM_KX_62
CALL M_KOJO_XXX_MESSAGE_SCOM_KX_62_1
RETURN RESULT
@M_KOJO_XXX_MESSAGE_SCOM_KX_62_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	; TARGET不处于睡眠状态才会做出反应
	IF !CFLAG:313
		; 欲望 >= 5，被亲额头后欲求不满地看着MASTER
		IF ABL:11 >= 5
			PRINTFORMW
		; 亲密 >= 5，脸变得通红
		ELSEIF ABL:9 >= 5
			PRINTFORMW
		; 其他，因为突发事态受惊了
		ELSE
			PRINTFORMW
		ENDIF
	ENDIF
ENDIF
RETURN 1
;==================================================
;63,更多的接吻
;连续接吻，第二次会变成更多的接吻
;需要请参考ERB\口上・メッセージ関連\EVENT_MESSAGE_COM500.ERB
;睡着时，ABL:親密 >= 8则接吻结束后露出微笑，ABL:親密 >= 5则有点难受地皱起眉头，其他情况下神情扭曲并转过脸
;正常情况下，TALENT:恋慕则把嘴唇抵过来，ABL:親密 >= 5则不客气地捶肩膀，其他情况下呼吸变乱。
;==================================================
@M_KOJO_XXX_SUCCESS_SCOM_KX_63
;成否判定
;TFLAG:192(-2=强制中止指令、-1＝强制失败、0=根据COM文件决定、1=强制成功or大成功
TFLAG:192 = 0
;TFLAG:102 == 3（被逆推时），指令强制成功
;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_SCOM_KX_63
RETURN 0

@M_KOJO_XXX_MESSAGE_SCOM_KX_63
CALL M_KOJO_XXX_MESSAGE_SCOM_KX_63_1
RETURN RESULT
@M_KOJO_XXX_MESSAGE_SCOM_KX_63_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	; 时停时
	IF FLAG:70
	; TARGET睡眠中
	ELSEIF CFLAG:313
		; 亲密 >= 8，露出淡淡的微笑
		IF ABL:9 >= 8
			PRINTFORMW
		; 亲密 >= 5，有点难受地皱起眉头
		ELSEIF ABL:9 >= 5
			PRINTFORMW
		; 5以下，神情扭曲并无意识地转过了脸
		ELSE
			PRINTFORMW
		ENDIF
	; 正常状态
	ELSE
		; 恋慕，满脸通红并把嘴唇抵了过来
		IF TALENT:3
			PRINTFORMW
		; 亲密 >= 5，毫不客气地锤着MASTER的肩膀
		ELSEIF ABL:9 >= 5
			PRINTFORMW
		; 其他情况，呼吸慌乱了
		ELSE
			PRINTFORMW
		ENDIF
	ENDIF
ENDIF
RETURN 1
;==================================================
;80,拉手
;约会出发后道中时，牵手后会让牵手变成拉手（会走得更快，减少到达目的地所需的时间）
;TFLAG:193(1=大成功 0=成功 （开心地快步走）-1=失败)（无辜地快步走）
;==================================================
@M_KOJO_XXX_SUCCESS_SCOM_KX_80
;成否判定
;TFLAG:192(-2=强制中止指令、-1＝强制失败、0=根据COM文件决定、1=强制成功or大成功
TFLAG:192 = 0

;==================================================

@M_KOJO_XXX_MESSAGE_MESSAGECHECK_SCOM_KX_80
RETURN 0

@M_KOJO_XXX_MESSAGE_SCOM_KX_80
CALL M_KOJO_XXX_MESSAGE_SCOM_KX_80_1
RETURN RESULT
@M_KOJO_XXX_MESSAGE_SCOM_KX_80_1
;-------------------------------------------------
;启用（=0, 非表示、1, 表示）
LOCAL = 1
;-------------------------------------------------
IF LOCAL
	; 大成功，跟在MASTER身边开心地快步走
	IF TFLAG:193 == 1
		PRINTFORMW
	; 失败，一脸无辜地快步走	
	ELSEIF TFLAG:193 == -1
		PRINTFORMW
	; 普通成功
	ELSE
		PRINTFORMW
	ENDIF
ENDIF
RETURN 1