大家好，我是JPAnon（英文赫卡提亚的作者），再次前来。
我将我为英文版TW编写的酿酒指南功能移植过来，旨在让玩家更容易学习和记住游戏中各种饮品的配方。
酿酒指南是一项可解锁的功能，它列出了玩家之前学到的所有酿酒器配方，以选项列表的形式展示所需的原料、酿造时间以及可能的结果。

它通过两项新的成就解锁，这些成就将推进玩家在新的“酒造家”天赋中的进度。
第一个等级通过酿造（或混合）10种不同的饮品解锁，这将解锁酿酒指南并略微增加酿酒器的产出。
第二个等级通过酿造或混合所有不同的饮品解锁，这将使每个酿造步骤的速度略微加快，最短可达两天，这尤其有利于复杂的配方。
对于这两个等级，我使用了“酒造家”和“杜氏”这两个词。如果这些词不合适，请随意更改。

为了方便酿酒指南，我重构了代码中处理添加原料的方式。@COM450_1 之前硬编码了所有添加操作，现在已被 @BREWING_GUIDE_MIX_MENU 替换，后者从 酒関連.ERB 读取各种配方，该文件已扩展以包含所有所需信息。这也使得添加新饮品和配方变得更容易，因为所有必需的信息现在都可以在同一个文件中找到，并且允许酿酒菜单动态列出有效选项，而不是将大部分选项灰显。
已添加以下字段：
CASE "ADDITIONS"
	这列出了可以添加到酿酒器当前内容中的各种原料。所有选项都用“／”分隔，并用于其他字段。
	对于需要同时添加两种或更多原料的步骤，它们应通过“＋”连接在一起（例如：“蒸留酒＋甘味材”）
CASE "ITEM：[INGREDIENT(S) NAME]"
	这列出了添加原料后立即产生的结果的名称，通常是中间阶段。
CASE "QUANTITY：[INGREDIENT NAME]"
	这列出了所需特定原料的数量。
	对于一次添加两种或更多原料的步骤，这需要为每种原料单独设置一个字段。
CASE "EXTRA：[INGREDIENT(S) NAME]"
	这列出了玩家添加特定原料组合后获得的任何额外物品，例如 ポマース。
CASE "EXTRAQUANTITY：[INGREDIENT(S) NAME]"
	这列出了玩家获得的额外物品的数量。
CASE "SPEED：[INGREDIENT(S) NAME]"
	这列出了如果添加特定原料，当前酿造阶段会加快多少天。
	目前仅适用于将 どぶろく 添加到 ただの水。
这些字段足以处理所有现有配方。

对于现有存档，将扫描玩家的物品栏以查找任何有效的饮品。这些饮品将自动被视为之前已酿造过，尽可能地填充指南的部分内容。
各种现有角色的 .csv 文件已根据需要进行了调整，以添加新的天赋。

由于我不精通日语，因此仍有一些部分需要翻译，为方便起见，所有这些部分都已标记为“;brewing todo translation”。
这影响以下函数：
@PRINT_BONUS_7
@REWARD_BONUS_7
@BONUS_NAME_7
@BREWING_GUIDE
@BREWING_GUIDE_WALK_ALL_PATHS
@BREWING_GUIDE_WRITE_PATH
@BREWING_GUIDE_COLOR_DRINK
@BREWING_GUIDE_MIX_MENU

此外，我还修复了 @酒データ56 中的一个错误，该错误导致它在一天后消失，因为“醸造日数”字段被无意中设置了。
我还重写了 @ALC_ID 和 @IS_ALC 以提高性能。它现在使用在游戏开始时初始化一次的映射数据结构来查找名称对应的ID，而不是每次都遍历所有选项。

我已将此补丁放入版本控制中，您可以在此处找到它，这应该有助于全面了解所有更改：https://gitgud.io/JPAnon/japanese-fixes/-/commit/b779a506df0df6930bc34f5e33717336db3b80be

我希望这足以解释所有新功能以及对现有功能所做的更改。
此外，我还制作了一个单独的补丁，修复了我在4.973版本中发现的一些问题。

在此之后，我打算移植许多之前在英文版中修复的次要错误。
完成之后，我打算研究移植与婚姻和纳妾相关的内容，但这需要日方进行大量的翻译工作才能完成。
